
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>10289</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="3cfd81b5-2605-4b08-a739-579f2afb51e1">A 49-year-old woman is
                                        transferred from a community hospital to a tertiary care center for management
                                        of an acute exacerbation of chronic obstructive pulmonary disease.  The patient
                                        receives care overnight from a hospitalist, who transfers care to the teaching
                                        service in the morning.  The medical team now responsible for the patient meets
                                        with her for the first time during morning rounds.  The attending physician
                                        introduces the team and explains that the patient will be interviewed by the
                                        intern.  The patient then addresses the intern by his first name and mentions,
                                        "You remind me so much of my son.  He's very smart and looks a lot
                                        like you."  Which of the following actions by the intern would be most
                                        appropriate to begin the interview?</p>
<table class="simple-table" id="d72f3831-1394-4359-9dac-321fbf37539b">
<tbody>
<tr id="32a6c0b8-5eb0-4f9e-ad3c-2c5f985ca1e3">
<td class="" id="bZNV">A.</td>
<td class="" id="xoO:">Address the patient by her first name and ask
                                                    about current symptoms</td>
<td class="" id="V?J\"></td>
</tr>
<tr id="8ecbdbcc-b4af-4d4e-be4a-1628a38eea75">
<td class="" id="bZNV">B.</td>
<td class="" id="xoO:">Address the patient by her first name and ask if
                                                    she is comfortable with that</td>
<td class="" id="V?J\"></td>
</tr>
<tr id="ed3697b5-4a35-4320-8da6-d67f1040fd8d">
<td class="" id="bZNV">C.</td>
<td class="" id="xoO:">Address the patient by her surname and ask about
                                                    current symptoms</td>
<td class="" id="V?J\"></td>
</tr>
<tr id="ed065b29-3160-446e-b99d-4a593451b63a">
<td class="" id="bZNV">D.</td>
<td class="" id="xoO:">Greet the patient and inquire about her preferred
                                                    form of address</td>
<td class="" id="V?J\"></td>
</tr>
<tr id="460c2c45-9df1-4c40-9148-fa2f87f5d82c">
<td class="" id="bZNV">E.</td>
<td class="" id="xoO:">Politely ask the patient to use the title of
                                                    doctor and then inquire about current symptoms</td>
<td class="" id="V?J\"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="ef6b2a2c-0586-43f0-ba6b-8dc3b05aa041">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="7262b05a-79c9-4011-9677-2c934e718758">
<tbody>
<tr id="88857967-b893-4fbd-bade-70257dff061d">
<td class="" id="HR;U">A.</td>
<td class="" id="RXU~">Address the patient by her first name
                                                                and ask about current symptoms (1%)</td>
<td class="" id="S^Lr"></td>
</tr>
<tr id="646853a4-640a-42cd-b684-0190182c2ffd">
<td class="" id="HR;U">B.</td>
<td class="" id="RXU~">Address the patient by her first name
                                                                and ask if she is comfortable with that (4%)</td>
<td class="" id="S^Lr"></td>
</tr>
<tr id="00c35879-315a-4d16-a8c6-ec830b4cb343">
<td class="" id="HR;U">C.</td>
<td class="" id="RXU~">Address the patient by her surname
                                                                and ask about current symptoms (11%)</td>
<td class="" id="S^Lr"></td>
</tr>
<tr id="358f41de-6a34-41a9-bc07-1ca9c5907d5b">
<td class="" id="HR;U">D.</td>
<td class="" id="RXU~">Greet the patient and inquire about
                                                                her preferred form of address (74%)</td>
<td class="" id="S^Lr"></td>
</tr>
<tr id="6abe2a80-62e1-4895-9e4b-94e619e0f321">
<td class="" id="HR;U">E.</td>
<td class="" id="RXU~">Politely ask the patient to use the
                                                                title of doctor and then inquire about current symptoms
                                                                (7%)</td>
<td class="" id="S^Lr"></td>
</tr>
</tbody>
</table>
<p class="" id="359d8d12-084e-4133-9a1c-6d2779cf7aa5">Incorrect</p>
<p class="" id="08b5cefc-95b7-4e6a-a804-ba3ab884f155">Correct answer D
                                                </p>
<p class="" id="2e258c2a-4891-4da4-ad59-e098d0e5c26d">74%Answered
                                                    correctly</p>
<p class="" id="f90e66db-a21d-4afb-bfe1-9b3a076e01a1">14 secsTime Spent
                                                </p>
<p class="" id="7dcd2949-e454-4540-b5d8-30b8798fd5e4">2024Version</p>
<ul class="bulleted-list" id="36a74bbd-97bc-4279-bd6b-32887c98cac7">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="c17b3a83-d463-4fc5-91c2-97d3a57bb920">
<li style="list-style-type:disc"></li>
</ul>
<p class="" id="5e9e5aeb-10b0-4091-879c-4d3daaf0d9c8">Building a
                                                    therapeutic physician-patient relationship requires finding an
                                                    optimal balance between friendliness and professionalism.  First
                                                    impressions are important, and initial encounters with new patients
                                                    often set the tone for the ensuing relationship.  Using the
                                                    patient's preferred form of address can help build rapport. 
                                                    Clarifying any uncertainties about pronunciation, titles, or
                                                    pronouns is important as well.  Although younger adults often prefer
                                                    being called by first name, older patients may take offense at what
                                                    they consider undue familiarity.  When in doubt, the physician
                                                    should ask patients their preferred form of address.</p>
<p class="" id="18d61677-dc4b-4b0c-a79e-b270574a3157">As familiarity
                                                    develops between the physician and patient, many patients will
                                                    prefer to be addressed by first name.  However, it should be the
                                                    patient, not the physician, who takes the lead in lowering the level
                                                    of formality.  It is better to ask the patient's preference in
                                                    an open-ended manner rather than make assumptions.</p>
<p class="" id="c5bc09bb-d901-41fc-88b5-d3bd947aaca6">(Choices A and B) 
                                                    Although the patient has addressed the intern by his first name, it
                                                    is still inappropriate to assume that she wants to be addressed by
                                                    her first name.  The patient's preferred form of address should
                                                    be clarified first.</p>
<p class="" id="dba1ab98-b294-4c62-8172-1677f0a52421">(Choice C)  This
                                                    patient has expressed positive feelings toward the intern because he
                                                    reminds her of her son.  Using her surname without clarifying if
                                                    that is her preference shifts the tone of the interaction and may be
                                                    perceived as overly formal and distant.  Asking her preferred form
                                                    of address would be best.</p>
<p class="" id="32732d0b-106b-4759-91ec-262fe66f49df">(Choice E) 
                                                    Initiating an interview by instructing or correcting the patient in
                                                    front of the medical team, no matter how gently or politely, may
                                                    embarrass the patient and result in deterioration of rapport.</p>
<p class="" id="d43edf8b-6e8c-4226-ba73-c58e577e4de2">Educational
                                                    objective:</p>
<p class="" id="b3fa9058-83d2-4906-a326-0180d6235ad5">Initial encounters
                                                    with new patients often set the tone for the physician-patient
                                                    relationship.  When in doubt about how to address patients, the
                                                    physician should ask them their preferred form of address.</p>
<p class="" id="cd3c0c90-e86c-4c2d-8a5f-94b912d9ffab">References</p>
<ul class="bulleted-list" id="52a9f13d-017c-44ed-b352-3036100a9f6f">
<li style="list-style-type:disc"><a href="http://www.ncbi.nlm.nih.gov/pubmed/28148254">Building
                                                            trust and rapport early in the new doctor-patient
                                                            relationship: a longitudinal qualitative study.</a></li>
</ul>
<ul class="bulleted-list" id="63761919-eab4-4b0f-991e-ac137c633e1b">
<li style="list-style-type:disc"><a href="http://www.ncbi.nlm.nih.gov/pubmed/29600570">Medical
                                                            communication: the views of simulated patients.</a></li>
</ul>
<p class="" id="fee6987d-901b-42e6-b65b-2b371ea5228b">Behavioral science
                                                </p>
<p class="" id="20073de1-08ff-4f4b-8ebf-46da88dcce8b">Subject</p>
<p class="" id="605cb435-4a97-4754-bf59-c98cd4fd3edb">Social Sciences
                                                    (Ethics/Legal/Professional)</p>
<p class="" id="b080f283-68e8-4040-b2f6-8dbe44b5048a">System</p>
<p class="" id="0e33f109-cb05-4d5c-b2ac-20639f207f6a">Physician patient
                                                    communication</p>
<p class="" id="9e760d4e-409f-4778-a627-b0364d74b442">Topic</p>
<p class="" id="f6f5cee0-89c6-4e53-81e5-640bc2d41e93">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
