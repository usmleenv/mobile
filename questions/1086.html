
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>1086</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="8bb48d1b-3332-4cf4-9c9c-14f96f700bb5">A 42-year-old previously
                                        healthy woman comes to the office due to fever and sore throat.  She has no
                                        cough.  Physical examination shows tonsillar exudate and a nontender cervical
                                        lymph node that measures 3.5 cm in diameter.  Oral antibiotic therapy is started
                                        and on a follow-up visit a week later, the patient reports that her symptoms
                                        have resolved.  The previously enlarged cervical lymph node has decreased
                                        slightly in size.  On several follow-up visits over the following year, the
                                        patient remains asymptomatic and the size of the lymph node fluctuates but does
                                        not disappear completely.  Referral to a surgeon is made and excisional biopsy
                                        of the lymph node is performed.  Which of the following is the most likely
                                        diagnosis?</p>
<table class="simple-table" id="2fd079e0-8d67-45d4-b82a-1c6d48c72678">
<tbody>
<tr id="e5cd761b-72cf-4bc5-b615-8a6480e4ca37">
<td class="" id="W?UN">A.</td>
<td class="" id="qaoO">Acute lymphoblastic leukemia</td>
<td class="" id="sZKG"></td>
</tr>
<tr id="1f5cf80a-4149-426d-96ba-bd28827932ee">
<td class="" id="W?UN">B.</td>
<td class="" id="qaoO">Burkitt lymphoma</td>
<td class="" id="sZKG"></td>
</tr>
<tr id="6fd88c30-3005-48ca-a258-4c32443e7677">
<td class="" id="W?UN">C.</td>
<td class="" id="qaoO">Diffuse large B-cell lymphoma</td>
<td class="" id="sZKG"></td>
</tr>
<tr id="0d7241bc-4797-467f-a06f-fbed4e99cfc4">
<td class="" id="W?UN">D.</td>
<td class="" id="qaoO">Follicular lymphoma</td>
<td class="" id="sZKG"></td>
</tr>
<tr id="c68461f2-016e-4c63-b3fe-63fbf53bca02">
<td class="" id="W?UN">E.</td>
<td class="" id="qaoO">Hairy cell leukemia</td>
<td class="" id="sZKG"></td>
</tr>
<tr id="2fdbcd12-93d9-4b3c-ba13-f6f906ef0f80">
<td class="" id="W?UN">F.</td>
<td class="" id="qaoO">Mycosis fungoides</td>
<td class="" id="sZKG"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="e7fcc11b-9d10-429e-b208-ea25af4c3679">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="89f9495c-dddb-4dd9-a7ff-2dc997960da6">
<tbody>
<tr id="5097689e-23e2-47d4-b264-ecc281eb5b0d">
<td class="" id="TUy@">A.</td>
<td class="" id="Q:;u">Acute lymphoblastic leukemia (1%)
                                                            </td>
<td class="" id="ALE["></td>
</tr>
<tr id="f86b5d4f-4a5c-41f8-ade9-59b0ab5c88ea">
<td class="" id="TUy@">B.</td>
<td class="" id="Q:;u">Burkitt lymphoma (17%)</td>
<td class="" id="ALE["></td>
</tr>
<tr id="b6756e04-791d-431b-9385-4fd0a330d642">
<td class="" id="TUy@">C.</td>
<td class="" id="Q:;u">Diffuse large B-cell lymphoma (13%)
                                                            </td>
<td class="" id="ALE["></td>
</tr>
<tr id="5ec92812-1ef1-4bea-8aa5-dab232bc43ca">
<td class="" id="TUy@">D.</td>
<td class="" id="Q:;u">Follicular lymphoma (56%)</td>
<td class="" id="ALE["></td>
</tr>
<tr id="ff04e8a7-0d28-4c71-85c6-3598b184ad87">
<td class="" id="TUy@">E.</td>
<td class="" id="Q:;u">Hairy cell leukemia (2%)</td>
<td class="" id="ALE["></td>
</tr>
<tr id="137b4a77-31aa-47d7-a1c6-25f5e320b634">
<td class="" id="TUy@">F.</td>
<td class="" id="Q:;u">Mycosis fungoides (7%)</td>
<td class="" id="ALE["></td>
</tr>
</tbody>
</table>
<p class="" id="c9b21978-000c-41fb-8d9b-815a245f5ea5">Incorrect</p>
<p class="" id="9bf49144-bc55-45ea-a2a6-42978053be0c">Correct answer D
                                                </p>
<p class="" id="b78360e4-8a93-43a8-b45e-201415e3289c">56%Answered
                                                    correctly</p>
<p class="" id="a92ec355-89b3-48a8-b69d-12cdc4c0fe1b">26 secsTime Spent
                                                </p>
<p class="" id="1c35bc5b-a4f9-41c0-98aa-9ff34c55d594">2024Version</p>
<ul class="bulleted-list" id="3d7fcf0d-2bac-4ab2-a5bb-13aa79500000">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="1d21a9aa-2a8f-4f28-8147-3dab936dc9ae">
<li style="list-style-type:disc"></li>
</ul>
<p class="" id="5498c6d1-86f9-41ac-abeb-8eef98fc6163">This patient with
                                                    persistent fluctuating lymphadenopathy, who may have had an
                                                    unrelated pharyngitis (treated with antibiotics) on initial
                                                    presentation, most likely has follicular lymphoma.  Follicular
                                                    lymphoma is the most common indolent non-Hodgkin lymphoma (NHL) in
                                                    adults and the second most common NHL overall (after diffuse Large B
                                                    cell lymphoma).  It derives from germinal center B cells and
                                                    typically has a long, waxing and waning clinical course.</p>
<p class="" id="e52428b4-7681-43f5-a502-7647037f06cd">The condition most
                                                    often presents in middle-aged patients with painless lymph node
                                                    enlargement or abdominal discomfort from an abdominal mass. 
                                                    Histology is notable for a nodular pattern, and the neoplastic
                                                    follicles are composed of a mixture of centrocytes (cleaved cells)
                                                    and centroblasts (noncleaved cells).  The majority of tumors exhibit
                                                    a t(14;18) translocation, resulting in overexpression of the
                                                    <em>BCL2</em> oncogene that blocks programmed cell death.</p>
<p class="" id="fe87c8f3-094c-4045-9e92-2f2e4bd96bae">(Choice A)  Acute
                                                    lymphoblastic leukemia/lymphoma is the most common malignancy in
                                                    children.  It presents with lymphadenopathy, hepatosplenomegaly,
                                                    fever, bleeding, and bone pain.  Neoplastic cells are pre-B or pre-T
                                                    cells (lymphoblasts).</p>
<p class="" id="f5234b87-48e8-4952-b0f0-ca483f4e482c">(Choice B) 
                                                    Burkitt lymphoma is a highly aggressive (but generally
                                                    chemotherapy-responsive) B-cell NHL associated with chronic
                                                    Epstein-Barr virus infection and/or deregulation of the <em>MYC</em>
                                                    proto-oncogene.  Patients typically develop rapidly growing tumor
                                                    masses in the facial bones, jaw, or abdomen.  Tumor doubling time is
                                                    very rapid and spontaneous tumor lysis can occur.</p>
<p class="" id="5c44168e-cb2b-4091-b2cc-fd7adda69ee3">(Choice C) 
                                                    Diffuse large B-cell lymphoma typically presents with a rapidly
                                                    enlarging nodal (neck, abdomen, mediastinum) or extranodal
                                                    symptomatic mass.  The Waldeyer's ring (oropharyngeal lymphoid
                                                    tissue) and gastrointestinal tract are commonly involved, and
                                                    systemic "B" symptoms (fever, weight loss, drenching night
                                                    sweats) can also be seen.</p>
<p class="" id="9ed9f6ca-dd4d-48c7-b484-f7e19b1b5b73">(Choice E)  Hairy
                                                    cell leukemia, a mature B-cell neoplasm, presents with splenomegaly
                                                    and pancytopenia most often in older men.  Lymph node enlargement is
                                                    not characteristic.  Leukemic cells have hairlike cytoplasmic
                                                    projections and are positive for tartrate-resistant acid phosphatase
                                                    (TRAP).</p>
<p class="" id="788287b8-674d-4f34-a4d5-975b8550f10d">(Choice F) 
                                                    Mycosis fungoides is a cutaneous T-cell lymphoma.  Proliferating
                                                    CD4+ atypical lymphocytes infiltrate the dermis and epidermis, where
                                                    they form Pautrier microabscesses.  This condition manifests with
                                                    plaques (often on trunk or buttocks) that may be confused with
                                                    eczema or psoriasis.  Generalized erythema and scaling and
                                                    thickening of the skin (erythroderma) may result.</p>
<p class="" id="90e006f6-f314-48e9-99eb-847d6942252e">Educational
                                                    objective:</p>
<p class="" id="dc574557-c949-49f0-8b20-90507cf5a65b">Follicular
                                                    lymphoma is the most common indolent non-Hodgkin lymphoma in
                                                    adults.  It is of B-cell origin and presents with painless waxing
                                                    and waning (ie, fluctuating) lymphadenopathy.  The cytogenetic
                                                    change t(14;18) is characteristic and results in overexpression of
                                                    the <em>BCL2</em> oncogene.</p>
<p class="" id="1623c2dd-d386-4ed3-8ea7-d6901f159b8e">References</p>
<ul class="bulleted-list" id="9a174274-0cd7-4624-90b6-ca92b3db5b46">
<li style="list-style-type:disc"><a href="http://www.ncbi.nlm.nih.gov/pubmed/24687887">Follicular
                                                            lymphoma: 2014 update on diagnosis and management.</a></li>
</ul>
<p class="" id="0caa1e66-69b5-4136-8ddc-320327f425a8">Pathology</p>
<p class="" id="f22c6bc5-d715-4a3b-bd9a-3d73e55e0330">Subject</p>
<p class="" id="9a6d53ec-c5b9-4b6a-8f7c-4a8094625071">Hematology &amp;
                                                    Oncology</p>
<p class="" id="5c01f5fc-8b83-4182-8d9c-818d728f1766">System</p>
<p class="" id="9e16eb68-50ee-43ed-a138-dc00c3910c58">Nonhodgkin
                                                    lymphoma</p>
<p class="" id="c0d74b2d-6687-43bf-8b52-cd4e3c8986d0">Topic</p>
<p class="" id="c1ca49d9-a50e-4850-8c67-c426bdeaa81f">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="874bc1f0-6b93-47e2-b98d-f9e31a7c467c">My Notebook</p>
<p class="" id="b8e6be42-785e-463d-86c6-1e3f589f2554">0</p>
<p class="" id="c160198f-642c-47a0-be75-f9d07f76000d">Flashcards</p>
<p class="" id="1b16bb12-6d83-4571-b2d4-32e1ff064959">Feedback</p>
<p class="" id="20851bc8-5612-4eb6-bf0a-35b8b770fe87">Suspend</p>
<p class="" id="2c768f13-7a21-4b5a-841c-d270bbb1cca2">End Block</p>
<p class="" id="f8843932-d91b-47f1-ad6f-9b97923f8496">‚ú®Done</p>
<p class="" id="1c4a2575-2c00-4c06-b3cb-3a61aa10e6fb">Exhibit Display
                                                </p>
<figure class="image" id="6a840787-402e-4d58-8591-6d2f2ad0d708"><a href="https://lh7-us.googleusercontent.com/0zQ9VzXYwwaDPgsBPhUOnRComOSjY300-VD-dLLimuJ96qSjc_YiJemRbOJZTtmOdM_sctXmaWXLnKoXkNGH46oPIF_llD9nmKxccmHH2s29Siu-gQ2mm4o7_Zy61GDQrFLqFRGXN1spFK7KeH2eU14"><img loading="lazy" src="https://lh7-us.googleusercontent.com/0zQ9VzXYwwaDPgsBPhUOnRComOSjY300-VD-dLLimuJ96qSjc_YiJemRbOJZTtmOdM_sctXmaWXLnKoXkNGH46oPIF_llD9nmKxccmHH2s29Siu-gQ2mm4o7_Zy61GDQrFLqFRGXN1spFK7KeH2eU14" style="width:602px"/></a>
</figure>
<p class="" id="26215be3-5cd2-4dd8-acea-97022047d0cf">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="f8dddf1f-cb5c-4bde-ba5c-99f30ffcd4e0">ExistingMy
                                                    Notebook</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
