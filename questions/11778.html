
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>11778</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="72df580e-90ff-4494-9108-635df7c2abb1">A 15-year-old boy comes to the
                                        office due to right arm numbness.  He plays on his high school baseball team and
                                        has been intensively practicing his pitching for an upcoming game.  For the past
                                        several weeks, the patient has had fluctuating tingling and numbness involving
                                        the right shoulder, arm, and hand.  He also has recently developed dull pain in
                                        the right little finger and hand.  The symptoms worsen with overhead activities
                                        and when throwing a baseball.  The patient has no medical problems other than
                                        being told that he has an extra rib.  On examination, there is right-sided
                                        weakness of the intrinsic hand muscles.  Which of the following muscles is most
                                        likely contributing to this patient's condition?</p>
<table class="simple-table" id="3b4d2fab-bfd4-493e-b98e-d778f98841dd">
<tbody>
<tr id="99e4698e-32fd-4757-9e6a-681f90c12235">
<td class="" id="_hY?">A.</td>
<td class="" id="JtGh">Coracobrachialis muscle</td>
<td class="" id="_R]^"></td>
</tr>
<tr id="7cfc80bc-d7dd-447b-8ca5-b245318ba0a3">
<td class="" id="_hY?">B.</td>
<td class="" id="JtGh">Scalene muscles</td>
<td class="" id="_R]^"></td>
</tr>
<tr id="eabe2fa0-6e4b-47ac-a0ff-957393338c1d">
<td class="" id="_hY?">C.</td>
<td class="" id="JtGh">Subscapularis muscle</td>
<td class="" id="_R]^"></td>
</tr>
<tr id="df667d6a-3dea-4515-bc14-413dc32a4e4b">
<td class="" id="_hY?">D.</td>
<td class="" id="JtGh">Teres major muscle</td>
<td class="" id="_R]^"></td>
</tr>
<tr id="9819781e-5a9f-402f-9607-016c6df6650b">
<td class="" id="_hY?">E.</td>
<td class="" id="JtGh">Triceps brachii</td>
<td class="" id="_R]^"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="50f83353-22d0-4939-9585-71261cbfc844">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="09729551-bccf-4d79-8c94-a9446d46185e">
<tbody>
<tr id="5513d724-5efd-4c5b-9ffd-f5185c87c5a3">
<td class="" id="vhG|">A.</td>
<td class="" id="NOM?">Coracobrachialis muscle (13%)</td>
<td class="" id=":@Vg"></td>
</tr>
<tr id="96bab600-0569-410a-a8b8-6fe6da32a2ba">
<td class="" id="vhG|">B.</td>
<td class="" id="NOM?">Scalene muscles (53%)</td>
<td class="" id=":@Vg"></td>
</tr>
<tr id="69001c59-744d-4f42-b813-4e84a6e28a08">
<td class="" id="vhG|">C.</td>
<td class="" id="NOM?">Subscapularis muscle (19%)</td>
<td class="" id=":@Vg"></td>
</tr>
<tr id="b0328ce0-e3f9-4efc-b3e4-e0383ac6b13c">
<td class="" id="vhG|">D.</td>
<td class="" id="NOM?">Teres major muscle (6%)</td>
<td class="" id=":@Vg"></td>
</tr>
<tr id="4ce535f8-b3c9-4152-b753-56b011f5ca77">
<td class="" id="vhG|">E.</td>
<td class="" id="NOM?">Triceps brachii (7%)</td>
<td class="" id=":@Vg"></td>
</tr>
</tbody>
</table>
<p class="" id="45d7be62-bc4d-4824-9646-43b85310c6bd">Incorrect</p>
<p class="" id="f4978199-6e18-4281-9481-f13389114e5f">Correct answer B
                                                </p>
<p class="" id="749121bd-30fa-4923-97c0-c1aa111ff3a8">53%Answered
                                                    correctly</p>
<p class="" id="834c06f9-bf77-4397-ae3e-608a4c33bc3e">15 secsTime Spent
                                                </p>
<p class="" id="226347f6-9e77-44b3-9d52-449388c66de4">2024Version</p>
<ul class="bulleted-list" id="0cb1352d-411c-4149-9545-39cc490f997d">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="e15ca2e6-3d7a-43ad-b973-48f479c198db">
<li style="list-style-type:disc"></li>
</ul>
<figure class="image" id="b1a859c9-9df7-41cc-a326-324f39ce83e4"><a href="https://lh7-us.googleusercontent.com/lHz4lzAUPVgk9cQBp8fVKAFZSmOzwadB94UgCbFADfNIItHqLnmmKAgUHPo9SsgudoOhuK2O1I_PP2779ApbwzbRMGLwsWCnOejA84W3ja3wI0AMHHCjQ4GgDMfMWu0gAJ7f0ohP7MhK8wqtsdz5tv8"><img loading="lazy" src="https://lh7-us.googleusercontent.com/lHz4lzAUPVgk9cQBp8fVKAFZSmOzwadB94UgCbFADfNIItHqLnmmKAgUHPo9SsgudoOhuK2O1I_PP2779ApbwzbRMGLwsWCnOejA84W3ja3wI0AMHHCjQ4GgDMfMWu0gAJ7f0ohP7MhK8wqtsdz5tv8" style="width:602px"/></a>
</figure>
<p class="" id="7d53d6c6-48ee-4d27-99fc-83bdf7981e84">This
                                                    patient's upper extremity neurologic symptoms in the setting of
                                                    an extra rib are highly suggestive of thoracic outlet syndrome
                                                    (TOS).  The thoracic outlet refers to the region above the first rib
                                                    and behind the clavicle that is bordered by the cervical vertebral
                                                    bones and the sternum.  Compression of the brachial plexus as it
                                                    passes through the thoracic outlet can cause upper extremity
                                                    numbness, tingling, and weakness (most often in an ulnar
                                                    distribution due to compression of the lower trunk).  Involvement of
                                                    the subclavian vein and artery can also occur and lead to upper
                                                    extremity swelling and exertional arm pain.</p>
<p class="" id="003e3091-c435-4072-95d1-e6f324d9848a">TOS most commonly
                                                    occurs due to compression of the brachial plexus within the scalene
                                                    triangle, which is formed by the anterior and middle scalene muscles
                                                    and the first rib.  The anterior scalene muscle originates from the
                                                    C3-C6 transverse processes and attaches to the scalene tubercle of
                                                    the first rib.  The middle scalene originates from the C2-C7
                                                    transverse processes and inserts into the posterior portion of the
                                                    first rib.  The brachial plexus trunks and subclavian artery pass
                                                    between the anterior and middle scalenes; the subclavian vein runs
                                                    anterior to the anterior scalene.</p>
<p class="" id="5122a56e-9bca-4a06-b284-8928aa1c94c5">The presence of an
                                                    anomalous cervical rib or scalene muscular anomalies can predispose
                                                    to TOS.  Affected patients typically have a history of trauma or
                                                    repetitive overhead arm movements (eg, swimming, stacking boxes).
                                                </p>
<p class="" id="10103435-18b0-4ddd-99b8-5a1fb2f1fe8b">(Choice A)  The
                                                    coracobrachialis originates from the coracoid process of the scapula
                                                    and acts to flex the arm at the glenohumeral joint.  The
                                                    musculocutaneous nerve pierces the muscle near its insertion into
                                                    the humerus; overuse of the coracobrachialis (eg, excessive bench
                                                    pressing) can cause entrapment of the musculocutaneous nerve,
                                                    causing impaired elbow flexion and lateral forearm sensory loss.</p>
<p class="" id="99d9502a-becd-40f5-837c-a6493739f23e">(Choice C)  The
                                                    subscapularis muscle originates in the subscapular fossa of the
                                                    scapula and inserts into the lesser tubercle of the humerus.  It
                                                    acts to adduct and internally rotate the humerus.</p>
<p class="" id="eb35e8dd-13e7-4273-971c-437f53242b84">(Choices D and E) 
                                                    The teres major muscle and long head of the triceps brachii form the
                                                    inferior and medial borders of the quadrangular space through which
                                                    the axillary nerve passes.  Entrapment of the axillary nerve within
                                                    the quadrangular space can cause sensory loss over the lateral
                                                    shoulder and impair shoulder abduction.</p>
<p class="" id="4f3ce708-d7f8-42d3-9b31-8683231b20f6">Educational
                                                    objective:</p>
<p class="" id="82ca7926-2973-447c-88c5-50bc77844a6c">Thoracic outlet
                                                    syndrome (TOS) is most often caused by compression of the brachial
                                                    plexus as it passes through the scalene triangle, the space bordered
                                                    by the anterior and middle scalene muscles and the first rib. 
                                                    Symptoms typically include upper extremity numbness, tingling, and
                                                    weakness that worsen with repetitive overhead arm movements.  The
                                                    presence of an anomalous cervical rib is a risk factor for TOS.</p>
<p class="" id="024e7cd9-7848-4e18-9829-6cf5aaeba0e7">References</p>
<ul class="bulleted-list" id="951db2be-23c9-4c8f-87df-163a6ca9a7b4">
<li style="list-style-type:disc"><a href="http://www.ncbi.nlm.nih.gov/pubmed/25140278">Understanding
                                                            thoracic outlet syndrome.</a></li>
</ul>
<p class="" id="dfc3e44e-eb4e-4993-bf4c-014910c609e9">Anatomy</p>
<p class="" id="ff3fcffe-c1cf-4854-bdb1-4e80815a9d3c">Subject</p>
<p class="" id="34dd8fea-4eb5-4331-9396-574ac93c3192">
                                                    Rheumatology/Orthopedics &amp; Sports</p>
<p class="" id="5c4a843d-4610-41b8-b186-a90508940750">System</p>
<p class="" id="2c356f57-0f03-448d-9a7e-6bd0f6ccb086">Thoracic outlet
                                                    syndrome</p>
<p class="" id="6bb83b64-0300-495d-b145-07e3a48ef8bc">Topic</p>
<p class="" id="79cda4c0-da33-4b78-b8a0-ff53c60e38e6">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="e102c982-b984-411a-b972-5e745077ad7b">My Notebook</p>
<p class="" id="74a8ae56-200a-4d96-a48c-d84cbde578f3">0</p>
<p class="" id="0a749618-71d1-48ca-aaaa-4076ea05d1c3">Flashcards</p>
<p class="" id="cff8822d-b8b8-4678-9e65-8f707999eb57">Feedback</p>
<p class="" id="7e7c8e28-731d-4f40-9a61-733a2a9708fb">Suspend</p>
<p class="" id="c6e6c1e8-3ac5-4f07-a0ed-7e4a618cbb23">End Block</p>
<p class="" id="ed66ccd6-2611-4cad-a6b1-2f2df7aa04ca">‚ú®Done</p>
<p class="" id="bb3d6880-b46f-48ae-8f59-fd8d2b5e8730">Exhibit Display
                                                </p>
<figure class="image" id="ae434f17-3bad-48fd-95cf-7fea0de635c4"><a href="https://lh7-us.googleusercontent.com/C7YMkfVWekdiH8ZiryYTjvuiC5rNKc4VuzZqOZnin-kRpgAu1wLkDGT8S7GxzIqfSyQwzxJdmz-fcXXNrK0lqwBmVosSAZIGjIs2tYiWVM5Y7OBCgNjJgqdv5OTQB_Hcjas63mVmNig5i4kjvydGQk8"><img loading="lazy" src="https://lh7-us.googleusercontent.com/C7YMkfVWekdiH8ZiryYTjvuiC5rNKc4VuzZqOZnin-kRpgAu1wLkDGT8S7GxzIqfSyQwzxJdmz-fcXXNrK0lqwBmVosSAZIGjIs2tYiWVM5Y7OBCgNjJgqdv5OTQB_Hcjas63mVmNig5i4kjvydGQk8" style="width:519px"/></a>
</figure>
<p class="" id="015e31be-e6a0-4ac7-8ee9-58b0bc09c0d9">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="23421a19-d522-4b6a-978e-52a49d8177c4">ExistingMy
                                                    Notebook</p>
<p class="" id="7af032fc-e0dc-4ed9-b425-88a62b4ebf19">Exhibit Display
                                                </p>
<figure class="image" id="0e701728-0691-4fdd-b9d6-7ce13f7bca3a"><a href="https://lh7-us.googleusercontent.com/6sY4-Uf5aw5IsqHyox-A52V70VMnEDXLu_-zhNYrumVwy-d64yNCmIQdOhSfTaA9zyQl3MWIwvL2dxDBPgr8sWvekfD73yDrceq7_AIIxHvI6ECSR_OYdb4SFJzDqVO7r2HpfJzrUyejo4TZvpOiSdY"><img loading="lazy" src="https://lh7-us.googleusercontent.com/6sY4-Uf5aw5IsqHyox-A52V70VMnEDXLu_-zhNYrumVwy-d64yNCmIQdOhSfTaA9zyQl3MWIwvL2dxDBPgr8sWvekfD73yDrceq7_AIIxHvI6ECSR_OYdb4SFJzDqVO7r2HpfJzrUyejo4TZvpOiSdY" style="width:566px"/></a>
</figure>
<p class="" id="21d8059f-cd5f-4be6-a0b8-ff41c4172454">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="85de0b8f-90b7-493c-9e18-1e35f04d1eb7">ExistingMy
                                                    Notebook</p>
<p class="" id="619ec304-5706-425f-b71d-d9410a8962d1">Exhibit Display
                                                </p>
<figure class="image" id="fa6865e9-f0a4-4638-a308-eec6057265c7"><a href="https://lh7-us.googleusercontent.com/tCONnmv4aPevHGIWUXnd1KXtz6EMKcky49WAu0Zbh3l7vDNTfmuD-EQW8H6sH7uIwmDTDq-xd_hllL19za-Z1REuYprtrjUnQwSoXPDOvmynVRJiakTZlSbPyJaQSoj2MQRNcJt3Zrr3a6T3t6_RIAU"><img loading="lazy" src="https://lh7-us.googleusercontent.com/tCONnmv4aPevHGIWUXnd1KXtz6EMKcky49WAu0Zbh3l7vDNTfmuD-EQW8H6sH7uIwmDTDq-xd_hllL19za-Z1REuYprtrjUnQwSoXPDOvmynVRJiakTZlSbPyJaQSoj2MQRNcJt3Zrr3a6T3t6_RIAU" style="width:602px"/></a>
</figure>
<p class="" id="b4370fdb-1ea9-45e5-b17c-1b80006b9e7a">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="c30779c6-a2e9-46f0-90f0-2a054b05643a">ExistingMy
                                                    Notebook</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
