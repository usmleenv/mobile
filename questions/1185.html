
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>1185</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="4da3334f-f4f9-49f9-ba83-b12d40d34e16">A 45-year-old man comes to the
                                        office for a routine visit.  The patient has a first-degree relative with
                                        Alzheimer dementia and is concerned about his chances of developing the
                                        disease.  He has read in the newspaper that decreased consumption of yellow and
                                        orange fruits and vegetables has been associated with Alzheimer disease and
                                        would like to know how likely he is to develop the disease.  A medical
                                        literature review uncovers a recent cohort study that evaluated the association
                                        between blood carotene concentration and Alzheimer disease.  The development of
                                        the disease was evaluated in a 20-year follow-up study of 200 middle-aged
                                        subjects who have a first-degree relative with Alzheimer disease.  The results
                                        are as follows:</p>
<table class="simple-table" id="63fa7ae8-9c12-45ba-8c17-6360b5939278">
<tbody>
<tr id="d4acad0c-2ad9-4fdd-b5a0-1f3ffd21a251">
<td class="" id="sEU["></td>
<td class="" id="tm&gt;s">Low<br/>carotene level<br/></td>
<td class="" id="l}t|">Normal<br/>carotene level<br/></td>
<td class="" id="\hTu">Total</td>
</tr>
<tr id="e10d0f51-640f-48fe-b505-6ea2d0c4680d">
<td class="" id="sEU[">Developed Alzheimer disease</td>
<td class="" id="tm&gt;s">18</td>
<td class="" id="l}t|">42</td>
<td class="" id="\hTu">60</td>
</tr>
<tr id="a6024914-18fd-4ecc-b09f-2a9505918004">
<td class="" id="sEU[">Did not develop Alzheimer disease</td>
<td class="" id="tm&gt;s">27</td>
<td class="" id="l}t|">113</td>
<td class="" id="\hTu">140</td>
</tr>
<tr id="425cc04b-6388-4f8d-88b2-81b347e94ebe">
<td class="" id="sEU[">Total</td>
<td class="" id="tm&gt;s">45</td>
<td class="" id="l}t|">155</td>
<td class="" id="\hTu">200</td>
</tr>
</tbody>
</table>
<p class="" id="d7c4b732-9f3b-4a7c-af4c-d9f30a93d968">Assuming the patient has low
                                        carotene levels, what is his 20-year risk of developing Alzheimer disease?</p>
<table class="simple-table" id="19c3f6b2-6b40-4f3d-b75b-c3df7bd2b62b">
<tbody>
<tr id="17d9bdb7-640c-43e9-b79b-124a3bce97f2">
<td class="" id="Kl`D">A.</td>
<td class="" id="^GQp">0.19</td>
<td class="" id="VIX^"></td>
</tr>
<tr id="52df4ade-a734-4af8-96b2-2e6fd736f5da">
<td class="" id="Kl`D">B.</td>
<td class="" id="^GQp">0.23</td>
<td class="" id="VIX^"></td>
</tr>
<tr id="d9fedca6-1f75-4fb2-acd2-9b5b65cb3087">
<td class="" id="Kl`D">C.</td>
<td class="" id="^GQp">0.27</td>
<td class="" id="VIX^"></td>
</tr>
<tr id="77158194-f68b-47f3-80c6-628bdda9ab4f">
<td class="" id="Kl`D">D.</td>
<td class="" id="^GQp">0.30</td>
<td class="" id="VIX^"></td>
</tr>
<tr id="40575ca2-8b8e-4bc0-84db-28feab51ec06">
<td class="" id="Kl`D">E.</td>
<td class="" id="^GQp">0.40</td>
<td class="" id="VIX^"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="e0b74771-2a17-49e2-9413-86708f203e34">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="7bbb4fe5-ee50-48e1-ab69-62877d908a4d">
<tbody>
<tr id="c18381db-dadb-4c74-9b2c-8e4bcb9bdc7e">
<td class="" id="\pA@">A.</td>
<td class="" id="qSMl">0.19 (4%)</td>
<td class="" id="}^=?"></td>
</tr>
<tr id="a22b5a1e-0d73-4fab-a0dc-b92a6782bbff">
<td class="" id="\pA@">B.</td>
<td class="" id="qSMl">0.23 (4%)</td>
<td class="" id="}^=?"></td>
</tr>
<tr id="f12e8324-d6f7-4a76-84e4-27f3fa8f619e">
<td class="" id="\pA@">C.</td>
<td class="" id="qSMl">0.27 (5%)</td>
<td class="" id="}^=?"></td>
</tr>
<tr id="024980b4-c5de-49a1-80b2-1c22cd768198">
<td class="" id="\pA@">D.</td>
<td class="" id="qSMl">0.30 (18%)</td>
<td class="" id="}^=?"></td>
</tr>
<tr id="ea0a2a3a-711c-4d4a-b38e-e2270b535d70">
<td class="" id="\pA@">E.</td>
<td class="" id="qSMl">0.40 (67%)</td>
<td class="" id="}^=?"></td>
</tr>
</tbody>
</table>
<p class="" id="69c052ed-656c-49a7-9ccb-c57b4b23f84c">Omitted</p>
<p class="" id="c64b5485-458f-434d-8199-badc8552765a">Correct answer E
                                                </p>
<p class="" id="d11390db-385d-472c-b431-74b1c941aff6">67%Answered
                                                    correctly</p>
<p class="" id="7f755792-6349-47a8-8196-9896f525d177">0 secsTime Spent
                                                </p>
<p class="" id="2e435138-b4a5-4a72-8519-141732c491a6">2024Version</p>
<ul class="bulleted-list" id="95c93ae2-b680-4316-8627-b26b11c613e0">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="45acd567-d5b5-441f-84dd-9003ff47cf6e">
<li style="list-style-type:disc"></li>
</ul>
<p class="" id="3542a9d6-5b1e-4264-8dd9-63538aca79a4">Risk is the
                                                    probability of developing a disease or other health outcome over the
                                                    study period.  In this example, it represents the probability of
                                                    developing Alzheimer disease over a 20-year period among middle-aged
                                                    subjects who have a first-degree relative with the disease.  To
                                                    calculate this probability in subjects with low carotene levels,
                                                    divide the number of subjects who develop Alzheimer disease in the
                                                    low carotene group (18) by the overall number of subjects in the low
                                                    carotene group (18 + 27 = 45).</p>
<p class="" id="23d137c1-b54d-4b84-8e8c-b6d3249d8277">Risk of developing
                                                    Alzheimer disease among subjects with low carotene = 18 / (18 + 27)
                                                </p>
<p class="" id="f6bdb019-b563-44cc-94b0-2a76193bb7f3">= 18 / 45 = 0.40
                                                </p>
<p class="" id="d151a1ae-7f8e-4417-90d0-911f4983e0c7">This means that,
                                                    among subjects with low carotene levels, there is a 40% probability
                                                    of developing Alzheimer disease in 20 years.</p>
<p class="" id="c6ee2a8a-044b-42c0-b7c2-a489db685ae7">Note that this is
                                                    different from the relative risk (RR) of Alzheimer disease in
                                                    subjects with low carotene levels compared to those with normal
                                                    carotene groups:</p>
<p class="" id="6a7e02fd-2cc7-4d24-b323-7bb412168781">RR = risk of
                                                    developing Alzheimer disease among subjects with low carotene levels
                                                    / risk of developing Alzheimer disease among subjects with normal
                                                    carotene levels = 0.4 / [42 / (42 + 113)]  = 0.4 / 0.27 = 1.48</p>
<p class="" id="1e1baae9-d15a-4c59-82e2-fdf09a18a134">As the data is not
                                                    presented in the standard 2 √ó 2 (contingency) table format, care
                                                    must be taken to perform the calculations without relying on
                                                    memorized formulas.</p>
<p class="" id="f94d5b79-dc77-47a6-9f46-c12b4dcb9a2e">(Choices A and D) 
                                                    The prevalence of low carotene (exposure) among subjects who do not
                                                    develop Alzheimer disease is 27 / (27 + 113) = 27 / 140 = 0.19
                                                    (19%).  The prevalence of low carotene (exposure) among subjects who
                                                    develop Alzheimer disease is 18 / (18 + 42) = 18 / 60 = 0.3 (30%).
                                                </p>
<p class="" id="264455de-7020-47d7-88f5-34e6d281324d">(Choice B)  The
                                                    prevalence of low carotene in the entire cohort is (18 + 27) / (18 +
                                                    42 + 27 + 113) = 45 / 200 = 0.23 (23%).</p>
<p class="" id="f718400c-0546-4a3f-9733-de50dc8d11f7">(Choice C)  As
                                                    noted in the RR calculation above, the 20-year risk of developing
                                                    Alzheimer disease among subjects with normal carotene levels is 42 /
                                                    (42 + 113) = 42 / 155 = 0.27 (27%).</p>
<p class="" id="3c5ac15f-03c6-4ebb-965e-0075ba93de3c">Educational
                                                    objective:</p>
<p class="" id="d7d6a94c-1349-4b62-8abb-a6ace4eaefd9">Risk is the
                                                    probability of developing a disease over a certain period of time. 
                                                    To calculate this probability, divide the number of affected
                                                    subjects by the total number of subjects in the corresponding
                                                    exposure group.</p>
<p class="" id="56ca91c1-5963-48a2-8fb1-bb5abb7488db">Biostatistics</p>
<p class="" id="d1e054dd-b2bf-42ca-a9cc-c40de43a719e">Subject</p>
<p class="" id="f953519f-295b-40df-a7d6-b84cc3293fd6">Biostatistics
                                                    &amp; Epidemiology</p>
<p class="" id="07c956d7-dcd3-499d-92d7-0c22955d1930">System</p>
<p class="" id="349dbe8f-5009-4ecf-850f-41fb19f0b9fe">Risk</p>
<p class="" id="00881677-90ca-45b7-a484-11a89466a2be">Topic</p>
<p class="" id="5057b925-22d3-484a-a1ba-68215b491459">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="26185343-2fb9-4723-8d38-825c29266c59">REVIEW</p>
<p class="" id="9dd9f1d7-e9b4-4e68-b95f-9774a47dba43">‚ú®Done</p>
<p class="" id="64c73b86-9834-4823-bf7c-e66a0a1c2f3d">Exhibit Display
                                                </p>
<table class="simple-table" id="96ac806b-77e3-4147-b6a3-fb75bc86c456">
<tbody>
<tr id="2d287672-fc3a-4e00-a51b-e591bdb0d129">
<td class="" id="dMoH"></td>
<td class="" id="o[v`">Outcome/disease<br/>present<br/>
</td>
<td class="" id="GRlt">Outcome/disease<br/>absent<br/>
</td>
<td class="" id="AzRH"></td>
</tr>
<tr id="3459b68f-59d0-4156-8fda-ad455f27a78e">
<td class="" id="dMoH">Exposure/risk
                                                                factor<br/>present<br/></td>
<td class="" id="o[v`">a</td>
<td class="" id="GRlt">b</td>
<td class="" id="AzRH">a + b</td>
</tr>
<tr id="b8512e66-df0c-4ad4-a642-2c02362d9f82">
<td class="" id="dMoH">Exposure/risk
                                                                factor<br/>absent<br/></td>
<td class="" id="o[v`">c</td>
<td class="" id="GRlt">d</td>
<td class="" id="AzRH">c + d</td>
</tr>
<tr id="7deecec8-40c4-48ec-aede-7cadce1e6882">
<td class="" id="dMoH"></td>
<td class="" id="o[v`">a + c</td>
<td class="" id="GRlt">b + d</td>
<td class="" id="AzRH"></td>
</tr>
</tbody>
</table>
<p class="" id="32dac6e8-ef9d-4e50-af5a-6d5705dacaee">New</p>
<p class="" id="bd475b30-8b07-43c0-bb6f-a5addec4610e">ExistingMy
                                                    Notebook</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
