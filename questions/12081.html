
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>12081</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="6258981c-df2b-4048-905c-8b0a3d77c82f">A 46-year-old woman is
                                        admitted to the hospital with dehydration secondary to excess output from an
                                        ileostomy.  Five years ago, the patient had a total colectomy with a diverting
                                        ileostomy for colon cancer.  For the last 6 months, she has had increased output
                                        from the ileostomy and has been admitted to the hospital twice with similar
                                        episodes of dehydration.  On the second day of admission, she reports right
                                        flank pain.  X-ray of the abdomen reveals a nonspecific bowel gas pattern with
                                        no evidence of renal calculi.  Ultrasound of the abdomen shows a 4-mm stone in
                                        the distal right ureter.  The patient is treated with analgesics and the stone
                                        passes spontaneously.  Microscopic analysis of the stone reveals a pure uric
                                        acid stone.  Which of the following is the most likely underlying mechanism
                                        leading to stone formation in this patient?</p>
<table class="simple-table" id="fc6714c3-e03c-4076-b250-a6ef69b4874f">
<tbody>
<tr id="5c813057-5d52-4db6-848b-a584a3cc750a">
<td class="" id="}FLp">A.</td>
<td class="" id="JS\D">Bile salt malabsorption in the ileum</td>
<td class="" id="KWf_"></td>
</tr>
<tr id="12095585-ec3a-43d9-8947-f916455b3479">
<td class="" id="}FLp">B.</td>
<td class="" id="JS\D">Concentrated acidic urine</td>
<td class="" id="KWf_"></td>
</tr>
<tr id="861ae124-00a2-48c7-a523-cc20df17b682">
<td class="" id="}FLp">C.</td>
<td class="" id="JS\D">Increased uric acid production</td>
<td class="" id="KWf_"></td>
</tr>
<tr id="ce8adedf-83e2-4d2c-bb8f-d68f47c97329">
<td class="" id="}FLp">D.</td>
<td class="" id="JS\D">Infection with urea-splitting bacteria</td>
<td class="" id="KWf_"></td>
</tr>
<tr id="d420d49a-1ef6-4802-b752-6f7f4ef5f276">
<td class="" id="}FLp">E.</td>
<td class="" id="JS\D">Overproduction of parathyroid hormone</td>
<td class="" id="KWf_"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="75e83f6c-34ee-4bc8-864a-50ae0fcf474f">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="e9a5781c-dcbd-481a-8fdb-cd6e2f8c8f21">
<tbody>
<tr id="0eaa8e13-e511-4450-b39b-04ab64fd8347">
<td class="" id="MDDi">A.</td>
<td class="" id="uiGS">Bile salt malabsorption in the ileum
                                                                (17%)</td>
<td class="" id="hRKJ"></td>
</tr>
<tr id="4502741e-e727-4dd1-ad4b-1015d57dae9d">
<td class="" id="MDDi">B.</td>
<td class="" id="uiGS">Concentrated acidic urine (50%)</td>
<td class="" id="hRKJ"></td>
</tr>
<tr id="6f779fb7-b0ea-476d-b64f-54fa0e4bb273">
<td class="" id="MDDi">C.</td>
<td class="" id="uiGS">Increased uric acid production (21%)
                                                            </td>
<td class="" id="hRKJ"></td>
</tr>
<tr id="01cafbf3-5f9f-42b6-9935-2502009dd81c">
<td class="" id="MDDi">D.</td>
<td class="" id="uiGS">Infection with urea-splitting
                                                                bacteria (8%)</td>
<td class="" id="hRKJ"></td>
</tr>
<tr id="7290c413-adc1-4eda-8445-276dcfd54c90">
<td class="" id="MDDi">E.</td>
<td class="" id="uiGS">Overproduction of parathyroid hormone
                                                                (1%)</td>
<td class="" id="hRKJ"></td>
</tr>
</tbody>
</table>
<p class="" id="5a46a9b6-f378-45b3-bfd2-fd2cd46661c5">Incorrect</p>
<p class="" id="3f149b03-d05b-450c-9f31-cc3f73388b6d">Correct answer B
                                                </p>
<p class="" id="5063f7ab-0833-4b20-bd54-ff76aa1a2a8b">50%Answered
                                                    correctly</p>
<p class="" id="4f02cfa8-6905-47a2-8cc2-d7127e73e3c3">12 secsTime Spent
                                                </p>
<p class="" id="dbf27050-9c80-4335-8282-bc23721a6803">2024Version</p>
<ul class="bulleted-list" id="9e360054-5890-426d-881f-9a08e3665ce7">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="c3a65ce2-3416-4ad8-94a0-60ada53f6052">
<li style="list-style-type:disc"></li>
</ul>
<table class="simple-table" id="41b4f068-419f-4bc2-9623-4e3597cb480e">
<tbody>
<tr id="3ef4ea2a-9a9f-4d6b-b784-67ef58c5a8b3">
<td class="" id="\nTY">Uric acid kidney stones</td>
<td class="" id="HWQ~"></td>
</tr>
<tr id="f3c64766-33f6-4665-9a64-07d048814728">
<td class="" id="\nTY">Risk factors</td>
<td class="" id="HWQ~">‚Ä¢ Low urine pH: chronic diarrhea (GI
                                                                bicarbonate loss), metabolic syndrome/<br/>diabetes
                                                                mellitus<br/>‚Ä¢ Increased uric acid excretion: gout,
                                                                myeloproliferative disorders<br/>‚Ä¢ Increased urine
                                                                concentration: hot, arid climates; dehydration<br/>
</td>
</tr>
<tr id="efa96d55-fa12-4047-a49c-9f9e89daa618">
<td class="" id="\nTY">Pathophysiology</td>
<td class="" id="HWQ~">‚Ä¢ Acidic urine favors formation of
                                                                uric acid (insoluble) over urate (soluble)<br/>‚Ä¢
                                                                Supersaturation of urine with uric acid precipitates
                                                                crystal formation<br/></td>
</tr>
<tr id="9f93fed7-4e59-4564-89c5-9e67dac889a0">
<td class="" id="\nTY">Clinical<br/>characteristics<br/>
</td>
<td class="" id="HWQ~">‚Ä¢ Radiolucent stones (not visible on
                                                                x-ray)<br/>‚Ä¢ Uric acid crystals on urine microscopy
                                                                (diamond/rhomboid shaped)<br/>‚Ä¢ Urine pH usually
                                                                &lt;5.5<br/></td>
</tr>
<tr id="51b84dc0-f795-495d-8f9e-10129e476792">
<td class="" id="\nTY">Treatment</td>
<td class="" id="HWQ~">‚Ä¢ Alkalinization of urine (eg,
                                                                potassium citrate)<br/>‚Ä¢ Reduction of uric acid
                                                                production (eg, low-purine diet, allopurinol)<br/></td>
</tr>
<tr id="f43ce679-2d3a-43db-baed-4ce09fb2c5c9">
<td class="" id="\nTY">GI = gastrointestinal.</td>
<td class="" id="HWQ~"></td>
</tr>
</tbody>
</table>
<p class="" id="24d4c4c2-c98e-4297-af1c-aaf06781a598">This patient with
                                                    recurrent episodes of dehydration due to fluid loss from her
                                                    ileostomy developed a uric acid stone.  Pure uric acid stones are
                                                    radiolucent and cannot be visualized on x-ray but appear as
                                                    yellow/brown agglomerations of rhomboid-shaped crystals on
                                                    gross/microscopic examination.  Biochemical risk factors include low
                                                    urine pH, low urine volume (eg, dehydration), and hyperuricemia.</p>
<p class="" id="11f9f4f3-3649-4def-bfcc-f1c409ce854a">Patients with
                                                    chronic diarrhea or those who have had a colectomy have reduced
                                                    bicarbonate reabsorption from the gut, leading to a state of chronic
                                                    metabolic acidosis.  The kidneys compensate by increasing the
                                                    excretion of hydrogen ions (H+) and reabsorption of bicarbonate in
                                                    the collecting ducts.  This lowers urine pH (acidic urine),
                                                    increasing the conversion of soluble urate ion into insoluble uric
                                                    acid.  Conversely, alkalinization of the urine with potassium
                                                    citrate favors formation of urate and can prevent, and in some cases
                                                    dissolve, uric acid stones.  Other commonly associated conditions
                                                    include gout, high cell turnover states (eg, lymphoproliferative
                                                    disorders), and metabolic syndrome.</p>
<p class="" id="c8127ae8-8824-4954-9b9c-576c5730c43b">(Choice A) 
                                                    Dietary calcium and oxalate normally form insoluble complexes, which
                                                    are eliminated in the feces.  Disruption of the normal enterohepatic
                                                    circulation of bile acids can cause malabsorption of dietary lipids,
                                                    which then form soap complexes with calcium, allowing increased
                                                    absorption of free oxalate.  The excess oxalate is then excreted by
                                                    the kidneys where it promotes formation of calcium oxalate stones. 
                                                    These stones are radio-opaque.</p>
<p class="" id="ec61ec97-ed86-4ea4-9563-3c183d3ab189">(Choice C) 
                                                    Overproduction of uric acid (eg, gout, myeloproliferative disorders)
                                                    can lead to uric acid stones.  However, this patient has no features
                                                    of these disorders, and her stone formation is likely due to
                                                    abnormally concentrated and acidic urine.</p>
<p class="" id="86754b44-b5c8-4804-a013-82c61d5490c2">(Choice D) 
                                                    Hydrolysis of urea by urease-producing bacteria (eg,
                                                    <em>Proteus</em>, <em>Klebsiella</em>) yields ammonia, which
                                                    alkalinizes the urine and promotes formation of magnesium ammonium
                                                    phosphate (struvite) stones.  These stones are large and
                                                    radio-opaque, and typically present with fever and moderate flank
                                                    pain.</p>
<p class="" id="3f22097c-506f-4d4c-bd3f-b759d00a4419">(Choice E) 
                                                    Hyperparathyroidism leads to hypercalcemia and an increased filtered
                                                    calcium load.  The subsequent hypercalciuria increases the risk of
                                                    radio-opaque calcium (oxalate, phosphate) stones.</p>
<p class="" id="28ce0d9d-d4c2-4dea-bf41-48320d265371">Educational
                                                    objective:</p>
<p class="" id="313fdd30-c0fa-4919-8159-bacde2ceddc8">Formation of uric
                                                    acid kidney stones is promoted by low urine pH, which favors
                                                    formation of insoluble uric acid over soluble urate ion. 
                                                    Gastrointestinal bicarbonate loss due to chronic diarrhea leads to
                                                    chronic metabolic acidosis and production of acidic urine, promoting
                                                    formation of uric acid stones.</p>
<p class="" id="3a9809c1-cdf1-4450-8909-2a43455cc57c">References</p>
<ul class="bulleted-list" id="2bd5b4c8-3032-4a7c-8e22-d73d8904a00f">
<li style="list-style-type:disc"><a href="http://www.ncbi.nlm.nih.gov/pubmed/25045326">Uric acid
                                                            nephrolithiasis: a systemic metabolic disorder.</a></li>
</ul>
<p class="" id="c57936dc-0148-4692-9c3a-9ae946394d05">Pathology</p>
<p class="" id="3d032f89-ac30-406e-83a8-fbf2e7b46410">Subject</p>
<p class="" id="0bf841ab-f6ea-4366-896e-aaf682fe8f0e">Renal, Urinary
                                                    Systems &amp; Electrolytes</p>
<p class="" id="e678462b-9aad-4468-b156-035c30bbd424">System</p>
<p class="" id="46232235-9029-414a-bc22-16d67614b883">Renal calculi</p>
<p class="" id="eae22284-faec-4df7-98c7-be058e06367f">Topic</p>
<p class="" id="8d18345b-7865-4817-8090-d08cd4151ab0">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="86f4382b-a58f-4c7c-aca8-77db3250175d">‚ú®Done</p>
<p class="" id="1f72229e-59cc-4021-a1fd-803234c24b11">Exhibit Display
                                                </p>
<figure class="image" id="6e6137fd-d687-47bf-96e2-f8de56ba4170"><a href="https://lh7-us.googleusercontent.com/unsJXMpVZpNaOJMJqEJBlvyWkQeNe1pe05pyI5lgqbk16v5FRXXyKHKTz4YjqkqLrINVzTMw0xELqWm8aOZ9DZHVVTlm6XhO8hMsRgrsDJDySNq9d_jfLqUPHVdv7gxc8EhlT5i0Fs8Hd4Pv222PAWE"><img loading="lazy" src="https://lh7-us.googleusercontent.com/unsJXMpVZpNaOJMJqEJBlvyWkQeNe1pe05pyI5lgqbk16v5FRXXyKHKTz4YjqkqLrINVzTMw0xELqWm8aOZ9DZHVVTlm6XhO8hMsRgrsDJDySNq9d_jfLqUPHVdv7gxc8EhlT5i0Fs8Hd4Pv222PAWE" style="width:602px"/></a>
</figure>
<p class="" id="71a75e1e-1abf-48a2-8af6-55acc4410f4c">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="742dfd46-b558-499f-ad70-e4b234d3a574">ExistingMy
                                                    Notebook</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
