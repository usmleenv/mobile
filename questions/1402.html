
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>1402</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="a9686f8b-d5e6-488b-bcb0-f5b52c5b4626">A 42-year-old homeless man
                                        comes to the emergency department due to painful muscle spasms.  The patient has
                                        had frequent involuntary contractions of the jaw, neck, and trunk muscles, which
                                        are triggered by sensory stimuli.  He has a history of injection drug use and
                                        has had several injection site infections.  Physical examination shows neck
                                        stiffness and decreased opening of the jaw.  Which of the following is the most
                                        likely path taken by the agent responsible for this patient's neurologic
                                        symptoms?</p>
<table class="simple-table" id="6085000f-04ab-4714-81ea-4effffaf7eec">
<tbody>
<tr id="14f0b95c-42c6-4e44-931e-687a9a9f6bcd">
<td class="" id="fm?{">A.</td>
<td class="" id="Fhq&gt;">Bite wound ‚Üí peripheral nerves ‚Üí CNS neurons
                                                </td>
<td class="" id="wx@N"></td>
</tr>
<tr id="ce0871e6-93b8-4a6b-b7c9-bbf764c238e0">
<td class="" id="fm?{">B.</td>
<td class="" id="Fhq&gt;">Contaminated food ‚Üí systemic circulation ‚Üí
                                                    presynaptic nerve terminals</td>
<td class="" id="wx@N"></td>
</tr>
<tr id="53279476-287c-4c7f-9393-3c9e75862ffd">
<td class="" id="fm?{">C.</td>
<td class="" id="Fhq&gt;">Infected wound ‚Üí systemic circulation ‚Üí brain
                                                    parenchyma</td>
<td class="" id="wx@N"></td>
</tr>
<tr id="aacd91cc-72ea-4df2-90e1-c7d6951253a6">
<td class="" id="fm?{">D.</td>
<td class="" id="Fhq&gt;">Nasopharyngeal exudate ‚Üí systemic circulation
                                                    ‚Üí neurons</td>
<td class="" id="wx@N"></td>
</tr>
<tr id="43786234-3719-4f34-96e6-30b91109c413">
<td class="" id="fm?{">E.</td>
<td class="" id="Fhq&gt;">Oral mucosa ‚Üí trigeminal nerve ‚Üí temporal lobe
                                                </td>
<td class="" id="wx@N"></td>
</tr>
<tr id="55b495a3-383d-41f1-81f4-baa1ef169004">
<td class="" id="fm?{">F.</td>
<td class="" id="Fhq&gt;">Puncture wound ‚Üí motor neurons ‚Üí spinal cord
                                                    interneurons</td>
<td class="" id="wx@N"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="968ec677-6178-42e7-b947-6bb1d8d843bb">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="eefb043b-ba9f-4a39-aa65-9b7a3b1ade7c">
<tbody>
<tr id="0c2687e8-b868-430d-a305-bc722fc082f2">
<td class="" id="SsvZ">A.</td>
<td class="" id="nxqD">Bite wound ‚Üí peripheral nerves ‚Üí CNS
                                                                neurons (9%)</td>
<td class="" id="b[OM"></td>
</tr>
<tr id="9a8a226d-b759-4e41-acab-d0d45fd1b420">
<td class="" id="SsvZ">B.</td>
<td class="" id="nxqD">Contaminated food ‚Üí systemic
                                                                circulation ‚Üí presynaptic nerve terminals (5%)</td>
<td class="" id="b[OM"></td>
</tr>
<tr id="5fbd223c-b589-4fb3-b647-1b99591f3799">
<td class="" id="SsvZ">C.</td>
<td class="" id="nxqD">Infected wound ‚Üí systemic circulation
                                                                ‚Üí brain parenchyma (13%)</td>
<td class="" id="b[OM"></td>
</tr>
<tr id="9d2ffaa7-482b-4a1e-8c87-7567aacc6f95">
<td class="" id="SsvZ">D.</td>
<td class="" id="nxqD">Nasopharyngeal exudate ‚Üí systemic
                                                                circulation ‚Üí neurons (1%)</td>
<td class="" id="b[OM"></td>
</tr>
<tr id="5bf27344-7a4e-43d2-8852-a8dbfad55a4e">
<td class="" id="SsvZ">E.</td>
<td class="" id="nxqD">Oral mucosa ‚Üí trigeminal nerve ‚Üí
                                                                temporal lobe (2%)</td>
<td class="" id="b[OM"></td>
</tr>
<tr id="02f50a0b-6ff9-4800-892c-035dc5c370b1">
<td class="" id="SsvZ">F.</td>
<td class="" id="nxqD">Puncture wound ‚Üí motor neurons ‚Üí
                                                                spinal cord interneurons (68%)</td>
<td class="" id="b[OM"></td>
</tr>
</tbody>
</table>
<p class="" id="e668173f-a144-4af3-913c-0ee5ebc61fbc">Incorrect</p>
<p class="" id="3aaa5808-ed44-479c-bb9b-f55ce2f99fd7">Correct answer F
                                                </p>
<p class="" id="16b01f89-91f7-4c32-adf8-3f11d2c3321c">68%Answered
                                                    correctly</p>
<p class="" id="ceef5e20-f664-45ff-b9f1-734e2b483495">14 secsTime Spent
                                                </p>
<p class="" id="9f93a51a-77a6-49e9-833d-9b04657ff92c">2024Version</p>
<ul class="bulleted-list" id="fd4842d6-0f6b-417c-a96d-5a10e001d14a">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="8f4a5af8-83ab-4c90-aa89-959d692c235d">
<li style="list-style-type:disc"></li>
</ul>
<figure class="image" id="02e3c8b1-bd2e-4e2c-ae1a-6492a211e742"><a href="https://lh7-us.googleusercontent.com/1-c-9MlN_001Su9UOX8KI9l3cyHX-afxHY-IwKdL0qCv-o9lPysuPous0fqq3XqRdDG5XeS0VS6iWig4liNBTe4kqGjPFRmFWTcDuXTTFg_5ix5XNI7lEOlBelozvt94eYNOFuupB7OAOY1OSne0fTw"><img loading="lazy" src="https://lh7-us.googleusercontent.com/1-c-9MlN_001Su9UOX8KI9l3cyHX-afxHY-IwKdL0qCv-o9lPysuPous0fqq3XqRdDG5XeS0VS6iWig4liNBTe4kqGjPFRmFWTcDuXTTFg_5ix5XNI7lEOlBelozvt94eYNOFuupB7OAOY1OSne0fTw" style="width:602px"/></a>
</figure>
<p class="" id="e489d444-407c-4e00-8401-981e88fe4e27">This patient with
                                                    painful muscle spasms and neck/jaw contraction likely has tetanus,
                                                    which is caused by the spore-forming anaerobic bacterium
                                                    <em>Clostridium tetani</em>.  <em>C tetani</em> spores are found in
                                                    soil worldwide and are typically transmitted to humans during a
                                                    puncture injury (eg, dirty needle use, splinter).  The low oxygen
                                                    tension of a puncture wound allows spores to germinate into
                                                    vegetative rod-shaped bacteria that proliferate locally and produce
                                                    tetanospasmin (tetanus toxin).</p>
<p class="" id="167a9258-f200-470b-94f9-b76b9292d51b">Although the
                                                    pathogen is noninvasive (it stays localized to the wound site), the
                                                    toxin enters the presynaptic terminals of the lower motor neurons
                                                    and travels by retrograde axonal transport to the CNS.  In the
                                                    spinal cord, at the level of the anterior horn cells, the toxin
                                                    blocks the release of neurotransmitters from inhibitory
                                                    interneurons, leading to spasmodic muscle contraction.</p>
<p class="" id="ad88039b-0219-4de5-bdec-4dea9ee81d6e">Classic findings
                                                    include jaw stiffness due to masseter muscle spasm (trismus/lockjaw)
                                                    and sustained contraction of the facial muscles, producing a bizarre
                                                    "smiling" appearance (risus sardonicus).  Spasmodic
                                                    contraction of the back and neck can cause opisthotonos. 
                                                    Intermittent muscle spasms are frequently triggered by sensory
                                                    stimuli (eg, loud noises, light, touch).  Respiratory muscle
                                                    involvement can lead to respiratory failure.</p>
<p class="" id="b6138146-ea73-4b28-9428-83f10c5ec58c">(Choice A)  Rabies
                                                    virus is transmitted via the saliva of an infected animal during a
                                                    bite wound.  The virus spreads by retrograde axonal transport
                                                    through peripheral nerves and enters the spinal cord/CNS.  Patients
                                                    with rabies usually develop painful pharyngeal spasms, hydrophobia,
                                                    fever, and hyperactivity.  However, this patient has no history of
                                                    an animal bite; he likely developed tetanus due to a puncture wound
                                                    with a contaminated needle.</p>
<p class="" id="5fff5d3e-810e-4b1e-a67a-89d7e62561a7">(Choice B) 
                                                    Food-borne botulism is marked by the ingestion of preformed botulism
                                                    toxin with subsequent spread through the systemic circulation.  The
                                                    toxin blocks cholinergic presynaptic nerve terminals, which results
                                                    in symmetric, descending weakness.</p>
<p class="" id="3ac69f8d-f1e3-4372-ac91-177ea758d361">(Choice C) 
                                                    Bacteria (eg, <em>Staphylococcus aureus</em>) from a wound can
                                                    spread through the bloodstream to the brain leading to brain
                                                    abscess.  Symptoms vary but the most common manifestation is
                                                    unilateral headache.</p>
<p class="" id="d73328be-d9cd-41f3-8f2e-69ae03ec068a">(Choice D) 
                                                    Diphtheria is associated with the formation of a pseudomembranous
                                                    pharyngeal exudate and the elaboration of diphtheria toxin into the
                                                    systemic circulation.  The toxin causes cardiac (myocarditis) and
                                                    neurologic toxicity.</p>
<p class="" id="3a462c27-b9a0-4abb-8016-d219999ecbe9">(Choice E)  Herpes
                                                    simplex virus type 1 causes orolabial lesions and is the most
                                                    frequent cause of sporadic encephalitis, which occurs when the virus
                                                    spreads via the trigeminal nerve or olfactory tract to the temporal
                                                    lobe.  Patients usually present with confusion, fever, focal
                                                    neurologic deficits, and seizures.</p>
<p class="" id="7ca9644e-4d7f-4c10-914b-51a4a95618c4">Educational
                                                    objective:</p>
<p class="" id="ac2b3989-8d58-4b10-9f0d-c5a830041e7f">Tetanus is caused
                                                    by infection with toxigenic strains of the anaerobic bacterium
                                                    <em>Clostridium tetani</em>.  Transmission typically occurs when
                                                    spores are inoculated into the skin via a puncture wound.  The
                                                    bacteria germinate, replicate locally, and elaborate tetanospasmin
                                                    (tetanus toxoid).  The toxin spreads in a retrograde fashion through
                                                    the lower motor neurons to the spinal cord, where it blocks
                                                    inhibitory interneurons and causes spasmodic muscle contraction (eg,
                                                    trismus, risus sardonicus).</p>
<p class="" id="d59f97bb-9d91-41a3-8dfb-a1e5d4436b97">Microbiology</p>
<p class="" id="5aca15a3-b363-4c1c-8380-b0b35a8eac32">Subject</p>
<p class="" id="31b1e5e1-c2bd-425c-820a-c54758ca6ea1">Nervous System</p>
<p class="" id="b8cb6595-6d22-4e80-acf7-c50562dabe7b">System</p>
<p class="" id="e9454a7b-5510-4480-9d1c-20bf960f19fd">Tetanus</p>
<p class="" id="e98ffbad-5d47-4838-ac91-5c8ce3f84bcf">Topic</p>
<p class="" id="e1b02750-8892-400f-ac44-c2bc7ea04c10">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="98d2d033-3f5d-4d38-9451-fd94dc4ed35e">‚ùåelementFinder:
                                                    //a[@href='javascript:void(0)']</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
