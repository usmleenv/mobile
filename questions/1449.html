
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>1449</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="c7e66316-de96-4b8f-bd59-3d553681a044">An autopsy is performed on a
                                        stillborn fetus delivered at 20 weeks gestation to a 35-year-old primigravida. 
                                        The woman's pregnancy was unremarkable, and she received routine prenatal
                                        care.  Noninvasive prenatal testing was performed earlier in the pregnancy and
                                        revealed a 46,XY fetus.  Further work-up reveals a loss of function mutation of
                                        the androgen receptor gene on the X chromosome, resulting in complete androgen
                                        insensitivity.  Which of the following phenotypes is most likely to be present
                                        in this fetus?</p>
<table class="simple-table" id="71aeeb14-edc0-471c-97db-27025ea8ba24">
<tbody>
<tr id="e4d46d87-2e0b-4dc4-a8d5-5ad81005cb38">
<td class="" id="lBZ`"></td>
<td class="" id="SgX|"><strong>Internal Genital Ducts</strong></td>
<td class="" id="U{_R"><strong>External Genitalia</strong></td>
</tr>
<tr id="a8e54180-f488-42a3-b3e6-240a01074896">
<td class="" id="lBZ`">A</td>
<td class="" id="SgX|">Absent</td>
<td class="" id="U{_R">Female</td>
</tr>
<tr id="7721a1fa-6dba-445b-9e40-19c2332140fe">
<td class="" id="lBZ`">B</td>
<td class="" id="SgX|">Absent</td>
<td class="" id="U{_R">Male</td>
</tr>
<tr id="ca675179-2691-4cdb-9c2f-30c3623f8436">
<td class="" id="lBZ`">C</td>
<td class="" id="SgX|">Uterus and fallopian tubes</td>
<td class="" id="U{_R">Ambiguous</td>
</tr>
<tr id="777de7ab-4a6b-40a7-83a4-c2cbc62c8c1a">
<td class="" id="lBZ`">D</td>
<td class="" id="SgX|">Uterus and fallopian tubes</td>
<td class="" id="U{_R">Male</td>
</tr>
<tr id="2061dfa8-40b3-4f24-af5f-80485d6b00be">
<td class="" id="lBZ`">E</td>
<td class="" id="SgX|">Vas deferens and epididymis</td>
<td class="" id="U{_R">Female</td>
</tr>
</tbody>
</table>
<ul class="toggle" id="10aaea2a-d319-4672-984f-c666acc5010e">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="7e667c46-04da-41b5-b207-cfac675ad5c3">
<tbody>
<tr id="3a80a3d4-b699-4ad7-930b-43d3ded55738">
<td class="" id="fj\R">Internal genital ductsExternal
                                                                genitalia</td>
<td class="" id="lBD~"></td>
<td class="" id="|NvV"></td>
</tr>
<tr id="e527b688-e24a-434f-83e8-2deed30d4ce5">
<td class="" id="fj\R">A.</td>
<td class="" id="lBD~">AbsentFemale<br/> (34%)<br/></td>
<td class="" id="|NvV"></td>
</tr>
<tr id="5ef4c5be-d5d2-4d3f-ba43-7032c36ac7aa">
<td class="" id="fj\R">B.</td>
<td class="" id="lBD~">AbsentMale<br/> (6%)<br/></td>
<td class="" id="|NvV"></td>
</tr>
<tr id="ecd6a96d-ce9a-4d80-b782-83eecae63f0a">
<td class="" id="fj\R">C.</td>
<td class="" id="lBD~">Uterus and fallopian
                                                                tubesAmbiguous<br/> (17%)<br/></td>
<td class="" id="|NvV"></td>
</tr>
<tr id="0eb52a97-e6e7-40dd-9f55-4709f1fb922f">
<td class="" id="fj\R">D.</td>
<td class="" id="lBD~">Uterus and fallopian tubesMale<br/>
                                                                (5%)<br/></td>
<td class="" id="|NvV"></td>
</tr>
<tr id="5ce2ca5a-ac3a-4f47-8572-c1671a5b1ee7">
<td class="" id="fj\R">E.</td>
<td class="" id="lBD~">Vas deferens and
                                                                epididymisFemale<br/> (36%)<br/></td>
<td class="" id="|NvV"></td>
</tr>
</tbody>
</table>
<p class="" id="daf841ed-30f9-4c39-af71-29c00dc1e228">Incorrect</p>
<p class="" id="9a374968-7129-44fd-9bfe-426edd9c9bcc">Correct answer A
                                                </p>
<p class="" id="afee262a-2dff-4455-9a59-7dc63c57ddad">34%Answered
                                                    correctly</p>
<p class="" id="c84503d9-63e5-4136-97af-5d84cbe58ea4">48 secsTime Spent
                                                </p>
<p class="" id="d617f095-9422-42f6-92a3-f81cb1216d39">2024Version</p>
<ul class="bulleted-list" id="df0a095e-786c-4a51-b3ae-768c7158ea08">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="3318a20b-c25a-4b95-aede-7ac29374711d">
<li style="list-style-type:disc"></li>
</ul>
<figure class="image" id="a2072009-b383-45d2-8aae-033564dabc39"><a href="https://lh7-us.googleusercontent.com/kswgSA4Iu9vtDzywKGmdw22vRIWf9mjSLKA9-s5jvwYIRIuaGclmYKxkvcSwNymAfvh6er4UrmRwqsXe4aEMLMkidnqj7EV9cT_wpF7TAf9Oxx4F_D_i0OtuJM15vOUzH8uDmGy3h5ca2UEhgegToVQ"><img loading="lazy" src="https://lh7-us.googleusercontent.com/kswgSA4Iu9vtDzywKGmdw22vRIWf9mjSLKA9-s5jvwYIRIuaGclmYKxkvcSwNymAfvh6er4UrmRwqsXe4aEMLMkidnqj7EV9cT_wpF7TAf9Oxx4F_D_i0OtuJM15vOUzH8uDmGy3h5ca2UEhgegToVQ" style="width:602px"/></a>
</figure>
<p class="" id="88ed5518-8c7a-41c5-95ac-00850c8afe91">Androgen
                                                    insensitivity syndrome is a disorder of sex development seen in
                                                    genotypic males (XY) and characterized by a loss-of-function
                                                    mutation of the androgen receptor gene on the X chromosome.</p>
<p class="" id="c57b2ace-d1f0-4259-af06-329619bb40df">In utero, Leydig
                                                    cells of the testes produce testosterone, which normally induces
                                                    differentiation of precursor genital structures into male-specific
                                                    genitalia by the following mechanisms:</p>
<ul class="bulleted-list" id="3fb78d93-b6b2-4870-b50b-731dfc6c8ceb">
<li style="list-style-type:disc">Testosterone binds androgen
                                                        receptors on the wolffian duct, which proliferates and develops
                                                        into internal male genital ducts (eg, epididymis, vas deferens).
                                                    </li>
</ul>
<ul class="bulleted-list" id="c3ef188a-1671-4c2c-8adc-ef514141769e">
<li style="list-style-type:disc">Testosterone is converted into
                                                        dihydrotestosterone, which normally binds androgen receptors on
                                                        the genital tubercle to promote differentiation into external
                                                        male genitalia.</li>
</ul>
<p class="" id="5de7843d-6975-48a7-ad86-293239db9d96">In patients with
                                                    complete androgen insensitivity, there is appropriate testosterone
                                                    and dihydrotestosterone production; however, without functional
                                                    androgen receptors, patients do not develop internal male genital
                                                    ducts or external male genitalia (Choice B).  Instead, the absence
                                                    of effective androgens leads to development of external female
                                                    genitalia.  In addition, appropriate production of antim√ºllerian
                                                    hormone by testicular Sertoli cells leads to m√ºllerian duct
                                                    involution and suppression of internal female genital duct (eg,
                                                    fallopian tubes, uterus) development.</p>
<p class="" id="0d5cafc3-d3f5-4a7e-aa79-649c7bc084d6">Due to a typical
                                                    female phenotype at birth, the diagnosis is usually made in
                                                    adolescent girls with primary amenorrhea; this condition did not
                                                    contribute to fetal demise in this case.</p>
<p class="" id="452e5bb7-42c8-49b3-8cd4-d7b972b2730f">(Choices C and D) 
                                                    The combination of female internal genital ducts and ambiguous or
                                                    external male genitalia may occur in a genotypic female (XX) with
                                                    excess androgen exposure (eg, congenital adrenal hyperplasia).</p>
<p class="" id="a702d533-d174-4956-b0d1-38c269a8c9aa">(Choice E) 
                                                    Internal male genital ducts with external female genitalia occur in
                                                    genotypic males (XY) with 5-alpha reductase deficiency. 
                                                    Testosterone can appropriately stimulate internal male genital duct
                                                    development, but absence of conversion from testosterone to
                                                    dihydrotestosterone results in the development of external female
                                                    genitalia.</p>
<p class="" id="cc863bbc-26f1-440a-9bec-d895cb8299f7">Educational
                                                    objective:</p>
<p class="" id="68ec0ca5-7001-4706-b59c-0c3dc69282d9">Androgen
                                                    insensitivity syndrome is caused by dysfunctional androgen
                                                    receptors; genotypic males (XY) have testes but no external male
                                                    genitalia or internal male genital ducts (eg, vas deferens) due to
                                                    the lack of androgen effect during fetal development.  Instead,
                                                    external female genitalia develop, but antim√ºllerian hormone results
                                                    in the absence of internal female genital ducts (eg, fallopian
                                                    tubes) as well.</p>
<p class="" id="283e1472-9256-4344-b8d3-c532b1a04edd">Embryology</p>
<p class="" id="60622b36-53f3-4c62-ba98-2d5a6924198f">Subject</p>
<p class="" id="91452234-f8fc-4901-8939-787193e777cb">Male Reproductive
                                                    System</p>
<p class="" id="3743b6bb-27d6-4dcc-af84-20b4b609cd1b">System</p>
<p class="" id="cc6f9aba-6aaa-4ce5-abd9-7e2bf56b69c6">Sexual
                                                    differentiation</p>
<p class="" id="31b65eba-4724-4be8-9460-590ffe5c7547">Topic</p>
<p class="" id="8203a057-59f8-481c-ad19-0ff6ee5a8256">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="3552bf35-fb5a-4083-b380-9445164f539e">My Notebook</p>
<p class="" id="9d6a9065-f47d-45d1-b48d-dbff1a47c4a3">0</p>
<p class="" id="f9516f0f-50ed-4b40-8725-6a5da6b28b05">Flashcards</p>
<p class="" id="1befc203-1dcd-4c89-98d7-fdaca77f193c">Feedback</p>
<p class="" id="9e516c0b-251f-4f35-afbf-520946148de7">Suspend</p>
<p class="" id="e13ae2e0-dfe6-44cd-8e59-55d473ee0eba">End Block</p>
<p class="" id="b0d08dd7-b2fe-48a4-b11d-0d9a879175a5">‚ú®Done</p>
<p class="" id="2ffa90bc-c43d-450a-9e9d-63c3803db7c6">Exhibit Display
                                                </p>
<figure class="image" id="2d9c4775-9b62-40ab-85ea-f00a6de14f25"><a href="https://lh7-us.googleusercontent.com/-g2MnmIirtBHmDoRQejdGcMMVJ8ldftbfBHOg923MIB9f4sdl9V75vF4es0p1A8h65HWU-8jlcAFr_SMNFgnWnHSSxG0lWqt1bgvN9Eymt_iYfOgUQZjdX3YaFdlz3BZfVEGKUMvchrG245dfPPVPzo"><img loading="lazy" src="https://lh7-us.googleusercontent.com/-g2MnmIirtBHmDoRQejdGcMMVJ8ldftbfBHOg923MIB9f4sdl9V75vF4es0p1A8h65HWU-8jlcAFr_SMNFgnWnHSSxG0lWqt1bgvN9Eymt_iYfOgUQZjdX3YaFdlz3BZfVEGKUMvchrG245dfPPVPzo" style="width:580px"/></a>
</figure>
<p class="" id="6459c132-f28e-4ecd-b6f4-ac01970531fc">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="bb6b939f-55cb-4df4-bd7c-23a31a4dc746">ExistingMy
                                                    Notebook</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
