
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>14877</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="34f49c81-9b77-44f6-8e0e-6d592bc1ac36">A 42-year-old woman comes to
                                        the office due to frequent episodes of burning in her chest and small amounts of
                                        regurgitation after meals and at nighttime.  Medical history includes
                                        hypertension.  Vital signs are within normal limits.  BMI is 30 kg/m2.  There is
                                        no abdominal tenderness and the remainder of the physical examination is
                                        normal.  The patient shows the clinician an over-the-counter antacid that she
                                        has been taking to relieve her symptoms.  The preparation contains a combination
                                        of magnesium and aluminum hydroxide.  Which of the following is the most likely
                                        rationale for combining both mineral salts in this antacid preparation?</p>
<table class="simple-table" id="a19724ea-d5e4-462b-8648-b783337b2f32">
<tbody>
<tr id="292454cd-e2c8-4983-a3c5-894b558e38f0">
<td class="" id="BcT]">A.</td>
<td class="" id="^jM;">Improve systemic absorption</td>
<td class="" id="AOrc"></td>
</tr>
<tr id="4cd9a46b-47b9-4890-ad4d-1a7837ceab91">
<td class="" id="BcT]">B.</td>
<td class="" id="^jM;">Minimize drug interactions</td>
<td class="" id="AOrc"></td>
</tr>
<tr id="5d66fc8b-9a04-43af-9e99-04a41392444a">
<td class="" id="BcT]">C.</td>
<td class="" id="^jM;">Prevent rebound acid secretion</td>
<td class="" id="AOrc"></td>
</tr>
<tr id="0ec9dd67-67c3-451c-9194-8b2fcdbde4fa">
<td class="" id="BcT]">D.</td>
<td class="" id="^jM;">Reduce adverse effects</td>
<td class="" id="AOrc"></td>
</tr>
<tr id="122ad3a1-a6fc-47ac-83e8-8a27a181c7ed">
<td class="" id="BcT]">E.</td>
<td class="" id="^jM;">Reduce the risk of alkalosis and renal failure
                                                </td>
<td class="" id="AOrc"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="e8c4e163-abb2-407b-ab91-1528165e6abd">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="68a078d1-e9c5-4d7e-804c-0b32ff5ab6c6">
<tbody>
<tr id="a1b9544f-6b8b-45e2-ad53-7cafa84f6680">
<td class="" id="cBRH">A.</td>
<td class="" id="cdtO">Improve systemic absorption (10%)
                                                            </td>
<td class="" id="ar?e"></td>
</tr>
<tr id="a2da8362-3ebf-4c39-9876-fe623e5af088">
<td class="" id="cBRH">B.</td>
<td class="" id="cdtO">Minimize drug interactions (3%)</td>
<td class="" id="ar?e"></td>
</tr>
<tr id="d355c742-9bc7-46fb-9cbe-6a3d33e10765">
<td class="" id="cBRH">C.</td>
<td class="" id="cdtO">Prevent rebound acid secretion (21%)
                                                            </td>
<td class="" id="ar?e"></td>
</tr>
<tr id="919767b8-0d4d-44dc-86fd-3f1e750049d5">
<td class="" id="cBRH">D.</td>
<td class="" id="cdtO">Reduce adverse effects (51%)</td>
<td class="" id="ar?e"></td>
</tr>
<tr id="adb0a690-83f7-4b1e-a7db-1edef5e68cd4">
<td class="" id="cBRH">E.</td>
<td class="" id="cdtO">Reduce the risk of alkalosis and
                                                                renal failure (12%)</td>
<td class="" id="ar?e"></td>
</tr>
</tbody>
</table>
<p class="" id="f9a9d759-a5a2-452d-a209-98ef873c5d3d">Incorrect</p>
<p class="" id="19cf9094-8a7f-4d1f-8171-b22c1f15dacd">Correct answer D
                                                </p>
<p class="" id="4d50f64b-c968-4ba4-a1ad-91755c1701dd">51%Answered
                                                    correctly</p>
<p class="" id="90256375-a78e-4406-aef7-304adc88e354">15 secsTime Spent
                                                </p>
<p class="" id="cfda7b3e-21d2-4595-aa5b-5f75b0128c05">2024Version</p>
<ul class="bulleted-list" id="cb070c4d-59e2-4c5a-bd68-02ca612735a6">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="b25e485d-225c-4d6b-99f0-c981dcff50e9">
<li style="list-style-type:disc"></li>
</ul>
<p class="" id="8c632845-aa07-49c6-95c9-a9a4c8ceb666">Magnesium salts
                                                    (eg, magnesium trisilicate, magnesium hydroxide) and aluminum
                                                    hydroxide are weak alkali mineral salts.  They temporarily increase
                                                    the gastric pH by neutralizing hydrochloric acid, helping to relieve
                                                    gastroesophageal reflux symptoms.</p>
<p class="" id="04b30e34-1424-462c-bae6-57b0abd12658">Aluminum hydroxide
                                                    has a tendency to cause constipation due to interactions with
                                                    intestinal secretions that form insoluble salts.  In contrast,
                                                    magnesium salts cause osmotic diarrhea.  Therefore, the two
                                                    medications are combined to offset the adverse effects of the
                                                    individual medications.  Patients with reflux symptoms and chronic
                                                    constipation may benefit from magnesium salt monotherapy, whereas
                                                    aluminum hydroxide monotherapy may be of value in patients with
                                                    chronic diarrhea.</p>
<p class="" id="3dec741c-1675-4285-92d1-3f4632637c37">(Choice A) 
                                                    Aluminum, when absorbed in large doses, causes osteomalacia, bone
                                                    pain, hypercalcemia, and dementia.  Aluminum absorption in the
                                                    gastrointestinal tract is minimal from the salt form, and toxicity
                                                    tends to occur in patients with chronic kidney disease that limits
                                                    renal excretion.  Combination therapy does not alter systemic
                                                    absorption.</p>
<p class="" id="cf02abb5-9044-47b2-9054-b2b624735375">(Choice B)  Drug
                                                    interactions are common with antacid medications, largely due to
                                                    pH-related changes in protein binding, absorption, or elimination of
                                                    the drugs.  Combining multiple alkalinizing agents would not
                                                    minimize their effects on other drugs.</p>
<p class="" id="08893849-6b17-441b-8fa4-7c8b07e941d4">(Choice C) 
                                                    Rebound acid hypersecretion can occur with calcium carbonate,
                                                    magnesium hydroxide, aluminum hydroxide, and proton pump
                                                    inhibitors.  This is likely due to increased gastrin release as a
                                                    result of gastric alkalinization or (in the case of calcium salts)
                                                    direct ionic stimulation.</p>
<p class="" id="fc48dffe-80c8-4291-ac5a-96585bc3371e">(Choice E) 
                                                    Milk-alkali syndrome is caused by excessive use of calcium carbonate
                                                    antacids and is characterized by hypercalcemia, alkalosis, and renal
                                                    dysfunction.  Kidney injury occurs due to both hypercalcemia-induced
                                                    renal vasoconstriction and calcium-induced diuresis.  The resultant
                                                    volume depletion, decreased glomerular filtration rate, and alkali
                                                    intake lead to a metabolic alkalosis.  However, severe alkalosis can
                                                    occur with all antacids, and the combination of magnesium and
                                                    aluminum would not decrease this risk.</p>
<p class="" id="960b8932-4f2a-40c3-87e9-519ce51922a1">Educational
                                                    objective:</p>
<p class="" id="69303854-e910-4c2a-a876-661fc93fe1b6">Magnesium salts
                                                    and aluminum hydroxide are basic mineral salts used to neutralize
                                                    gastric acid and relieve gastroesophageal reflux symptoms.  Side
                                                    effects include diarrhea and constipation, respectively.  Therefore,
                                                    these medications are often combined to offset the adverse effects
                                                    of the individual medications.</p>
<p class="" id="cde5327e-2e2e-41a2-8539-0f3ac6a887e3">Pharmacology</p>
<p class="" id="3764fe75-9e98-4ece-a39b-0a58ef7bd101">Subject</p>
<p class="" id="1ebcade1-d56a-4679-9867-7c21586f1d2f">Gastrointestinal
                                                    &amp; Nutrition</p>
<p class="" id="c69915d3-b3c7-4206-8b85-9d861c8384dc">System</p>
<p class="" id="59ba5138-38a9-4dc3-b5ac-1fa6464224c6">Gastroesophageal
                                                    reflux disease</p>
<p class="" id="38f069fe-424e-4c7b-8594-e51a66f2f6d8">Topic</p>
<p class="" id="471d2ba2-e6b7-481f-be10-42417ef55713">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="f44f7fd1-1d9d-48a2-9418-7076f88a59ca">‚ùåelementFinder:
                                                    //a[@href='javascript:void(0)']</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
