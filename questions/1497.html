
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>1497</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="3b41dd34-af54-446a-bf91-cfe3c80f86f0">During the course of a week at
                                        an overnight summer camp, 4 children age 7-9 are sent to the camp health
                                        center.  They each have fever, cough, congestion, sore throat, and red eyes. 
                                        Physical examination of the children shows bilateral conjunctival injection and
                                        an erythematous oropharynx.  Auscultation of one child also reveals crackles in
                                        the left lower lung field.  All the children's symptoms improve over 7 days
                                        with supportive care.  Which of the following is the most likely cause of the
                                        outbreak?</p>
<table class="simple-table" id="1d9ad6c7-3d9b-49f8-9172-1f2b944812a3">
<tbody>
<tr id="c17df7d8-d9e0-4b42-b642-a000dafb1294">
<td class="" id="?CgV">A.</td>
<td class="" id="SJE|">Adenovirus</td>
<td class="" id="mSfM"></td>
</tr>
<tr id="4e8eb96a-8e52-47b6-a55f-af1f00a2ecdf">
<td class="" id="?CgV">B.</td>
<td class="" id="SJE|">Coxsackievirus</td>
<td class="" id="mSfM"></td>
</tr>
<tr id="d57b4cd8-2532-45df-8e0e-1431d9cedbb5">
<td class="" id="?CgV">C.</td>
<td class="" id="SJE|">Influenza virus</td>
<td class="" id="mSfM"></td>
</tr>
<tr id="c458b8af-0858-4c97-956b-7581458fc034">
<td class="" id="?CgV">D.</td>
<td class="" id="SJE|">Norovirus</td>
<td class="" id="mSfM"></td>
</tr>
<tr id="5b8a75d4-4167-42ea-b5f7-f35eaafbb221">
<td class="" id="?CgV">E.</td>
<td class="" id="SJE|">Parvovirus</td>
<td class="" id="mSfM"></td>
</tr>
<tr id="9a456429-9527-43d1-ac2a-68e07d9ae40f">
<td class="" id="?CgV">F.</td>
<td class="" id="SJE|">Respiratory syncytial virus</td>
<td class="" id="mSfM"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="7f9b5732-bb37-4c39-8e73-a4b6aba8e73f">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="9fc6a3e3-89a8-443c-90c3-b49330bfdaf3">
<tbody>
<tr id="3b843daa-6192-4c31-b87c-117a344eccaf">
<td class="" id="WHuK">A.</td>
<td class="" id="~TMF">Adenovirus (70%)</td>
<td class="" id="vEQ&lt;"></td>
</tr>
<tr id="605348b1-5244-4249-8995-a3c5193f187a">
<td class="" id="WHuK">B.</td>
<td class="" id="~TMF">Coxsackievirus (4%)</td>
<td class="" id="vEQ&lt;"></td>
</tr>
<tr id="4bed0c8a-5c32-42bb-b4f9-2ea60b6b107a">
<td class="" id="WHuK">C.</td>
<td class="" id="~TMF">Influenza virus (8%)</td>
<td class="" id="vEQ&lt;"></td>
</tr>
<tr id="ee1f01f5-a062-42d1-a9cf-03057704d60d">
<td class="" id="WHuK">D.</td>
<td class="" id="~TMF">Norovirus (2%)</td>
<td class="" id="vEQ&lt;"></td>
</tr>
<tr id="07f8537f-ca8f-4761-b04e-5008fc163064">
<td class="" id="WHuK">E.</td>
<td class="" id="~TMF">Parvovirus (1%)</td>
<td class="" id="vEQ&lt;"></td>
</tr>
<tr id="98a1504c-cee7-402d-a65b-d0c1d67d6098">
<td class="" id="WHuK">F.</td>
<td class="" id="~TMF">Respiratory syncytial virus (12%)
                                                            </td>
<td class="" id="vEQ&lt;"></td>
</tr>
</tbody>
</table>
<p class="" id="9e46491f-202a-4632-aaa5-4cc3a62a7d59">Correct</p>
<p class="" id="dbd6e810-cb4b-44fe-a976-4f8a1b15decc">70%Answered
                                                    correctly</p>
<p class="" id="9e9ecce3-6d60-4d51-a4d5-a0a02efa0893">21 secsTime Spent
                                                </p>
<p class="" id="89b298e8-c4bb-49c3-a445-50658ef5aa8a">2024Version</p>
<ul class="bulleted-list" id="c909b8f2-bcd8-4baa-aab8-5b8bbe467f07">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="06833911-8a35-4520-b572-bcd78e9d2944">
<li style="list-style-type:disc"></li>
</ul>
<table class="simple-table" id="51905cfe-f542-4bd9-903b-c03352937dda">
<tbody>
<tr id="4926a83e-1a87-4618-9076-17d0ec356fd3">
<td class="" id="zQ{s">Adenovirus</td>
<td class="" id="FfAL"></td>
</tr>
<tr id="198251be-f269-469c-b031-191528a1652a">
<td class="" id="zQ{s">Epidemiology</td>
<td class="" id="FfAL">‚Ä¢ Double-stranded DNA<br/>‚Ä¢
                                                                Transmission via direct contact, fecal-oral route,
                                                                respiratory droplets<br/>‚Ä¢ Occurs year round<br/></td>
</tr>
<tr id="87741648-1d30-4395-bb5e-e44f4fc16418">
<td class="" id="zQ{s">Clinical features</td>
<td class="" id="FfAL">‚Ä¢ Pharyngoconjunctival fever<br/>‚Ä¢
                                                                Outbreaks in crowded quarters (eg, day care centers,
                                                                camp dormitories, military barracks)<br/></td>
</tr>
</tbody>
</table>
<p class="" id="46154e37-7614-4b23-bceb-8fa1a0482f8e">Adenovirus
                                                    infection is a common, usually self-limiting, disease caused by a
                                                    double-stranded DNA genome that is transmitted via direct contact,
                                                    fecal-oral route, or respiratory droplets.  Adenovirus infection
                                                    occurs year-round and in outbreaks in crowded quarters (eg, day care
                                                    centers, camp dormitories, military barracks).</p>
<p class="" id="1dc16243-7320-4312-87c7-c5091c2207e7">Viral replication
                                                    in epithelial cells can give rise to varying manifestations of
                                                    disease based on serotype, with upper respiratory involvement as the
                                                    most common.  Pharyngoconjunctival fever is characterized by the
                                                    acute onset of fever, cough, congestion, pharyngitis, and
                                                    conjunctivitis.  Physical examination usually reveals an
                                                    erythematous oropharynx with bilateral, conjunctival injection (ie,
                                                    conjunctival blood vessel enlargement) and serous discharge. 
                                                    Pneumonia occurs in a small percentage of patients, such as the
                                                    child with focal crackles.</p>
<p class="" id="e7c8e15a-27db-4b8b-805a-30e32f2c84a5">(Choice B)  In
                                                    young children, hand-foot-and-mouth disease is caused by
                                                    coxsackievirus.  Painful vesicles develop in the oropharynx and on
                                                    the hands (eg, palms, dorsal fingers) and feet (eg, soles, sides). 
                                                    Coxsackievirus can also cause herpangina, an illness characterized
                                                    by fever with posterior pharyngeal vesicles and without a rash.</p>
<p class="" id="b7956e9b-97c2-407c-b964-6407092045c9">(Choice C) 
                                                    Influenza viruses cause acute onset of high fever, cough, muscle
                                                    aches, and malaise with a peak incidence during the winter.  In
                                                    children, infection can be complicated by febrile seizures,
                                                    vomiting, acute otitis media, and pneumonia.</p>
<p class="" id="4af51e22-8111-4fb6-b71c-610d81ebb1c3">(Choice D) 
                                                    Norovirus causes rapid-onset, self-limiting gastroenteritis in
                                                    outbreak settings (eg, restaurants, child care facilities, cruise
                                                    ships).  In addition to vomiting and diarrhea, fever, headache, and
                                                    malaise are common.</p>
<p class="" id="92ae9af5-79d9-4f92-92b8-9bb8b5288520">(Choice E) 
                                                    Parvovirus B19 causes erythema infectiosum (fifth disease) in
                                                    school-aged children and presents with fever, malaise, and a classic
                                                    "slapped cheek" rash.</p>
<p class="" id="731a4f38-4a22-454c-a702-29ef9cfb2623">(Choice F) 
                                                    Respiratory syncytial virus (RSV) classically causes lower
                                                    respiratory tract disease (eg, bronchiolitis, pneumonia) in
                                                    infants.  Although older children and adults can develop respiratory
                                                    infection and outbreaks can occur in close quarters, RSV is a
                                                    seasonal virus that peaks in the winter months.</p>
<p class="" id="7a686218-b0e9-42f5-a2c5-38e54ecc5660">Educational
                                                    objective:</p>
<p class="" id="0f0c3578-8ba8-4bde-ae9a-4e914135641f">Adenovirus is a
                                                    self-limiting, year-round infection that causes the acute onset of
                                                    fever, cough, congestion, pharyngitis, and conjunctivitis.  This
                                                    pharyngoconjunctival disease can occur in outbreaks among those
                                                    living in close quarters (eg, camp dormitories, military barracks).
                                                </p>
<p class="" id="feb28cc6-7303-41b6-abdd-8f41dbbe6a16">Microbiology</p>
<p class="" id="5f6ac53d-1ef8-4d96-9c22-12eb01610d00">Subject</p>
<p class="" id="40cc216f-cd41-4002-bef7-12ac37e4f29a">Infectious
                                                    Diseases</p>
<p class="" id="9e687535-2062-4c3e-9780-3ee0377d3316">System</p>
<p class="" id="7bace486-b1e2-4de9-967b-df622cd55bdb">Upper respiratory
                                                    tract infections</p>
<p class="" id="426df387-3e56-4f3c-b829-2a8d3820e1fb">Topic</p>
<p class="" id="c7ad5ddf-a573-495c-9673-d92bf46843dd">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="091e5dd8-03f1-4170-adf7-4a87a5fd1bcf">‚ú®Done</p>
<p class="" id="ce5d1ded-ca7e-43c8-9ba6-3edccc99421f">Exhibit Display
                                                </p>
<figure class="image" id="04b1418d-195f-41e0-acb1-4b58f4bf6899"><a href="https://lh7-us.googleusercontent.com/kH8bS-7JwdXVGcniddms1R9h4_jc6AmgegrfUO1lEcUeq3XBl6J-Acw_BWHEAmGq68yuBdmZ8Mlj31wGAgIe90KmmLOmyhbGzyLaq-L1NeDpn5f6irlcp1JUks7tP8t81NqCnbfPRsV_kiX3KkWmnlQ"><img loading="lazy" src="https://lh7-us.googleusercontent.com/kH8bS-7JwdXVGcniddms1R9h4_jc6AmgegrfUO1lEcUeq3XBl6J-Acw_BWHEAmGq68yuBdmZ8Mlj31wGAgIe90KmmLOmyhbGzyLaq-L1NeDpn5f6irlcp1JUks7tP8t81NqCnbfPRsV_kiX3KkWmnlQ" style="width:602px"/></a>
</figure>
<p class="" id="f2ae9ac8-727d-4c15-a297-1b1b34dcb7d1">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="62506256-393f-40d9-a38b-bd96399e5781">ExistingMy
                                                    Notebook</p>
<p class="" id="81265bd3-49c2-458e-b19a-fbc1037c349f">Exhibit Display
                                                </p>
<figure class="image" id="25e697d4-f7a6-4109-8cb8-06515ca46629"><a href="https://lh7-us.googleusercontent.com/ZNgvpobCEpRNl36dS4t44wxeQvnrMBbwAthwUU2qrPWQFL9F0qJNxQTQYsAojLxn672AqJdX3MRtArmUpPsxaHhR0Ec_l9cvTGb609Hxoj3WW2UAKniOwrx6WIreV79Mkq_BGs15HAlE8x99Ug4MR0w"><img loading="lazy" src="https://lh7-us.googleusercontent.com/ZNgvpobCEpRNl36dS4t44wxeQvnrMBbwAthwUU2qrPWQFL9F0qJNxQTQYsAojLxn672AqJdX3MRtArmUpPsxaHhR0Ec_l9cvTGb609Hxoj3WW2UAKniOwrx6WIreV79Mkq_BGs15HAlE8x99Ug4MR0w" style="width:602px"/></a>
</figure>
<p class="" id="a73ae5ce-c5ad-4648-a41e-6becb4c1455e">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="a40ab933-3f3d-4d5b-af38-69ba0c7a2205">ExistingMy
                                                    Notebook</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
