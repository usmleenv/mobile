
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>15200</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="ac1eb842-b87d-400d-b35c-2410a7e6f07b">A 76-year-old man comes to the
                                        office due to bilateral flank pain and nausea.  The patient has not urinated for
                                        24 hours.  Medical history is significant for diet-controlled type 2 diabetes
                                        and degenerative arthritis of the knee.  He occasionally takes naproxen for
                                        pain.  Temperature is 36.9 C (98.4 F), blood pressure is 140/90 mm Hg, and pulse
                                        is 90/min.  Cardiopulmonary examination reveals no abnormalities.  Abdominal
                                        examination shows suprapubic fullness.  Mild bilateral costovertebral angle
                                        tenderness is present.  Laboratory results show a blood urea nitrogen level of
                                        32 mg/dL and creatinine level of 2.6 mg/dL.  Four weeks ago, laboratory studies
                                        were normal.  Which of the following is the most likely cause of this
                                        patient's renal dysfunction?</p>
<table class="simple-table" id="bdfb1da7-342d-477d-920d-7ddea4525a9c">
<tbody>
<tr id="e4932274-b834-4f0f-a41e-e4c5448d323c">
<td class="" id="~gF_">A.</td>
<td class="" id="`nA`">Diabetic nephropathy</td>
<td class="" id="rvTw"></td>
</tr>
<tr id="2ac19815-d00f-4d49-9cee-cdaaba0899ff">
<td class="" id="~gF_">B.</td>
<td class="" id="`nA`">Interstitial nephritis</td>
<td class="" id="rvTw"></td>
</tr>
<tr id="084877d2-45f3-4df3-876c-2b162ffe0692">
<td class="" id="~gF_">C.</td>
<td class="" id="`nA`">Renal tubule injury due to ischemia</td>
<td class="" id="rvTw"></td>
</tr>
<tr id="44ee278d-90a1-476e-b02a-707ec5d0549c">
<td class="" id="~gF_">D.</td>
<td class="" id="`nA`">Renal tubule injury due to protein casts</td>
<td class="" id="rvTw"></td>
</tr>
<tr id="1c12e02b-2343-4555-964e-9247541c1e6d">
<td class="" id="~gF_">E.</td>
<td class="" id="`nA`">Urethral compression</td>
<td class="" id="rvTw"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="e02bfc99-2279-4ccc-a6e9-0b8c802c30f4">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="b4c020c8-b60b-4227-8e59-5b233e3c9efd">
<tbody>
<tr id="f9551338-d7c7-4f3b-a460-62c6f6e925d9">
<td class="" id="[[kR">A.</td>
<td class="" id="Ce}n">Diabetic nephropathy (7%)</td>
<td class="" id="kNOx"></td>
</tr>
<tr id="12da23e8-7609-4ee4-a50b-6ad312ef82e6">
<td class="" id="[[kR">B.</td>
<td class="" id="Ce}n">Interstitial nephritis (21%)</td>
<td class="" id="kNOx"></td>
</tr>
<tr id="dc5a9ddc-693a-4a5b-afcd-a2c71f2878ae">
<td class="" id="[[kR">C.</td>
<td class="" id="Ce}n">Renal tubule injury due to ischemia
                                                                (12%)</td>
<td class="" id="kNOx"></td>
</tr>
<tr id="c4f203e1-52da-4cb7-9343-1910e68923d4">
<td class="" id="[[kR">D.</td>
<td class="" id="Ce}n">Renal tubule injury due to protein
                                                                casts (4%)</td>
<td class="" id="kNOx"></td>
</tr>
<tr id="2c3f85b2-b59b-4ca5-aad8-46cf2a6cfb29">
<td class="" id="[[kR">E.</td>
<td class="" id="Ce}n">Urethral compression (54%)</td>
<td class="" id="kNOx"></td>
</tr>
</tbody>
</table>
<p class="" id="e49b99a2-08f6-4b21-af1c-ee8d62a54f15">Incorrect</p>
<p class="" id="52d9183e-7509-4898-9ca2-f1d3ca7a2b01">Correct answer E
                                                </p>
<p class="" id="3b351244-3673-41c6-91cc-a7c17b5484e5">54%Answered
                                                    correctly</p>
<p class="" id="c82a6e37-9847-4f80-8bb8-301160463a18">10 secsTime Spent
                                                </p>
<p class="" id="7ce9abaa-7c63-47a4-a81c-5a6122852db5">2024Version</p>
<ul class="bulleted-list" id="d4a6e213-dda5-432f-a178-0902c59edbe2">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="57b29f84-493b-40e1-b894-107cff1f794b">
<li style="list-style-type:disc"></li>
</ul>
<figure class="image" id="00573e68-131a-46ac-87da-dbbc42bae0c1"><a href="https://lh7-us.googleusercontent.com/GQlPT4_jx98GDVxbqd3qOENfu3B2oidod5qeWXRVA6r0nlJxq8pKjOa79JkCYqVF7eYQmYHTacA4id_ebplbZe9h2_gyjWTMFuHAVlExQBCUG-QpXFZuY8yDgC1vnXccKf3BVBeIe6EahSQVhqpa0KQ"><img loading="lazy" src="https://lh7-us.googleusercontent.com/GQlPT4_jx98GDVxbqd3qOENfu3B2oidod5qeWXRVA6r0nlJxq8pKjOa79JkCYqVF7eYQmYHTacA4id_ebplbZe9h2_gyjWTMFuHAVlExQBCUG-QpXFZuY8yDgC1vnXccKf3BVBeIe6EahSQVhqpa0KQ" style="width:602px"/></a>
</figure>
<p class="" id="ff4ca0af-d36e-4cef-ab5c-7845c99bb6a9">This patient with
                                                    anuria and suprapubic fullness (suggesting a distended bladder) has
                                                    acute urinary retention (AUR).  AUR is characterized by the
                                                    inability to voluntarily micturate, which leads to suprapubic pain
                                                    with bladder distension, often palpable above the pelvic brim.  As
                                                    urine refluxes into the ureters and kidneys, dilation of the
                                                    ureters, renal pelvis, and calyces (hydronephrosis) results in acute
                                                    kidney injury, bilateral flank pain, and costovertebral angle
                                                    tenderness.  Elevations in creatinine and blood urea nitrogen are
                                                    also common, but the ratio between the two is variable.</p>
<p class="" id="b30621b7-ae47-4222-bd32-784b6adc68e7">Etiologies of AUR
                                                    include:</p>
<ul class="bulleted-list" id="9de4e712-8592-4cd1-993c-4abe0e39f528">
<li style="list-style-type:disc">Bladder outlet obstruction: By far
                                                        the most common cause of urinary retention, bladder outlet
                                                        obstructions are precipitated by urethral compression typically
                                                        due to benign prostatic hyperplasia, particularly in men age
                                                        &gt;50. Other etiologies include transitional cell carcinoma and
                                                        rectal or uterine malignancy.</li>
</ul>
<ul class="bulleted-list" id="029b5937-33ed-410f-a561-5424f03fc0c8">
<li style="list-style-type:disc">Medications: AUR is commonly caused
                                                        by anticholinergic medications (eg, oxybutynin, atropine) and
                                                        sympathomimetics (eg, pseudoephedrine).</li>
</ul>
<ul class="bulleted-list" id="842fb2c9-c144-4d74-9b03-7fba96505e8b">
<li style="list-style-type:disc">Neurologic dysfunction: Diabetic
                                                        neuropathy, spinal cord injury, and stroke can result in a
                                                        neurogenic bladder.</li>
</ul>
<p class="" id="c3ca7d0e-f75b-4171-91a3-110710f36346">(Choice A) 
                                                    Diabetic nephropathy typically presents with proteinuria and chronic
                                                    kidney disease rather than acute anuria with bilateral flank pain. 
                                                    This patient had normal baseline renal function 4 weeks ago, ruling
                                                    out chronic kidney disease.</p>
<p class="" id="843eb804-a40e-4241-b1bd-d39074f38902">(Choice B) 
                                                    Interstitial nephritis sometimes occurs after the introduction of
                                                    new medications, such as antibiotics or nonsteroidal
                                                    anti-inflammatory drugs; however, it is often accompanied by fever
                                                    and rash, neither of which is present in this patient.  In addition,
                                                    although interstitial nephritis can present with oliguria, an overly
                                                    distended bladder would not be characteristic.</p>
<p class="" id="e07dbcf9-676d-4681-9c55-b2caca992197">(Choices C and D) 
                                                    Ischemia (eg, due to hypotension) can cause tubular necrosis. 
                                                    Abundant protein casts can form in multiple myeloma, leading to
                                                    obstruction and necrosis of the renal tubules.  Both cause intrinsic
                                                    renal injury with an elevation in creatinine; however, a distended
                                                    bladder would be unexpected.</p>
<p class="" id="b79b191d-4d5b-4bc6-b3a3-7af303181719">Educational
                                                    objective:</p>
<p class="" id="386c2ab9-54ef-4806-901e-559c9fbff36d">Acute urinary
                                                    retention is characterized by anuria and bladder distension and can
                                                    result in hydronephrosis and acute kidney injury.  A palpable,
                                                    distended bladder is present on examination, and abdominal and flank
                                                    pain may be present.  The most common cause of urinary retention is
                                                    bladder outlet obstruction (urethral compression) due to benign
                                                    prostatic hyperplasia.</p>
<p class="" id="cbef3254-bd63-487f-98b1-491f7bfb2194">References</p>
<ul class="bulleted-list" id="2142fb66-c71d-4bfe-ab6f-8f68365540de">
<li style="list-style-type:disc"><a href="http://www.ncbi.nlm.nih.gov/pubmed/30277739">Urinary
                                                            retention in adults: evaluation and initial management.</a>
</li>
</ul>
<ul class="bulleted-list" id="0e8be874-82d6-4d3b-b046-eefde02fbe98">
<li style="list-style-type:disc"><a href="http://www.ncbi.nlm.nih.gov/pubmed/24744516">Epidemiology
                                                            and etiology of benign prostatic hyperplasia and bladder
                                                            outlet obstruction.</a></li>
</ul>
<p class="" id="97e0ad1f-8ce0-4e4f-b061-8fdd35665b06">Pathology</p>
<p class="" id="6d4213c3-dcbe-4204-95d2-9b160de37353">Subject</p>
<p class="" id="597ab64f-ae64-4c03-8f69-dee432a8aad9">Renal, Urinary
                                                    Systems &amp; Electrolytes</p>
<p class="" id="111a8209-fe57-4067-a007-eae1be5c6ba8">System</p>
<p class="" id="ee2050c0-ee2d-4e36-a48e-73db11cf0590">Urinary tract
                                                    obstruction</p>
<p class="" id="92dee88f-e756-4a17-bcb0-cc7eb824421f">Topic</p>
<p class="" id="424c9175-9b79-4ecd-99f8-301fc5aeea09">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="8ea436d5-9aa1-4ec9-a710-2b4c1f959879">‚ùåüÖ±Ô∏è1üÖ∞Ô∏è1üîç1 ~üïí1
                                                    sec</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }


    


    

    /* Adjust table padding to make room for radio button */
    


    /* Clickable Answer Choices */
    table tr.answer-choice {
        cursor: pointer !important;
        transition: all 0.3s ease !important;
    }

    table tr.answer-choice:hover {
        background: #f8f9fa !important;
    }

    table tr.answer-choice td:first-child {
        position: relative !important;
        padding-left: 35px !important;
    }

    table tr.answer-choice td:first-child::before {
        content: '';
        position: absolute;
        left: 8px;
        top: 50%;
        transform: translateY(-50%);
        width: 16px;
        height: 16px;
        border: 2px solid #999;
        border-radius: 50%;
        background: white;
        transition: all 0.2s ease;
        box-sizing: border-box;
    }

    table tr.answer-choice.selected td:first-child::before {
        border-color: #1a73e8;
        border-width: 5px;
    }

    table tr.answer-choice.selected {
        background: #e8f4ff !important;
    }

    table tr.answer-choice.selected td:first-child {
        color: #1a73e8 !important;
        font-weight: 600 !important;
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>





<script>
(function() {
    // Get question ID from summary
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Communicate with parent window (if in iframe)
    function notifyParent(choice) {
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'choiceSelected',
                questionId: getQuestionId(),
                choice: choice
            }, '*');
        }
    }

    // Load saved choice from parent or localStorage
    function loadSavedChoice() {
        const questionId = getQuestionId();

        // Try to get from localStorage first
        const saved = localStorage.getItem('choice_q' + questionId);
        if (saved) {
            selectChoice(saved, false);
        }

        // Ask parent for saved choice (if in iframe)
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'getChoice',
                questionId: questionId
            }, '*');
        }
    }

    // Listen for messages from parent
    window.addEventListener('message', function(event) {
        if (event.data.type === 'setChoice' && event.data.questionId === getQuestionId()) {
            selectChoice(event.data.choice, false);
        }
    });

    // Select a choice
    function selectChoice(choice, notify = true) {
        if (!choice) return;

        const questionId = getQuestionId();

        // Remove previous selection
        document.querySelectorAll('tr.answer-choice').forEach(row => {
            row.classList.remove('selected');
        });

        // Add selection to clicked choice
        const choiceRow = document.querySelector(`tr.answer-choice[data-choice="${choice}"]`);
        if (choiceRow) {
            choiceRow.classList.add('selected');

            // Save to localStorage
            localStorage.setItem('choice_q' + questionId, choice);

            // Notify parent (if in iframe)
            if (notify) {
                notifyParent(choice);
            }
        }
    }

    // Initialize answer choices
    function initializeChoices() {
        // Find all answer choice rows (A, B, C, D, E, F, etc.)
        const choicePattern = /^[A-Z]\.$/;
        const tables = document.querySelectorAll('table.simple-table');

        tables.forEach(table => {
            const rows = table.querySelectorAll('tr');
            rows.forEach(row => {
                const firstCell = row.querySelector('td:first-child');
                if (firstCell && choicePattern.test(firstCell.textContent.trim())) {
                    const choice = firstCell.textContent.trim().replace('.', '');
                    row.classList.add('answer-choice');
                    row.setAttribute('data-choice', choice);
                    row.style.position = 'relative';

                    // Add click handler
                    row.addEventListener('click', function(e) {
                        // Don't trigger if clicking inside a link or button
                        if (e.target.tagName === 'A' || e.target.closest('a')) return;

                        // Toggle selection
                        if (this.classList.contains('selected')) {
                            this.classList.remove('selected');
                            const questionId = getQuestionId();
                            localStorage.removeItem('choice_q' + questionId);
                            notifyParent('');
                        } else {
                            selectChoice(choice);
                        }
                    });
                }
            });
        });

        // Load saved choice after a short delay
        setTimeout(loadSavedChoice, 100);
    }

    // Run when page loads
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeChoices);
    } else {
        initializeChoices();
    }
})();
</script>
