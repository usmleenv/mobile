
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>15243</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="2095ac74-d808-4975-a474-3cacb51f4b6d">A 5-year-old girl is brought
                                        to the office by her mother due to 2 weeks of anorexia, nausea, epigastric
                                        discomfort, and loose bowel movements.  She has had no fever or bloody stools. 
                                        The patient recently returned from rural Brazil, where she spent the summer with
                                        family.  She had no gastrointestinal symptoms during the trip but developed
                                        intensely pruritic eruptions between the toes of her right foot.  The skin rash
                                        spontaneously resolved within a few days and was attributed to insect bites from
                                        walking barefoot in the fields.  The patient has no prior medical conditions,
                                        takes no medications, and has received all age-appropriate vaccinations.  On
                                        physical examination, the abdomen is soft and nontender with normoactive bowel
                                        sounds.  Stool microscopy reveals smooth, thin-walled eggs.  If left untreated,
                                        this patient's condition can lead to which of the following complications?
                                    </p>
<table class="simple-table" id="6a6d5e76-2015-4387-9dbd-d3e22dd4033f">
<tbody>
<tr id="c6730ff3-1be2-4f82-bb56-22f1c8e6a0da">
<td class="" id="ZI}f">A.</td>
<td class="" id="@v;K">Chronic lymphedema</td>
<td class="" id="aHED"></td>
</tr>
<tr id="94ad5585-685d-40e1-b8cc-41e632570e72">
<td class="" id="ZI}f">B.</td>
<td class="" id="@v;K">Dilated cardiomyopathy</td>
<td class="" id="aHED"></td>
</tr>
<tr id="08e16af4-92fa-4009-9085-5496ed9036ca">
<td class="" id="ZI}f">C.</td>
<td class="" id="@v;K">Granulomatous endophthalmitis</td>
<td class="" id="aHED"></td>
</tr>
<tr id="ee2d036d-1f08-4abd-affa-14bc32de1605">
<td class="" id="ZI}f">D.</td>
<td class="" id="@v;K">Microcytic anemia</td>
<td class="" id="aHED"></td>
</tr>
<tr id="b47be066-da59-4e4a-9073-583b4d1f5929">
<td class="" id="ZI}f">E.</td>
<td class="" id="@v;K">Vitamin B12 deficiency</td>
<td class="" id="aHED"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="44b9a772-b32d-439c-9155-2e1bc6995356">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="2477741a-2f41-46cd-85c2-83fa0aa2e38d">
<tbody>
<tr id="4867f193-8b5b-440c-88b4-b5348807d0ed">
<td class="" id=";z}l">A.</td>
<td class="" id="JWzo">Chronic lymphedema (9%)</td>
<td class="" id="Ee}r"></td>
</tr>
<tr id="04e697fb-6543-4aef-bc1f-6d9d1721fa0f">
<td class="" id=";z}l">B.</td>
<td class="" id="JWzo">Dilated cardiomyopathy (13%)</td>
<td class="" id="Ee}r"></td>
</tr>
<tr id="d2ac9d13-ec67-491f-812b-125de3d37091">
<td class="" id=";z}l">C.</td>
<td class="" id="JWzo">Granulomatous endophthalmitis (6%)
                                                            </td>
<td class="" id="Ee}r"></td>
</tr>
<tr id="b3e098ad-9b05-4ccd-a5cd-f7a0ac6e6518">
<td class="" id=";z}l">D.</td>
<td class="" id="JWzo">Microcytic anemia (50%)</td>
<td class="" id="Ee}r"></td>
</tr>
<tr id="f734fb21-1158-439a-86dd-36c75e686581">
<td class="" id=";z}l">E.</td>
<td class="" id="JWzo">Vitamin B12 deficiency (21%)</td>
<td class="" id="Ee}r"></td>
</tr>
</tbody>
</table>
<p class="" id="97dc02ed-67a0-4659-adf1-8709994d2bcc">Incorrect</p>
<p class="" id="b2aacf33-984f-4f6b-b285-e2923d7d7a78">Correct answer D
                                                </p>
<p class="" id="55077b36-50d8-424a-868f-b7c08e403006">50%Answered
                                                    correctly</p>
<p class="" id="e4e7e3bf-ade8-4165-8a74-3696e6653f35">12 secsTime Spent
                                                </p>
<p class="" id="65027087-c497-4cb8-9b42-5a8189456597">2024Version</p>
<ul class="bulleted-list" id="454905bf-8c82-4cf4-b53d-599ecbc923df">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="a52ce4ba-234e-4508-bc53-ccfae254271d">
<li style="list-style-type:disc"></li>
</ul>
<figure class="image" id="7e841538-2dd5-4c28-a6a8-621dab72f9d3"><a href="https://lh7-us.googleusercontent.com/7v9affWj58njaGd9YJGDivL2D89PCLFhPfF-kNPrkd-AsifAKEd1v-sZB93-CXoUUcafykXY_knvKqw2NsDohUfRVuFyJZfsthrwg52F493CBkI2VXxEONVqY2ACgUOXZnGbsVabCG_qZHPeqZIvXSM"><img loading="lazy" src="https://lh7-us.googleusercontent.com/7v9affWj58njaGd9YJGDivL2D89PCLFhPfF-kNPrkd-AsifAKEd1v-sZB93-CXoUUcafykXY_knvKqw2NsDohUfRVuFyJZfsthrwg52F493CBkI2VXxEONVqY2ACgUOXZnGbsVabCG_qZHPeqZIvXSM" style="width:602px"/></a>
</figure>
<p class="" id="08ac8155-ed15-48e1-8d23-c470901cf279">Human hookworm
                                                    infection is caused by <em>Necator americanus</em> and
                                                    <em>Ancylostoma duodenale</em>.  These pathogens are called
                                                    hookworms because the head of the worm is often curved away from the
                                                    body, giving the organism a "hooked" appearance.  Most
                                                    cases occur in tropical and subtropical regions where sanitation is
                                                    poor.  Transmission occurs when egg-containing human feces is
                                                    deposited into shady, warm, moist soil, which allows the eggs to
                                                    hatch into larvae.  Spread occurs when larvae come into direct
                                                    contact with human skin (eg, when walking barefoot).</p>
<p class="" id="3eaab592-811a-455b-97e8-1fe82b731e53">Dermal penetration
                                                    often results in a transient, pruritic, maculopapular or serpiginous
                                                    rash at the entry site.  The larvae then spread through the
                                                    bloodstream to the lungs, where they rupture into the alveoli and
                                                    are subsequently coughed up and swallowed.  In the small intestine,
                                                    the larvae mature into adults, attach to the gastrointestinal
                                                    mucosa, and feed on human blood by lacerating capillaries.  Because
                                                    these organisms can live in the gastrointestinal tract for up to 14
                                                    years, total blood loss can be substantial.  Therefore, the biggest
                                                    risk of hookworm infection is iron-deficiency anemia (microcytic
                                                    anemia) due to chronic blood loss.</p>
<p class="" id="b56ec398-e5bb-4868-8399-15e696318e3a">Although many
                                                    patients with hookworm infection are asymptomatic for months or
                                                    years, some individuals develop transient pulmonary symptoms (eg,
                                                    cough) during pulmonary migration or gastrointestinal symptoms (eg,
                                                    nausea, vomiting, diarrhea) during gastrointestinal migration. 
                                                    Diagnosis is generally made when smooth, thin-walled hookworm eggs
                                                    are identified by stool microscopy.  Peripheral eosinophilia is also
                                                    an important diagnostic clue.</p>
<p class="" id="55901dcf-714a-4093-abd8-79056c2e967d">(Choice A) 
                                                    Lymphatic filariasis is a mosquito-borne illness caused by
                                                    roundworms (eg, <em>Wuchereria bancrofti</em>).  Most patients are
                                                    infected in childhood and remain asymptomatic, but a minority
                                                    develops chronic lymphedema, which may result in elephantiasis. 
                                                    Eggs are not present in stool; diagnosis is made by serology or by
                                                    identifying worms in the lymphatic system.</p>
<p class="" id="b1ec539f-c618-428f-a888-947b074901ae">(Choice B)  Chagas
                                                    disease is linked to dilated cardiomyopathy and is most common in
                                                    Latin America.  It is caused by the protozoa <em>Trypanosoma
                                                        cruzi</em>.  Transmission occurs during a triatomine bug bite. 
                                                    Although transient skin and gastrointestinal symptoms can occur
                                                    during acute infection, eggs are not seen in the stool; diagnosis is
                                                    made mostly by serology or by blood microscopy.</p>
<p class="" id="02114e0d-5b60-4a18-964d-859585da4cb2">(Choice C) 
                                                    Toxocariasis is caused by infection with dog or cat roundworms. 
                                                    Migrating larva cause a significant eosinophilic granulomatous
                                                    response that can result in ocular (endophthalmitis) and organ
                                                    damage.  Diagnosis is made by serology; the organism does not shed
                                                    eggs in the gastrointestinal tract.</p>
<p class="" id="94c67819-9d04-47ec-a351-5871228b0a81">(Choice E) 
                                                    Diphyllobothriasis is caused by infection with a fish tapeworm and
                                                    is classically linked with megaloblastic anemia due to vitamin B12
                                                    deficiency.  Although the eggs can be seen on stool microscopy, they
                                                    are distinguished by a lid-like opening (operculum).  In addition, a
                                                    transient skin rash would not be a feature of this disease.</p>
<p class="" id="aaedf5ea-fdff-47f8-8b9f-3096065610c7">Educational
                                                    objective:</p>
<p class="" id="0487a7f0-d7fb-4fe6-b226-5f5c6b204146">Hookworms are
                                                    transmitted when human skin comes into contact with soil
                                                    contaminated with human feces.  The larvae penetrate the skin,
                                                    travel to the lungs, are coughed up, and then subsequently
                                                    swallowed.  Adult hookworms live in the small intestine and feed on
                                                    human blood.  Therefore, chronic iron deficiency anemia (microcytic
                                                    anemia) is the greatest complication.</p>
<p class="" id="0dead9cd-3acc-4995-87fb-dedbaeaffa0c">References</p>
<ul class="bulleted-list" id="ffad2721-9e6e-4dea-b161-fae771c13f74">
<li style="list-style-type:disc"><a href="http://www.ncbi.nlm.nih.gov/pubmed/28882382">Soil-transmitted
                                                            helminth infections.</a></li>
</ul>
<p class="" id="7e5e2535-d8fa-4bd3-ba90-15671562e341">Microbiology</p>
<p class="" id="1a0e1e69-f9f0-41bf-a851-40e94a382bfc">Subject</p>
<p class="" id="149e47e3-301b-4a04-a4c5-0b3263b36ce3">Infectious
                                                    Diseases</p>
<p class="" id="f3941c43-716f-43b0-8d65-c12c06940970">System</p>
<p class="" id="2419f453-c07d-4a8c-afc7-bc2d2f0a6556">Hookworm</p>
<p class="" id="34481d07-2529-4925-ad85-0860017bb953">Topic</p>
<p class="" id="a9eb012b-be19-4634-80c6-63d0c546965a">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="c9eb18d8-f947-4262-b63f-2bc48254a409">‚ú®Done</p>
<p class="" id="da7aad87-9c4a-459a-b253-e53dbfb250f0">Exhibit Display
                                                </p>
<figure class="image" id="62b15232-585c-426d-b37d-66ed85e1e45c"><a href="https://lh7-us.googleusercontent.com/4_abQx1SFopqcgffY0K2jmgHF4o_d83U_y0FITwNdvhxATxqAFSlZ4LyjIPWWUAyvNl26LJsuSG9df88CG5TrIVMbh4QEUplJ8tcUMM0ZaHG-QlT0p7MEShOQw8x_igxWF2OiN873qWlO7L5o0pDzd8"><img loading="lazy" src="https://lh7-us.googleusercontent.com/4_abQx1SFopqcgffY0K2jmgHF4o_d83U_y0FITwNdvhxATxqAFSlZ4LyjIPWWUAyvNl26LJsuSG9df88CG5TrIVMbh4QEUplJ8tcUMM0ZaHG-QlT0p7MEShOQw8x_igxWF2OiN873qWlO7L5o0pDzd8" style="width:602px"/></a>
</figure>
<p class="" id="8aef3e4c-4fa4-49d2-a5d1-25b7a42bc52d">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="10e947f6-0f6f-49cf-b8a0-2c64305910ed">ExistingMy
                                                    Notebook</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
