
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>15291</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="174726da-3f1e-44ba-8040-7cc2157bfbb3">A 56-year-old man with chronic
                                        renal insufficiency due to polycystic kidney disease is evaluated for placement
                                        of an arteriovenous fistula for dialysis access.  Blood pressure is 140/90 mm Hg
                                        and pulse is 80/min.  Examination shows 2+ bilateral edema of the lower
                                        extremities.  Estimated glomerular filtration rate is 15 mL/min/1.73 m2.  Which
                                        of the following sets of laboratory findings is most likely in this patient?</p>
<table class="simple-table" id="97794499-7e6b-4cc9-9135-ffe16c2a01a6">
<tbody>
<tr id="efd81b8a-dbae-4c29-9436-70b90874149e">
<td class="" id="p}hS"><strong>Alternative</strong></td>
<td class="" id="XVJM"><strong>Parathyroid Hormone</strong></td>
<td class="" id="Eq@r"><strong>Serum Calcium</strong></td>
<td class="" id="XAOS"><strong>Serum Phosphorus</strong></td>
<td class="" id="=Ai{"><strong>25-hydroxyvitamin D</strong></td>
<td class="" id="YRdO"><strong>1,25-dihydroxyvitamin D</strong></td>
</tr>
<tr id="f1840e60-7972-4527-ae7b-20fb6f3c5990">
<td class="" id="p}hS">A</td>
<td class="" id="XVJM">‚Üë</td>
<td class="" id="Eq@r">‚Üì</td>
<td class="" id="XAOS">‚Üë</td>
<td class="" id="=Ai{">Normal</td>
<td class="" id="YRdO">‚Üì</td>
</tr>
<tr id="1e608345-9932-4185-a10f-9ec70f11c4e9">
<td class="" id="p}hS">B</td>
<td class="" id="XVJM">‚Üë</td>
<td class="" id="Eq@r">‚Üë</td>
<td class="" id="XAOS">‚Üì</td>
<td class="" id="=Ai{">Normal</td>
<td class="" id="YRdO">‚Üë</td>
</tr>
<tr id="370baf2b-99f8-4c40-879f-032e20f768bb">
<td class="" id="p}hS">C</td>
<td class="" id="XVJM">‚Üì</td>
<td class="" id="Eq@r">‚Üì</td>
<td class="" id="XAOS">‚Üë</td>
<td class="" id="=Ai{">Normal</td>
<td class="" id="YRdO">‚Üì</td>
</tr>
<tr id="daa42757-ee77-468b-bc62-94a6eb9ad785">
<td class="" id="p}hS">D</td>
<td class="" id="XVJM">‚Üë</td>
<td class="" id="Eq@r">‚Üì</td>
<td class="" id="XAOS">‚Üì</td>
<td class="" id="=Ai{">‚Üì</td>
<td class="" id="YRdO">‚Üì</td>
</tr>
<tr id="7d4a402b-e7f1-497b-87f3-be99c8c4b7eb">
<td class="" id="p}hS">E</td>
<td class="" id="XVJM">‚Üì</td>
<td class="" id="Eq@r">‚Üë</td>
<td class="" id="XAOS">‚Üë</td>
<td class="" id="=Ai{">Normal</td>
<td class="" id="YRdO">‚Üë</td>
</tr>
</tbody>
</table>
<ul class="toggle" id="82fb5414-186d-4185-b0c0-53eabb710817">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="932e1d93-253d-4e7c-aa79-d2077aedebe3">
<tbody>
<tr id="0dd1e55f-9258-40ee-930e-8a535d51d700">
<td class="" id="Yj_U">Parathyroid hormoneSerum calciumSerum
                                                                phosphorus25-hydroxyvitamin D1,25-dihydroxyvitamin D
                                                            </td>
<td class="" id="xSmS"></td>
<td class="" id="|w|J"></td>
</tr>
<tr id="87d3c679-5307-46a7-a31e-c26710d3adc3">
<td class="" id="Yj_U">A.</td>
<td class="" id="xSmS">‚Üë‚Üì‚ÜëNormal‚Üì<br/> (78%)<br/></td>
<td class="" id="|w|J"></td>
</tr>
<tr id="45e1e55b-dd2d-46f2-ae90-e014573a1244">
<td class="" id="Yj_U">B.</td>
<td class="" id="xSmS">‚Üë‚Üë‚ÜìNormal‚Üë<br/> (5%)<br/></td>
<td class="" id="|w|J"></td>
</tr>
<tr id="f37f1742-962b-42c2-933b-909bc6e9bbce">
<td class="" id="Yj_U">C.</td>
<td class="" id="xSmS">‚Üì‚Üì‚ÜëNormal‚Üì<br/> (5%)<br/></td>
<td class="" id="|w|J"></td>
</tr>
<tr id="0eaeb3c9-59e2-4028-9fe2-06840a090d28">
<td class="" id="Yj_U">D.</td>
<td class="" id="xSmS">‚Üë‚Üì‚Üì‚Üì‚Üì<br/> (8%)<br/></td>
<td class="" id="|w|J"></td>
</tr>
<tr id="50dc40b3-0140-424c-baad-4598cb414dc2">
<td class="" id="Yj_U">E.</td>
<td class="" id="xSmS">‚Üì‚Üë‚ÜëNormal‚Üë<br/> (2%)<br/></td>
<td class="" id="|w|J"></td>
</tr>
</tbody>
</table>
<p class="" id="077e20ce-a07d-415b-b401-676f5db39684">Incorrect</p>
<p class="" id="57909bc6-c4d3-43f5-9a0d-ed9e49571141">Correct answer A
                                                </p>
<p class="" id="1d7a1c9c-a730-4bc7-bf5d-7a1942ca124c">78%Answered
                                                    correctly</p>
<p class="" id="333b21f3-6208-4b55-83d9-03439597c9f3">32 secsTime Spent
                                                </p>
<p class="" id="616bd306-58b7-40f2-a1dc-fc3ec3b60f46">2024Version</p>
<ul class="bulleted-list" id="f712f3ba-2dc6-4c4e-9d1a-22266ce1c17d">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="638281f5-2ac9-4e0c-96a4-e68ef65724b7">
<li style="list-style-type:disc"></li>
</ul>
<figure class="image" id="0ebd9949-838c-4a9a-85e1-c214edcdb333"><a href="https://lh7-us.googleusercontent.com/0oxu5OPkphApZOZOc83mhK0RRVx7NfYBDqJUM4j-w9GKqIAp-hM9bl5cGypl5APYexU8h81KwKNGvlF0cSRkx6ndM3ey0kE15giGar9x1xDGaRSp4TquSWqULlwjQq6z7H9joCxnEu5aIjAl1zdKezk"><img loading="lazy" src="https://lh7-us.googleusercontent.com/0oxu5OPkphApZOZOc83mhK0RRVx7NfYBDqJUM4j-w9GKqIAp-hM9bl5cGypl5APYexU8h81KwKNGvlF0cSRkx6ndM3ey0kE15giGar9x1xDGaRSp4TquSWqULlwjQq6z7H9joCxnEu5aIjAl1zdKezk" style="width:447px"/></a>
</figure>
<p class="" id="7a423e29-8360-4d3c-9432-793fdfea9a97">This patient has
                                                    advanced chronic kidney disease (CKD).  CKD can cause
                                                    hyperphosphatemia due to the impaired ability of the kidneys to
                                                    excrete phosphorus (particularly when GFR is &lt;20 mL/min/1.73
                                                    m2).  Elevated blood phosphate triggers the release of fibroblast
                                                    growth factor 23 from bone, which lowers calcitriol
                                                    (1,25-dihydroxyvitamin D) production and intestinal calcium
                                                    absorption.  In addition, patients with advanced CKD typically have
                                                    decreased renal conversion of 25-hydroxyvitamin D to
                                                    1,25-dihydroxyvitamin D (the more active form) because of inadequate
                                                    function of renal tissue.  The resulting hypocalcemia, along with
                                                    hyperphosphatemia, stimulates the secretion of parathyroid hormone
                                                    (PTH) and leads to secondary hyperparathyroidism.</p>
<p class="" id="dbd7bab7-7b7a-4867-ab26-60c263a9745a">(Choice B) 
                                                    Primary hyperparathyroidism is characterized by hypercalcemia,
                                                    hypophosphatemia (due to increased renal excretion of phosphorus),
                                                    and increased renal production of 1,25-dihydroxyvitamin D.  In
                                                    secondary hyperparathyroidism due to CKD, PTH is high but serum
                                                    phosphate is elevated and hypercalcemia would not be seen.</p>
<p class="" id="42eb20b4-1b23-42eb-9cd6-506cc3744b33">(Choice C) 
                                                    Hypoparathyroidism is characterized by hypocalcemia,
                                                    hyperphosphatemia, and decreased renal production of
                                                    1,25-dihydroxyvitamin D.  Hypoparathyroidism is usually caused by
                                                    autoimmune disease or iatrogenic injury to the parathyroid glands
                                                    during neck surgery.</p>
<p class="" id="f55311b4-41c7-4bf2-a934-53358cadde70">(Choice D) 
                                                    Vitamin D deficiency (ie, low 25-hydroxyvitamin D) causes decreased
                                                    absorption of dietary calcium and leads to hypocalcemia.  The
                                                    resulting increase in PTH (secondary hyperparathyroidism) causes
                                                    decreased renal reabsorption of phosphate, leading to
                                                    hypophosphatemia.  1,25-Dihydroxyvitamin D levels are typically low,
                                                    although the increased renal conversion due to PTH may restore
                                                    levels to within laboratory norms.</p>
<p class="" id="91f58d8c-bace-44d9-9c11-83be4b1d5013">(Choice E) 
                                                    Elevated 1,25-dihydroxyvitamin D levels can be seen in granulomatous
                                                    diseases (eg, sarcoidosis) and in excess intake of calcitriol
                                                    supplements, and lead to increased intestinal absorption of calcium
                                                    and phosphate (with hypercalcemia and hyperphosphatemia) and
                                                    suppression of PTH.</p>
<p class="" id="173ef11d-8302-4f88-bf4a-6b3ac18af174">Educational
                                                    objective:</p>
<p class="" id="5615837d-3e23-4f09-9728-8e3434e70c74">Chronic kidney
                                                    disease can cause hyperphosphatemia due to impaired renal excretion
                                                    of phosphorus.  Elevated blood phosphate triggers the release of
                                                    fibroblast growth factor 23, which lowers calcitriol production and
                                                    intestinal calcium absorption.  The resulting hypocalcemia, along
                                                    with hyperphosphatemia, leads to secondary hyperparathyroidism.</p>
<p class="" id="d87e66e9-561c-42ad-a585-f36fff244d49">References</p>
<ul class="bulleted-list" id="d7ed1a87-9a0e-4029-8438-469ee12b0de3">
<li style="list-style-type:disc"><a href="http://www.ncbi.nlm.nih.gov/pubmed/29459980">Diagnosis,
                                                            evaluation, prevention, and treatment of chronic kidney
                                                            disease‚Äìmineral and bone disorder: synopsis of the Kidney
                                                            Disease: Improving Global Outcomes 2017 clinical practice
                                                            guideline update.</a></li>
</ul>
<p class="" id="501b9724-1acc-4172-8726-ab855c13c3ea">Physiology</p>
<p class="" id="56d02512-f1b4-467d-82d5-3bdf6b1498f2">Subject</p>
<p class="" id="4f4204f1-54e1-4431-b63f-b0756fa4a96a">Renal, Urinary
                                                    Systems &amp; Electrolytes</p>
<p class="" id="fabed294-b7bc-4c45-a48b-8c1ad8035a00">System</p>
<p class="" id="3f425f67-1860-42ae-be75-70040e2e8fb8">Chronic kidney
                                                    disease</p>
<p class="" id="a82ed213-c0c8-4330-986e-29fd3da290c2">Topic</p>
<p class="" id="4ac64919-f49d-4abf-ad0a-36fd2ac50041">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="c96e7f28-497d-4105-bb10-c90af2089eee">‚ùåelementFinder:
                                                    //a[@href='javascript:void(0)']</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
