
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>16525</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="f42b8e38-3bbe-479b-858a-c9f015977736">A 32-year-old woman, gravida 2
                                        para 1, has a spontaneous vaginal delivery.  Immediately after delivery of the
                                        placenta, the patient has a large amount of vaginal bleeding with passage of
                                        fist-sized clots, findings consistent with postpartum hemorrhage.  A dose of
                                        tranexamic acid is administered.  Which of the following is the most likely
                                        mechanism of action of this drug?</p>
<table class="simple-table" id="492dd5cf-31bc-4cec-b0da-ee7c85b9fd06">
<tbody>
<tr id="e6f53864-af03-435f-a789-0ea5f8079922">
<td class="" id="rYzU">A.</td>
<td class="" id="i}jx">Increases vitamin K‚Äìdependent coagulation factor
                                                    levels</td>
<td class="" id="]u`C"></td>
</tr>
<tr id="2ad79a2a-07d6-4f39-b05b-f2fdb0f571a3">
<td class="" id="rYzU">B.</td>
<td class="" id="i}jx">Induces prostaglandin-mediated smooth muscle
                                                    contraction</td>
<td class="" id="]u`C"></td>
</tr>
<tr id="b2c3cb14-fa16-43fa-9e54-11bf5988fe78">
<td class="" id="rYzU">C.</td>
<td class="" id="i}jx">Inhibits plasminogen cleavage and prevents fibrin
                                                    degradation</td>
<td class="" id="]u`C"></td>
</tr>
<tr id="d5dfc29c-b5b3-4f78-9a60-9f3ad7de9e31">
<td class="" id="rYzU">D.</td>
<td class="" id="i}jx">Promotes endothelial release of von Willebrand
                                                    factor</td>
<td class="" id="]u`C"></td>
</tr>
<tr id="ac75af67-1734-4cba-bfd8-8c42b6aff7bb">
<td class="" id="rYzU">E.</td>
<td class="" id="i}jx">Raises intracellular calcium levels in the
                                                    uterine myometrium</td>
<td class="" id="]u`C"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="be4e929c-f0d9-495c-ac96-1e706ad66d43">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="28175231-500e-4607-b837-3f9be4bb2021">
<tbody>
<tr id="1fb4f194-f375-4961-8be5-060152f3420e">
<td class="" id="xiBo">A.</td>
<td class="" id="xcMS">Increases vitamin K‚Äìdependent
                                                                coagulation factor levels (9%)</td>
<td class="" id="gUOL"></td>
</tr>
<tr id="994c1a72-7f26-48d0-b24c-77195ae2d52e">
<td class="" id="xiBo">B.</td>
<td class="" id="xcMS">Induces prostaglandin-mediated smooth
                                                                muscle contraction (16%)</td>
<td class="" id="gUOL"></td>
</tr>
<tr id="cccdf5c5-c515-426c-b247-ae97e77f35ee">
<td class="" id="xiBo">C.</td>
<td class="" id="xcMS">Inhibits plasminogen cleavage and
                                                                prevents fibrin degradation (61%)</td>
<td class="" id="gUOL"></td>
</tr>
<tr id="f46892e8-0e0d-4ce4-8951-6ec45b5cdb3d">
<td class="" id="xiBo">D.</td>
<td class="" id="xcMS">Promotes endothelial release of von
                                                                Willebrand factor (5%)</td>
<td class="" id="gUOL"></td>
</tr>
<tr id="a85a08fc-6151-4503-a55e-5a2cf8b775bb">
<td class="" id="xiBo">E.</td>
<td class="" id="xcMS">Raises intracellular calcium levels
                                                                in the uterine myometrium (6%)</td>
<td class="" id="gUOL"></td>
</tr>
</tbody>
</table>
<p class="" id="01a461ac-bdb2-440c-bab5-e9a42b48c51b">Incorrect</p>
<p class="" id="583d2cf7-3e86-4f88-9998-9034d9e1b0a1">Correct answer C
                                                </p>
<p class="" id="1dbf3e7b-99ca-47a3-b4d4-5b208e8ef4ac">61%Answered
                                                    correctly</p>
<p class="" id="a7fb3a39-979f-4518-b870-20bcda2dfa1e">13 secsTime Spent
                                                </p>
<p class="" id="b94dced3-0463-46fd-a5c2-b64475ad2ec0">2024Version</p>
<ul class="bulleted-list" id="b111ed0a-7e6d-4a56-85b1-2cc95ca6ca82">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="43e3b77d-08f5-4ad0-9696-fa5bf3eac61b">
<li style="list-style-type:disc"></li>
</ul>
<figure class="image" id="31362e27-ba51-40cf-b5bb-60c55b1c66cc"><a href="https://lh7-us.googleusercontent.com/SU3rILA7zWPduJK6jWoBKT6jjHwd9Zgh3N7keMRfV1UNl9DoGGUDknlbg7qsuwSLaYw3484m30eK55cqUYJE1ukfykglzfgxdVfbijHJBKVW9SQqGlS9vYpAtrnPk-O5WyBSdOMhyOmKe69uBL-0OMs"><img loading="lazy" src="https://lh7-us.googleusercontent.com/SU3rILA7zWPduJK6jWoBKT6jjHwd9Zgh3N7keMRfV1UNl9DoGGUDknlbg7qsuwSLaYw3484m30eK55cqUYJE1ukfykglzfgxdVfbijHJBKVW9SQqGlS9vYpAtrnPk-O5WyBSdOMhyOmKe69uBL-0OMs" style="width:396px"/></a>
</figure>
<p class="" id="007ae658-a8d8-4812-8f62-90dcbd1d5751">This patient has
                                                    postpartum hemorrhage (PPH).  Following placental delivery, maternal
                                                    hemostasis is typically achieved by uterine contraction, which
                                                    constrict bleeding placental bed vessels, and activation of
                                                    coagulation pathways and clot formation at the former placental
                                                    attachment site.  When either mechanism fails, patients may have PPH
                                                    and life-threatening blood loss.  Therefore, medications used to
                                                    treat PPH commonly increase either uterine contractions or clot
                                                    formation.</p>
<p class="" id="c142da40-16ce-4fec-af63-1842899394e1">After placental
                                                    delivery, prothrombotic substances in the decidua (eg, tissue
                                                    factor) activate the extrinsic coagulation cascade, generating
                                                    thrombin that converts fibrinogen into fibrin, forming a fibrin
                                                    clot.  At the same time, the fibrinolytic pathway is also activated:
                                                    tissue plasminogen activator (t-PA) is released by damaged
                                                    endothelium and cleaves plasminogen to form plasmin, which promotes
                                                    bleeding by breaking down fibrin clots into fibrin degradation
                                                    products.</p>
<p class="" id="351cc51c-4028-4b5c-91d5-e18c4c57c9e9">Tranexamic acid
                                                    (TXA) stabilizes thrombi/clots by inhibiting plasmin formation;
                                                    therefore, TXA is an antifibrinolytic medication that provides more
                                                    time for the uterine myometrium to contract and constrict the
                                                    placental bed blood vessels.  The use of TXA for PPH significantly
                                                    decreases bleeding and is associated with improved maternal
                                                    morbidity and mortality.</p>
<p class="" id="e8967953-2509-4210-9367-4d3fe334b5ac">(Choice A) 
                                                    Increasing vitamin K‚Äìdependent coagulation factor levels is the
                                                    mechanism of action for prothrombin complex concentrate (PCC), which
                                                    contains factors II, IX, and X and variable amounts of factor VII. 
                                                    PCC is commonly used to reverse warfarin-induced anticoagulation or
                                                    to treat bleeding due to congenital vitamin K‚Äìdependent coagulation
                                                    factor deficiencies.</p>
<p class="" id="e42bf9bf-2efa-4f07-b786-6ed78a6965aa">(Choices B and E) 
                                                    Agents that cause uterine myometrial contractions are known as
                                                    uterotonic medications.  Misoprostol, a synthetic prostaglandin
                                                    analogue, induces prostaglandin-mediated smooth muscle contraction
                                                    but has a slow onset of action.  In contrast, oxytocin rapidly
                                                    increases intracellular calcium levels in the uterine myometrium;
                                                    because of its rapid onset, is the most common uterotonic
                                                    administered for PPH.</p>
<p class="" id="a4e7bd30-b70d-4aae-8e71-8856aa0b1b99">(Choice D) 
                                                    Promotion of the endothelial release of von Willebrand factor is the
                                                    mechanism of action for desmopressin, which also increases plasma
                                                    levels of factor VIII.  Desmopressin is used in patients with
                                                    bleeding due to von Willebrand disease or mild hemophilia A.</p>
<p class="" id="65fab9f0-9c5e-4b06-aa21-ae1056f0a0e6">Educational
                                                    objective:</p>
<p class="" id="02058358-c994-4020-ad53-0eb2e9798c66">Tranexamic acid
                                                    (TXA) is an antifibrinolytic medication that stabilizes blood clots
                                                    in hemorrhaging patients.  It inhibits plasmin formation, thereby
                                                    preventing fibrin degradation and clot dissolution.  TXA used for
                                                    the treatment of postpartum hemorrhage improves maternal morbidity
                                                    and mortality.</p>
<p class="" id="1e3a0df5-2bcb-4e94-afa5-3e33a516e06f">References</p>
<ul class="bulleted-list" id="cbc472d9-cdf7-4cc0-bf89-11ca5f6bdf58">
<li style="list-style-type:disc"><a href="http://www.ncbi.nlm.nih.gov/pubmed/25571934">Tranexamic
                                                            acid for the prevention and treatment of postpartum
                                                            haemorrhage.</a></li>
</ul>
<ul class="bulleted-list" id="5d26f7bf-17a2-4a72-917f-b22a051cf332">
<li style="list-style-type:disc"><a href="http://www.ncbi.nlm.nih.gov/pubmed/28729903">Tranexamic
                                                            acid and trauma-induced coagulopathy.</a></li>
</ul>
<p class="" id="c7ac1307-7e06-46b9-b016-ab1acd2444ed">Pathophysiology
                                                </p>
<p class="" id="6ef92d91-80ac-44dc-8d39-1f4c5438fffb">Subject</p>
<p class="" id="582b55d5-e775-449e-ab93-9c45bed189b7">Pregnancy,
                                                    Childbirth &amp; Puerperium</p>
<p class="" id="86ecdb60-d54b-4bb4-ba1c-82518c97863d">System</p>
<p class="" id="4ef85ddf-a571-43b2-9810-603837b033bc">Postpartum
                                                    hemorrhage</p>
<p class="" id="8994dca2-8f83-42fe-9515-d25c01fb4c17">Topic</p>
<p class="" id="65305b6e-53cd-4906-aec1-38b320faf2ff">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="6b39d230-a5ae-41ca-94f1-ac1bb70c7459">‚ú®Done</p>
<p class="" id="0d5cfa47-69b8-4577-927f-fcc4810c0289">Exhibit Display
                                                </p>
<figure class="image" id="4a9348be-38c2-4843-9860-e0543fca1750"><a href="https://lh7-us.googleusercontent.com/BXRdRcmcXDrx-5JgcfBMQE2jfKqPE7-hD9As8ooORrcgCpuSWgrpwEWFVpSV39yR2ta8J6N_v5Qlte6gx_PmPog0Si9cI4gjgJRxZH40MvrJqJcXIqJ9PXSlux6Ax1z9U2F6YrFe_yDp4MAxAtNxb5k"><img loading="lazy" src="https://lh7-us.googleusercontent.com/BXRdRcmcXDrx-5JgcfBMQE2jfKqPE7-hD9As8ooORrcgCpuSWgrpwEWFVpSV39yR2ta8J6N_v5Qlte6gx_PmPog0Si9cI4gjgJRxZH40MvrJqJcXIqJ9PXSlux6Ax1z9U2F6YrFe_yDp4MAxAtNxb5k" style="width:602px"/></a>
</figure>
<p class="" id="74b03356-04c6-4e96-91a8-40a1b977dd31">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="dd0fced3-dc0f-4fef-8548-d52479791d4f">ExistingMy
                                                    Notebook</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
