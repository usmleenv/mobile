
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>18620</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="3722fac0-9a83-4901-a9f2-3064a31b2643">A 28-year-old man comes to the
                                        office due to a rash.  He has a history of seizure disorder and has been taking
                                        phenytoin for 6 years.  Examination shows a diffuse, macular rash and
                                        lymphadenopathy.  Biopsy of a lymph node is shown in the exhibit.</p>
<figure class="image" id="9b2181a3-e9c7-4f91-90fb-af935b0e3d7f"><a href="https://lh7-us.googleusercontent.com/2VX3P6K__C0_ygTWOTASRmN7VaOxzKMAGvquZEEIks6Gv9Ig4htUUQRb1GBq7uhdhXiuKuMTyxiwGxnXVK4Taw69v59nXtXI2YWMiCQUa2E5M4_8u-Uwng01Sy6FAb1lsSrr6sCHcT_s5JCcnCOG9lY"><img loading="lazy" src="https://lh7-us.googleusercontent.com/2VX3P6K__C0_ygTWOTASRmN7VaOxzKMAGvquZEEIks6Gv9Ig4htUUQRb1GBq7uhdhXiuKuMTyxiwGxnXVK4Taw69v59nXtXI2YWMiCQUa2E5M4_8u-Uwng01Sy6FAb1lsSrr6sCHcT_s5JCcnCOG9lY" style="width:602px"/></a>
</figure>
<p class="" id="a2bbfc92-c124-4d7c-9cab-28f8ecdab1a7">Treatment of this
                                        patient's condition is most likely to involve which of the following?</p>
<table class="simple-table" id="66f23196-fb9d-4523-afce-c4a2dcd8e4b6">
<tbody>
<tr id="bd6c8232-2d7d-478c-9a20-a28940f603ea">
<td class="" id="b`lG">A.</td>
<td class="" id="fNOR">Blockade of viral reverse transcriptase and
                                                    integrase</td>
<td class="" id="?@[&gt;"></td>
</tr>
<tr id="1a9a6d3b-8e2d-47bd-8f9f-cd8deafb582c">
<td class="" id="b`lG">B.</td>
<td class="" id="fNOR">Diminished type IV delayed hypersensitivity
                                                    reaction</td>
<td class="" id="?@[&gt;"></td>
</tr>
<tr id="f68c031b-94d2-4338-9231-ed144a0a5233">
<td class="" id="b`lG">C.</td>
<td class="" id="fNOR">Inhibition of bacterial DNA gyrase and
                                                    topoisomerase</td>
<td class="" id="?@[&gt;"></td>
</tr>
<tr id="6c2c1e81-fbb7-41e0-8c8a-8e8b004e3b2b">
<td class="" id="b`lG">D.</td>
<td class="" id="fNOR">Inhibition of transpeptidase and bacterial cell
                                                    wall cross-linking</td>
<td class="" id="?@[&gt;"></td>
</tr>
<tr id="5fd17916-8f3f-4538-9cd2-f3f22bb9890d">
<td class="" id="b`lG">E.</td>
<td class="" id="fNOR">Reduced production of dihydrofolic acid and
                                                    tetrahydrofolic acid</td>
<td class="" id="?@[&gt;"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="c72067db-ae3b-4006-8aa0-4cb5baff89c3">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="a1139cee-c249-401e-b998-e3a3e3209409">
<tbody>
<tr id="042f6c81-ee99-40af-8a1f-f0b92b6091b4">
<td class="" id="@Wrs">A.</td>
<td class="" id="?[tY">Blockade of viral reverse
                                                                transcriptase and integrase (5%)</td>
<td class="" id="=xG_"></td>
</tr>
<tr id="fcee23bd-38c7-43d1-a386-33f9242b7cb4">
<td class="" id="@Wrs">B.</td>
<td class="" id="?[tY">Diminished type IV delayed
                                                                hypersensitivity reaction (10%)</td>
<td class="" id="=xG_"></td>
</tr>
<tr id="919f83c7-5035-4e63-add1-b27ef94847df">
<td class="" id="@Wrs">C.</td>
<td class="" id="?[tY">Inhibition of bacterial DNA gyrase
                                                                and topoisomerase (15%)</td>
<td class="" id="=xG_"></td>
</tr>
<tr id="af539e71-a3a3-4e22-b5bd-decc3296e15e">
<td class="" id="@Wrs">D.</td>
<td class="" id="?[tY">Inhibition of transpeptidase and
                                                                bacterial cell wall cross-linking (52%)</td>
<td class="" id="=xG_"></td>
</tr>
<tr id="fcf66661-f340-452a-8199-0b0fd5635713">
<td class="" id="@Wrs">E.</td>
<td class="" id="?[tY">Reduced production of dihydrofolic
                                                                acid and tetrahydrofolic acid (17%)</td>
<td class="" id="=xG_"></td>
</tr>
</tbody>
</table>
<p class="" id="d5673dbe-2335-4c5f-b65f-c6a5ed246243">Incorrect</p>
<p class="" id="dbb87932-61f2-48fb-81b9-d7a3070c5256">Correct answer D
                                                </p>
<p class="" id="1fcdfc5f-65b7-4ef2-b442-73b126a265eb">52%Answered
                                                    correctly</p>
<p class="" id="fd2da653-8539-4ff1-b6f4-984841076726">40 secsTime Spent
                                                </p>
<p class="" id="6e095267-ea53-492b-825c-842660e3e570">2024Version</p>
<ul class="bulleted-list" id="173ca92e-5749-4321-bfa8-2007fdaded19">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="60e20a76-ff98-4690-81c1-f96ac9b442ae">
<li style="list-style-type:disc"></li>
</ul>
<figure class="image" id="499170bf-1ef6-4d11-8efd-7f8d96b6369c"><a href="https://lh7-us.googleusercontent.com/gTDmeFzbTL5PZWyKnboYdAPcS232-Px-o2raYP7eCXiiWPS0ZNrb4gBmCCeGPpxjS2-8u7K8JGwKXgXeQQQApsxIoV_3pFm4vI7-M3hYrFOjXH7NR5_q9lz7DzjqRh0NdicHwxhKpthF6Yq3bacj2zE"><img loading="lazy" src="https://lh7-us.googleusercontent.com/gTDmeFzbTL5PZWyKnboYdAPcS232-Px-o2raYP7eCXiiWPS0ZNrb4gBmCCeGPpxjS2-8u7K8JGwKXgXeQQQApsxIoV_3pFm4vI7-M3hYrFOjXH7NR5_q9lz7DzjqRh0NdicHwxhKpthF6Yq3bacj2zE" style="width:602px"/></a>
</figure>
<p class="" id="a3d48c1e-e04a-4453-8f25-12ec55f61dfe">The presence of a
                                                    generalized rash, lymphadenopathy, and a corkscrew-shaped organism
                                                    on histopathology suggests secondary syphilis, a spirochetal
                                                    infection caused by <em>Treponema pallidum</em>.  Inoculation occurs
                                                    via skin-to-skin contact during sexual intercourse; replication of
                                                    <em>T pallidum</em> at the site of transmission results in an ulcer
                                                    with heaped up borders (primary syphilis).  Subsequent spread
                                                    through the dermal lymphatic system leads to systemic spread.</p>
<p class="" id="ef1070bc-302f-4145-b81f-710cda5e0a0c">Secondary syphilis
                                                    develops in untreated patients weeks or months after the chancre has
                                                    resolved.  Common manifestations include a diffuse, macular rash and
                                                    generalized lymphadenopathy.  The diagnosis is generally made with
                                                    nontreponemal (eg, rapid plasma reagin) and treponemal-specific (eg,
                                                    fluorescent treponemal antibody absorption) serologic testing
                                                    because microscopy is technically difficult and less sensitive. 
                                                    However, dark-field microscopy or specialized silver stains can
                                                    identify the spirochete.</p>
<p class="" id="2bd47889-cbb6-498d-a0c8-306a133039a7">All stages of
                                                    syphilis are most effectively treated with penicillin, a beta-lactam
                                                    antibiotic that disrupts cell wall synthesis by inhibiting
                                                    transpeptidase, a bacterial enzyme necessary for cell wall
                                                    cross-linking.  Because penicillin is effective only against
                                                    bacteria that are dividing, and because <em>T pallidum</em>
                                                    replicates slowly, penicillin preparations that provide prolonged
                                                    exposure (eg, intramuscular penicillin G benzathine) are required.
                                                </p>
<p class="" id="4d6c967c-d229-4984-8d8c-c062f98b9b7f">(Choice A)  HIV is
                                                    typically treated with reverse transcriptase and integrase
                                                    inhibitors.  Although acute HIV infection often presents with rash,
                                                    lymphadenopathy, and constitutional symptoms a few weeks after
                                                    transmission, a spiral-shaped organism would not be seen on biopsy.
                                                </p>
<p class="" id="d5b3f499-02a7-4f44-92fc-c35b36a512b0">(Choice B) 
                                                    Phenytoin can cause a diffuse rash due to a delayed type IV
                                                    hypersensitivity reaction.  However, most cases arise within a few
                                                    weeks of initiating therapy, not 6 years later.  In addition, a
                                                    corkscrew-shaped organism would not be seen on biopsy.</p>
<p class="" id="21c6873b-20a6-48bb-b7b9-290c4bbb274f">(Choice C) 
                                                    Fluroquinolones (eg, ciprofloxacin) disrupt bacterial DNA synthesis
                                                    by blocking bacterial DNA gyrase and topoisomerase.  Fluroquinolones
                                                    are often used for gram-negative bacterial infections (eg, urinary
                                                    tract infection) but not for syphilis.</p>
<p class="" id="09e78159-7b38-4dbf-9e62-5d849aefa3c0">(Choice E) 
                                                    Trimethoprim-sulfamethoxazole disrupts bacterial folate metabolism
                                                    by blocking enzymes that generate dihydrofolic and tetrahydrofolic
                                                    acid.  This agent is often used for urinary tract and skin/soft
                                                    tissue infection but is not used for syphilis.</p>
<p class="" id="7640b302-914e-4e15-aa7f-53d2b2f17646">Educational
                                                    objective:</p>
<p class="" id="df61b608-822f-4e96-b1a4-cddd11541c9a">Syphilis is caused
                                                    by the corkscrew-shaped organism <em>Treponema pallidum</em>. 
                                                    Secondary syphilis develops in untreated patients weeks or months
                                                    after the initial infection, and presents with a diffuse, macular
                                                    rash and generalized lymphadenopathy.  First-line treatment is
                                                    penicillin, which blocks the last step in bacterial cell wall
                                                    synthesis (transpeptidation).</p>
<p class="" id="f5e269fc-deab-4e3c-ba0a-1c6179ae4c16">Pharmacology</p>
<p class="" id="fe25dc67-b40b-44ce-91fd-87829606672c">Subject</p>
<p class="" id="48246797-ee89-4795-b7ae-40b692eac7d9">Infectious
                                                    Diseases</p>
<p class="" id="512fd3f4-791e-4bc6-9f45-8dce084f0e1b">System</p>
<p class="" id="97765ca9-7c63-4688-8d22-24182edb6d78">Syphilis</p>
<p class="" id="eea68599-e1d9-4dbb-bfe1-ff1c74b5e0ec">Topic</p>
<p class="" id="1a517dce-e049-44b1-a698-815b51cb14e0">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="3dfbbd7a-7196-4381-b385-d3c72eb30149">‚ú®Done</p>
<p class="" id="cc1e15e5-ffa9-4637-a9a4-edb6f9671e1d">Exhibit Display
                                                </p>
<figure class="image" id="65a29bea-58b4-462f-9bf5-b479a08a99b4"><a href="https://lh7-us.googleusercontent.com/4-S6oH-me6JQx8QjEtp5eebyrQTtuPk_PlHRquW5YqLrXKpoA4ToJbtzD6fYaOzmckZrZUgVwjlP-0Nxs8Zpeegn02KTN7yxPZu7hmDS0Cn7hrw3t7Wbj9KuI6DH0jakwCWq_XEfl1eOoFXoq68EdF4"><img loading="lazy" src="https://lh7-us.googleusercontent.com/4-S6oH-me6JQx8QjEtp5eebyrQTtuPk_PlHRquW5YqLrXKpoA4ToJbtzD6fYaOzmckZrZUgVwjlP-0Nxs8Zpeegn02KTN7yxPZu7hmDS0Cn7hrw3t7Wbj9KuI6DH0jakwCWq_XEfl1eOoFXoq68EdF4" style="width:602px"/></a>
</figure>
<p class="" id="d6146e9b-80c8-4df8-ba9b-9da57f865dbb">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="f53eee9a-7824-4e6c-a3a1-efa9d68eb6b0">ExistingMy
                                                    Notebook</p>
<p class="" id="ccdddeec-f835-447f-82b6-a83ad0198743">Exhibit Display
                                                </p>
<figure class="image" id="0d00bd23-3680-4764-8136-53e27d6f460b"><a href="https://lh7-us.googleusercontent.com/bRUEVQUgW8kTRAZ28HtOTZP89pDs3HmJ10NFDk1kIM-aWDoOJvcNhHYxHFZHUQ-x4p1Uo1SK6IdPFMctYAyPP9YECXrysWaiY67kBbByEdnBUZNP7wEd25WtD4mA1hBadfM7F4OMsB2nIcTXQatxLAg"><img loading="lazy" src="https://lh7-us.googleusercontent.com/bRUEVQUgW8kTRAZ28HtOTZP89pDs3HmJ10NFDk1kIM-aWDoOJvcNhHYxHFZHUQ-x4p1Uo1SK6IdPFMctYAyPP9YECXrysWaiY67kBbByEdnBUZNP7wEd25WtD4mA1hBadfM7F4OMsB2nIcTXQatxLAg" style="width:602px"/></a>
</figure>
<p class="" id="25f866a3-9cde-4799-97ae-bedecc7ab177">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="3d709b88-c147-4516-b9b8-3010c0fa10d1">ExistingMy
                                                    Notebook</p>
<p class="" id="83a83274-1cdf-4ff6-b391-d6304a45d3c1">Exhibit Display
                                                </p>
<figure class="image" id="4fb723a8-7094-4cde-9ee0-58caebb823ec"><a href="https://lh7-us.googleusercontent.com/dHR_J1B4F0emsai_1VVWjXv7y-ULXFTE32mjA6V2Y-ppx5JuxwDKT0zTaPXdaOvtxsUiSxp-29f9UMac9yj-B7_Ee076iQhguG6LWFulgxyccCdV4kMY1FJDqoV39aPybO52dOGxvcGS9uKi8im-Mmo"><img loading="lazy" src="https://lh7-us.googleusercontent.com/dHR_J1B4F0emsai_1VVWjXv7y-ULXFTE32mjA6V2Y-ppx5JuxwDKT0zTaPXdaOvtxsUiSxp-29f9UMac9yj-B7_Ee076iQhguG6LWFulgxyccCdV4kMY1FJDqoV39aPybO52dOGxvcGS9uKi8im-Mmo" style="width:602px"/></a>
</figure>
<p class="" id="61b59304-674e-42cb-abe7-240bf540d69a">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="a1d944f3-6903-4f25-8ffe-47d7089c823e">ExistingMy
                                                    Notebook</p>
<p class="" id="dd5291a7-6b3b-4236-bb26-49bd313205cf">Exhibit Display
                                                </p>
<figure class="image" id="249a22f6-9f50-4829-85b0-6dc16ab526ca"><a href="https://lh7-us.googleusercontent.com/TxfhmdSz2d_kyYL0HdjGoxKYb2Ymo23VoqZHf9TtvbaCtH15EV4al2wn7TNO7CQuw16oQ-lC4dUTk7sZEaFJoC03_L2sFf-r_SBgWKWXU9wU8uqDDKGIL2lDqR1-XmfyzlTOLLAgeOoXGoiM2Xf6DVQ"><img loading="lazy" src="https://lh7-us.googleusercontent.com/TxfhmdSz2d_kyYL0HdjGoxKYb2Ymo23VoqZHf9TtvbaCtH15EV4al2wn7TNO7CQuw16oQ-lC4dUTk7sZEaFJoC03_L2sFf-r_SBgWKWXU9wU8uqDDKGIL2lDqR1-XmfyzlTOLLAgeOoXGoiM2Xf6DVQ" style="width:602px"/></a>
</figure>
<p class="" id="7e59991d-2926-4875-a508-2af26384ef22">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="69f3088e-2516-49a3-b60f-d19e2ade66ec">ExistingMy
                                                    Notebook</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }


    


    

    /* Adjust table padding to make room for radio button */
    


    


    


    


    /* Clickable Answer Choices */
    table tr.answer-choice {
        cursor: pointer !important;
        transition: all 0.3s ease !important;
    }

    table tr.answer-choice:hover {
        background: #f8f9fa !important;
    }

    table tr.answer-choice td:first-child {
        position: relative !important;
        padding-left: 35px !important;
    }

    table tr.answer-choice td:first-child::before {
        content: '';
        position: absolute;
        left: 8px;
        top: 50%;
        transform: translateY(-50%);
        width: 16px;
        height: 16px;
        border: 2px solid #999;
        border-radius: 50%;
        background: white;
        transition: all 0.2s ease;
        box-sizing: border-box;
    }

    table tr.answer-choice.selected td:first-child::before {
        border-color: #1a73e8;
        border-width: 5px;
    }

    table tr.answer-choice.selected {
        background: #e8f4ff !important;
    }

    table tr.answer-choice.selected td:first-child {
        color: #1a73e8 !important;
        font-weight: 600 !important;
    }


    


    /* Answer Validation Styles */
    tr.answer-choice.answer-correct {
        background: linear-gradient(90deg, #d4edda 0%, #c3e6cb 100%) !important;
        border: 3px solid #28a745 !important;
        border-radius: 8px !important;
        box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3) !important;
    }

    tr.answer-choice.answer-correct td {
        color: #155724 !important;
        font-weight: 600 !important;
    }

    tr.answer-choice.answer-correct td:first-child::before {
        border-color: #28a745 !important;
        background: #28a745 !important;
        box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.2) !important;
    }

    tr.answer-choice.answer-incorrect {
        background: linear-gradient(90deg, #f8d7da 0%, #f5c6cb 100%) !important;
        border: 3px solid #dc3545 !important;
        border-radius: 8px !important;
        box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3) !important;
    }

    tr.answer-choice.answer-incorrect td {
        color: #721c24 !important;
        font-weight: 600 !important;
    }

    tr.answer-choice.answer-incorrect td:first-child::before {
        border-color: #dc3545 !important;
        background: #dc3545 !important;
        box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2) !important;
    }


    /* Answer Validation Styles */
    tr.answer-choice.answer-correct {
        background: linear-gradient(90deg, #d4edda 0%, #c3e6cb 100%) !important;
        border: 3px solid #28a745 !important;
        border-radius: 8px !important;
        box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3) !important;
    }

    tr.answer-choice.answer-correct td {
        color: #155724 !important;
        font-weight: 600 !important;
    }

    tr.answer-choice.answer-correct td:first-child::before {
        border-color: #28a745 !important;
        background: #28a745 !important;
        box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.2) !important;
    }

    tr.answer-choice.answer-incorrect {
        background: linear-gradient(90deg, #f8d7da 0%, #f5c6cb 100%) !important;
        border: 3px solid #dc3545 !important;
        border-radius: 8px !important;
        box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3) !important;
    }

    tr.answer-choice.answer-incorrect td {
        color: #721c24 !important;
        font-weight: 600 !important;
    }

    tr.answer-choice.answer-incorrect td:first-child::before {
        border-color: #dc3545 !important;
        background: #dc3545 !important;
        box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2) !important;
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);

        // Check if selection is in valid elements
        const container = range.commonAncestorContainer;
        const parent = container.nodeType === 3 ? container.parentElement : container;

        // Only allow highlighting in paragraphs, list items, and table cells
        if (!parent.closest('p') && !parent.closest('li') && !parent.closest('td')) {
            return;
        }

        // Don't highlight if inside summary, button, or other UI elements
        if (parent.closest('summary') || parent.closest('button') || parent.closest('.bionic-reading-btn') || parent.closest('.highlighter-btn')) {
            return;
        }

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);

        try {
            // Create a span for highlighting
            const span = document.createElement('span');
            span.classList.add('highlighted');
            span.setAttribute('data-highlight-id', highlightId);

            // Try simple surroundContents first
            try {
                range.surroundContents(span);
                questionHighlights[highlightId] = true;
                saveHighlights();
            } catch (e) {
                // If that fails (crossing element boundaries), use extractContents approach
                const fragment = range.extractContents();
                span.appendChild(fragment);
                range.insertNode(span);

                // Merge adjacent text nodes to clean up
                span.normalize();

                questionHighlights[highlightId] = true;
                saveHighlights();
            }
        } catch (e) {
            console.log('Could not highlight selection:', e);
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>







<script>
(function() {
    // Get question ID from summary
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Find the correct answer by highest percentage
    function findCorrectAnswer() {
        // Find the Submit or Explanation details element
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (!submitDetails) return null;

        // Find all answer rows with percentages inside Submit section
        const table = submitDetails.querySelector('table.simple-table');
        if (!table) return null;

        const rows = table.querySelectorAll('tr');
        let maxPercentage = -1;
        let correctChoice = null;

        rows.forEach(row => {
            const firstCell = row.querySelector('td:first-child');
            const secondCell = row.querySelector('td:nth-child(2)');

            if (firstCell && secondCell) {
                const choiceMatch = firstCell.textContent.trim().match(/^([A-Z])\./);
                const percentMatch = secondCell.textContent.match(/(\d+)%/);

                if (choiceMatch && percentMatch) {
                    const choice = choiceMatch[1];
                    const percentage = parseInt(percentMatch[1]);

                    if (percentage > maxPercentage) {
                        maxPercentage = percentage;
                        correctChoice = choice;
                    }
                }
            }
        });

        return correctChoice;
    }

    // Check user's answer when Submit is opened
    function checkAnswer() {
        const questionId = getQuestionId();
        const choiceKey = 'choice_q' + questionId;
        const userChoice = localStorage.getItem(choiceKey);

        if (!userChoice) {
            console.log('No answer selected');
            return;
        }

        const correctAnswer = findCorrectAnswer();
        if (!correctAnswer) {
            console.log('Could not determine correct answer');
            return;
        }

        const isCorrect = userChoice === correctAnswer;

        // Save result to localStorage
        const resultKey = 'result_q' + questionId;
        const resultValue = isCorrect ? 'correct' : 'incorrect';
        localStorage.setItem(resultKey, resultValue);

        // Force storage event for parent window
        try {
            window.dispatchEvent(new StorageEvent('storage', {
                key: resultKey,
                newValue: resultValue,
                storageArea: localStorage
            }));
        } catch (e) {
            console.log('Could not dispatch storage event:', e);
        }

        // Visual feedback - highlight the selected answer row
        const selectedRow = document.querySelector(`tr.answer-choice[data-choice="${userChoice}"]`);
        if (selectedRow) {
            // Remove any existing validation classes
            document.querySelectorAll('tr.answer-choice').forEach(row => {
                row.classList.remove('answer-correct', 'answer-incorrect');
            });

            // Add appropriate class
            if (isCorrect) {
                selectedRow.classList.add('answer-correct');
            } else {
                selectedRow.classList.add('answer-incorrect');

                // Also highlight the correct answer
                const correctRow = document.querySelector(`tr.answer-choice[data-choice="${correctAnswer}"]`);
                if (correctRow) {
                    correctRow.classList.add('answer-correct');
                }
            }
        }

        // Notify parent window
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'answerValidated',
                questionId: questionId,
                userChoice: userChoice,
                correctAnswer: correctAnswer,
                isCorrect: isCorrect
            }, '*');
        }

        console.log(`Answer checked: User=${userChoice}, Correct=${correctAnswer}, Result=${isCorrect ? 'Correct' : 'Incorrect'}`);
    }

    // Monitor Submit or Explanation details opening
    function setupSubmitMonitor() {
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (submitDetails) {
            submitDetails.addEventListener('toggle', function() {
                if (this.open) {
                    // Small delay to ensure everything is rendered
                    setTimeout(checkAnswer, 100);
                }
            });
        }
    }

    // Initialize when page loads
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setupSubmitMonitor);
    } else {
        setupSubmitMonitor();
    }
})();
</script>

<script>
(function() {
    // Get question ID from summary
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Communicate with parent window (if in iframe)
    function notifyParent(choice) {
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'choiceSelected',
                questionId: getQuestionId(),
                choice: choice
            }, '*');
        }
    }

    // Load saved choice from parent or localStorage
    function loadSavedChoice() {
        const questionId = getQuestionId();

        // Try to get from localStorage first
        const saved = localStorage.getItem('choice_q' + questionId);
        if (saved) {
            selectChoice(saved, false);
        }

        // Ask parent for saved choice (if in iframe)
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'getChoice',
                questionId: questionId
            }, '*');
        }
    }

    // Listen for messages from parent
    window.addEventListener('message', function(event) {
        if (event.data.type === 'setChoice' && event.data.questionId === getQuestionId()) {
            selectChoice(event.data.choice, false);
        }
    });

    // Select a choice
    function selectChoice(choice, notify = true) {
        if (!choice) return;

        const questionId = getQuestionId();

        // Remove previous selection
        document.querySelectorAll('tr.answer-choice').forEach(row => {
            row.classList.remove('selected');
        });

        // Add selection to clicked choice
        const choiceRow = document.querySelector(`tr.answer-choice[data-choice="${choice}"]`);
        if (choiceRow) {
            choiceRow.classList.add('selected');

            // Save to localStorage
            localStorage.setItem('choice_q' + questionId, choice);

            // Notify parent (if in iframe)
            if (notify) {
                notifyParent(choice);
            }
        }
    }

    // Initialize answer choices
    function initializeChoices() {
        // Find all answer choice rows (A, B, C, D, E, F, etc.)
        const choicePattern = /^[A-Z]\.$/;
        const tables = document.querySelectorAll('table.simple-table');

        tables.forEach(table => {
            const rows = table.querySelectorAll('tr');
            rows.forEach(row => {
                const firstCell = row.querySelector('td:first-child');
                if (firstCell && choicePattern.test(firstCell.textContent.trim())) {
                    const choice = firstCell.textContent.trim().replace('.', '');
                    row.classList.add('answer-choice');
                    row.setAttribute('data-choice', choice);
                    row.style.position = 'relative';

                    // Add click handler
                    row.addEventListener('click', function(e) {
                        // Don't trigger if clicking inside a link or button
                        if (e.target.tagName === 'A' || e.target.closest('a')) return;

                        // Toggle selection
                        if (this.classList.contains('selected')) {
                            this.classList.remove('selected');
                            const questionId = getQuestionId();
                            localStorage.removeItem('choice_q' + questionId);
                            notifyParent('');
                        } else {
                            selectChoice(choice);
                        }
                    });
                }
            });
        });

        // Load saved choice after a short delay
        setTimeout(loadSavedChoice, 100);
    }

    // Run when page loads
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeChoices);
    } else {
        initializeChoices();
    }
})();
</script>

<script>
(function() {
    // Get question ID from summary
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Find the correct answer by highest percentage
    function findCorrectAnswer() {
        // Find the Submit or Explanation details element
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (!submitDetails) return null;

        // Find all answer rows with percentages inside Submit section
        const table = submitDetails.querySelector('table.simple-table');
        if (!table) return null;

        const rows = table.querySelectorAll('tr');
        let maxPercentage = -1;
        let correctChoice = null;

        rows.forEach(row => {
            const firstCell = row.querySelector('td:first-child');
            const secondCell = row.querySelector('td:nth-child(2)');

            if (firstCell && secondCell) {
                const choiceMatch = firstCell.textContent.trim().match(/^([A-Z])\./);
                const percentMatch = secondCell.textContent.match(/(\d+)%/);

                if (choiceMatch && percentMatch) {
                    const choice = choiceMatch[1];
                    const percentage = parseInt(percentMatch[1]);

                    if (percentage > maxPercentage) {
                        maxPercentage = percentage;
                        correctChoice = choice;
                    }
                }
            }
        });

        return correctChoice;
    }

    // Check user's answer when Submit is opened
    function checkAnswer() {
        const questionId = getQuestionId();
        const choiceKey = 'choice_q' + questionId;
        const userChoice = localStorage.getItem(choiceKey);

        if (!userChoice) {
            console.log('No answer selected');
            return;
        }

        const correctAnswer = findCorrectAnswer();
        if (!correctAnswer) {
            console.log('Could not determine correct answer');
            return;
        }

        const isCorrect = userChoice === correctAnswer;

        // Save result to localStorage
        const resultKey = 'result_q' + questionId;
        const resultValue = isCorrect ? 'correct' : 'incorrect';
        localStorage.setItem(resultKey, resultValue);

        // Force storage event for parent window
        try {
            window.dispatchEvent(new StorageEvent('storage', {
                key: resultKey,
                newValue: resultValue,
                storageArea: localStorage
            }));
        } catch (e) {
            console.log('Could not dispatch storage event:', e);
        }

        // Visual feedback - highlight the selected answer row
        const selectedRow = document.querySelector(`tr.answer-choice[data-choice="${userChoice}"]`);
        if (selectedRow) {
            // Remove any existing validation classes
            document.querySelectorAll('tr.answer-choice').forEach(row => {
                row.classList.remove('answer-correct', 'answer-incorrect');
            });

            // Add appropriate class
            if (isCorrect) {
                selectedRow.classList.add('answer-correct');
            } else {
                selectedRow.classList.add('answer-incorrect');

                // Also highlight the correct answer
                const correctRow = document.querySelector(`tr.answer-choice[data-choice="${correctAnswer}"]`);
                if (correctRow) {
                    correctRow.classList.add('answer-correct');
                }
            }
        }

        // Notify parent window
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'answerValidated',
                questionId: questionId,
                userChoice: userChoice,
                correctAnswer: correctAnswer,
                isCorrect: isCorrect
            }, '*');
        }

        console.log(`Answer checked: User=${userChoice}, Correct=${correctAnswer}, Result=${isCorrect ? 'Correct' : 'Incorrect'}`);
    }

    // Monitor Submit or Explanation details opening
    function setupSubmitMonitor() {
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (submitDetails) {
            submitDetails.addEventListener('toggle', function() {
                if (this.open) {
                    // Small delay to ensure everything is rendered
                    setTimeout(checkAnswer, 100);
                }
            });
        }
    }

    // Initialize when page loads
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setupSubmitMonitor);
    } else {
        setupSubmitMonitor();
    }
})();
</script>

<script>
(function() {
    // Get question ID from summary
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Find the correct answer by highest percentage
    function findCorrectAnswer() {
        // Find the Submit or Explanation details element
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (!submitDetails) return null;

        // Find all answer rows with percentages inside Submit section
        const table = submitDetails.querySelector('table.simple-table');
        if (!table) return null;

        const rows = table.querySelectorAll('tr');
        let maxPercentage = -1;
        let correctChoice = null;

        rows.forEach(row => {
            const firstCell = row.querySelector('td:first-child');
            const secondCell = row.querySelector('td:nth-child(2)');

            if (firstCell && secondCell) {
                const choiceMatch = firstCell.textContent.trim().match(/^([A-Z])\./);
                const percentMatch = secondCell.textContent.match(/(\d+)%/);

                if (choiceMatch && percentMatch) {
                    const choice = choiceMatch[1];
                    const percentage = parseInt(percentMatch[1]);

                    if (percentage > maxPercentage) {
                        maxPercentage = percentage;
                        correctChoice = choice;
                    }
                }
            }
        });

        return correctChoice;
    }

    // Check user's answer when Submit is opened
    function checkAnswer() {
        const questionId = getQuestionId();
        const choiceKey = 'choice_q' + questionId;
        const userChoice = localStorage.getItem(choiceKey);

        if (!userChoice) {
            console.log('No answer selected');
            return;
        }

        const correctAnswer = findCorrectAnswer();
        if (!correctAnswer) {
            console.log('Could not determine correct answer');
            return;
        }

        const isCorrect = userChoice === correctAnswer;

        // Save result to localStorage
        const resultKey = 'result_q' + questionId;
        const resultValue = isCorrect ? 'correct' : 'incorrect';
        localStorage.setItem(resultKey, resultValue);

        // Force storage event for parent window
        try {
            window.dispatchEvent(new StorageEvent('storage', {
                key: resultKey,
                newValue: resultValue,
                storageArea: localStorage
            }));
        } catch (e) {
            console.log('Could not dispatch storage event:', e);
        }

        // Visual feedback - highlight the selected answer row
        const selectedRow = document.querySelector(`tr.answer-choice[data-choice="${userChoice}"]`);
        if (selectedRow) {
            // Remove any existing validation classes
            document.querySelectorAll('tr.answer-choice').forEach(row => {
                row.classList.remove('answer-correct', 'answer-incorrect');
            });

            // Add appropriate class
            if (isCorrect) {
                selectedRow.classList.add('answer-correct');
            } else {
                selectedRow.classList.add('answer-incorrect');

                // Also highlight the correct answer
                const correctRow = document.querySelector(`tr.answer-choice[data-choice="${correctAnswer}"]`);
                if (correctRow) {
                    correctRow.classList.add('answer-correct');
                }
            }
        }

        // Notify parent window
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'answerValidated',
                questionId: questionId,
                userChoice: userChoice,
                correctAnswer: correctAnswer,
                isCorrect: isCorrect
            }, '*');
        }

        console.log(`Answer checked: User=${userChoice}, Correct=${correctAnswer}, Result=${isCorrect ? 'Correct' : 'Incorrect'}`);
    }

    // Monitor Submit or Explanation details opening
    function setupSubmitMonitor() {
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (submitDetails) {
            submitDetails.addEventListener('toggle', function() {
                if (this.open) {
                    // Small delay to ensure everything is rendered
                    setTimeout(checkAnswer, 100);
                }
            });
        }
    }

    // Initialize when page loads
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setupSubmitMonitor);
    } else {
        setupSubmitMonitor();
    }
})();
</script>

<script>
(function() {
    // Get question ID from summary
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Find the correct answer by highest percentage
    function findCorrectAnswer() {
        // Find the Submit or Explanation details element
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (!submitDetails) return null;

        // Find all answer rows with percentages inside Submit section
        const table = submitDetails.querySelector('table.simple-table');
        if (!table) return null;

        const rows = table.querySelectorAll('tr');
        let maxPercentage = -1;
        let correctChoice = null;

        rows.forEach(row => {
            const firstCell = row.querySelector('td:first-child');
            const secondCell = row.querySelector('td:nth-child(2)');

            if (firstCell && secondCell) {
                const choiceMatch = firstCell.textContent.trim().match(/^([A-Z])\./);
                const percentMatch = secondCell.textContent.match(/(\d+)%/);

                if (choiceMatch && percentMatch) {
                    const choice = choiceMatch[1];
                    const percentage = parseInt(percentMatch[1]);

                    if (percentage > maxPercentage) {
                        maxPercentage = percentage;
                        correctChoice = choice;
                    }
                }
            }
        });

        return correctChoice;
    }

    // Check user's answer when Submit is opened
    function checkAnswer() {
        const questionId = getQuestionId();
        const choiceKey = 'choice_q' + questionId;
        const userChoice = localStorage.getItem(choiceKey);

        if (!userChoice) {
            console.log('No answer selected');
            return;
        }

        const correctAnswer = findCorrectAnswer();
        if (!correctAnswer) {
            console.log('Could not determine correct answer');
            return;
        }

        const isCorrect = userChoice === correctAnswer;

        // Save result to localStorage
        const resultKey = 'result_q' + questionId;
        const resultValue = isCorrect ? 'correct' : 'incorrect';
        localStorage.setItem(resultKey, resultValue);

        // Force storage event for parent window
        try {
            window.dispatchEvent(new StorageEvent('storage', {
                key: resultKey,
                newValue: resultValue,
                storageArea: localStorage
            }));
        } catch (e) {
            console.log('Could not dispatch storage event:', e);
        }

        // Visual feedback - highlight the selected answer row
        const selectedRow = document.querySelector(`tr.answer-choice[data-choice="${userChoice}"]`);
        if (selectedRow) {
            // Remove any existing validation classes
            document.querySelectorAll('tr.answer-choice').forEach(row => {
                row.classList.remove('answer-correct', 'answer-incorrect');
            });

            // Add appropriate class
            if (isCorrect) {
                selectedRow.classList.add('answer-correct');
            } else {
                selectedRow.classList.add('answer-incorrect');

                // Also highlight the correct answer
                const correctRow = document.querySelector(`tr.answer-choice[data-choice="${correctAnswer}"]`);
                if (correctRow) {
                    correctRow.classList.add('answer-correct');
                }
            }
        }

        // Notify parent window
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'answerValidated',
                questionId: questionId,
                userChoice: userChoice,
                correctAnswer: correctAnswer,
                isCorrect: isCorrect
            }, '*');
        }

        console.log(`Answer checked: User=${userChoice}, Correct=${correctAnswer}, Result=${isCorrect ? 'Correct' : 'Incorrect'}`);
    }

    // Monitor Submit or Explanation details opening
    function setupSubmitMonitor() {
        const submitDetails = Array.from(document.querySelectorAll('details')).find(d => {
            const summary = d.querySelector('summary');
            return summary && (summary.textContent.includes('Submit') || summary.textContent.includes('Explanation'));
        });

        if (submitDetails) {
            submitDetails.addEventListener('toggle', function() {
                if (this.open) {
                    // Small delay to ensure everything is rendered
                    setTimeout(checkAnswer, 100);

                    // Notify parent that Submit/Explanation was opened
                    if (window.parent && window.parent !== window) {
                        window.parent.postMessage({
                            type: 'submitOpened',
                            questionId: getQuestionId()
                        }, '*');
                    }
                } else {
                    // Notify parent that Submit/Explanation was closed
                    if (window.parent && window.parent !== window) {
                        window.parent.postMessage({
                            type: 'submitClosed',
                            questionId: getQuestionId()
                        }, '*');
                    }
                }
            });
        }
    }

    // Initialize when page loads
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setupSubmitMonitor);
    } else {
        setupSubmitMonitor();
    }
})();
</script>
