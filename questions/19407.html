
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>19407</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="f1b91cab-1108-41ad-ab94-caccdddc6100">A 62-year-old woman comes to
                                        the office for diarrhea.  She has had 4 or 5 watery, brown stools every day for
                                        the past 6 months.  Although most episodes occur during the day, she wakes up at
                                        least once a night to defecate.  There is no associated hematochezia, melena,
                                        vomiting, or unexpected weight loss.  Medical history is significant for type 2
                                        diabetes mellitus and hypertension.  She takes lisinopril, insulin, and
                                        metformin.  She has no recent travel or new medications.  Family history is
                                        unremarkable.  She does not drink alcohol.  Temperature is 37.4 C (99.3 F),
                                        blood pressure is 125/80 mm Hg, and pulse is 80/min.  The abdomen is nontender
                                        and nondistended.  Complete blood count, serum chemistries, and stool studies
                                        are normal.  Which of the following is the most likely cause of this
                                        patient's diarrhea?</p>
<table class="simple-table" id="3a4f4bb3-ef38-40d6-8699-10c508131308">
<tbody>
<tr id="073c4e3d-43aa-42d2-9bea-80e7d3b31d56">
<td class="" id="lVRJ">A.</td>
<td class="" id=":lIk">Decreased bacterial growth in the colon</td>
<td class="" id="zLe["></td>
</tr>
<tr id="e6abce0c-1239-4c58-9a19-95d324a0d320">
<td class="" id="lVRJ">B.</td>
<td class="" id=":lIk">Disaccharidase deficiency</td>
<td class="" id="zLe["></td>
</tr>
<tr id="6aebb1b7-fae4-4d64-8056-6a700c2c810e">
<td class="" id="lVRJ">C.</td>
<td class="" id=":lIk">Disordered motility of the small bowel and colon
                                                </td>
<td class="" id="zLe["></td>
</tr>
<tr id="d3882a26-cb91-4e18-af3e-7a9937801d25">
<td class="" id="lVRJ">D.</td>
<td class="" id=":lIk">Exocrine pancreatic insufficiency</td>
<td class="" id="zLe["></td>
</tr>
<tr id="fdf59bf7-8aee-4d82-9085-d098f1284221">
<td class="" id="lVRJ">E.</td>
<td class="" id=":lIk">Transmural intestinal inflammation</td>
<td class="" id="zLe["></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="9abfc3f5-eadd-46a7-860f-f358460faa46">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="d0be4e19-5bea-4c8f-9c21-555ba813e355">
<tbody>
<tr id="45326109-9366-49da-bbe2-37e2e74d7b11">
<td class="" id="|YeU">A.</td>
<td class="" id="za_Y">Decreased bacterial growth in the
                                                                colon (8%)</td>
<td class="" id="&gt;YWh"></td>
</tr>
<tr id="a2885539-8838-4314-840a-bc4d45aa1f1c">
<td class="" id="|YeU">B.</td>
<td class="" id="za_Y">Disaccharidase deficiency (13%)</td>
<td class="" id="&gt;YWh"></td>
</tr>
<tr id="fc13ed73-7530-4190-a636-23dff09ca920">
<td class="" id="|YeU">C.</td>
<td class="" id="za_Y">Disordered motility of the small
                                                                bowel and colon (53%)</td>
<td class="" id="&gt;YWh"></td>
</tr>
<tr id="5fdf5926-e55c-4c09-b454-0a20d0b11d65">
<td class="" id="|YeU">D.</td>
<td class="" id="za_Y">Exocrine pancreatic insufficiency
                                                                (15%)</td>
<td class="" id="&gt;YWh"></td>
</tr>
<tr id="9895b9da-eccb-42bf-bde9-823d0c28e9ce">
<td class="" id="|YeU">E.</td>
<td class="" id="za_Y">Transmural intestinal inflammation
                                                                (8%)</td>
<td class="" id="&gt;YWh"></td>
</tr>
</tbody>
</table>
<p class="" id="d6544cce-eea9-492a-a15c-9cf3a87f5ebf">Correct</p>
<p class="" id="31176580-93fe-4b27-998e-c581155cdaea">53%Answered
                                                    correctly</p>
<p class="" id="35aeee86-8111-4fb0-9f37-c27e97200b24">13 secsTime Spent
                                                </p>
<p class="" id="43825b81-e74e-42af-8b6b-abc57c6b82a6">2024Version</p>
<ul class="bulleted-list" id="563bcfe7-b018-4cd6-a15e-a6ad50258f89">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="7d066ae6-945a-48c4-8555-e636c11c3724">
<li style="list-style-type:disc"></li>
</ul>
<table class="simple-table" id="5bdb80e3-325d-417f-9af1-da325c8c6927">
<tbody>
<tr id="f375682b-1631-4910-b092-e30449d9842f">
<td class="" id="nvpH">Diabetic diarrhea</td>
<td class="" id=":?s?"></td>
</tr>
<tr id="26cb8084-8040-42ba-907b-55c0f5a1098a">
<td class="" id="nvpH">Etiology</td>
<td class="" id=":?s?">‚Ä¢ Long-standing hyperglycemia damages
                                                                the autonomic nervous system, resulting in:<br/> ‚ó¶
                                                                Altered intestinal motility<br/> ‚ó¶ Increased intestinal
                                                                secretions<br/> ‚ó¶ ¬± Fecal incontinence<br/></td>
</tr>
<tr id="94b0b635-50de-46d4-9b9f-af83731e88f2">
<td class="" id="nvpH">Risk factors</td>
<td class="" id=":?s?">‚Ä¢ Poorly controlled diabetes
                                                                mellitus<br/>‚Ä¢ Vascular risk factors (eg, smoking,
                                                                obesity, hyperlipidemia)<br/></td>
</tr>
<tr id="5f163a67-23a0-4cb6-8f04-18a6b8d278a9">
<td class="" id="nvpH">Manifestations</td>
<td class="" id=":?s?">‚Ä¢ Painless, watery diarrhea<br/>‚Ä¢
                                                                Secretory-like (persists at night &amp; while
                                                                fasting)<br/>‚Ä¢ Laboratory evaluation typically
                                                                unremarkable<br/></td>
</tr>
</tbody>
</table>
<p class="" id="646caa79-f2e6-415f-9f6f-675dd3bdfc03">This patient with
                                                    diabetes mellitus has several months of watery diarrhea that occurs
                                                    both during the day and at night.  In the setting of normal
                                                    laboratory evaluation, this presentation suggests diabetic diarrhea
                                                    due to diabetic autonomic neuropathy (DAN).  Long-standing
                                                    hyperglycemia results in the accumulation of cross-linked
                                                    glycosylated serum proteins in the vasa nervorum, which causes
                                                    inflammation and damage to peripheral nerves.  Although this most
                                                    commonly results in a distal, symmetric polyneuropathy of the feet,
                                                    it can also result in damage to sympathetic and parasympathetic
                                                    nerves, leading to autonomic dysfunction.  Risk factors include poor
                                                    glucose control and other vascular risk factors (eg, hypertension,
                                                    obesity).</p>
<p class="" id="920de8cf-4219-4515-a852-5e63d29269f1">Loss of autonomic
                                                    input to the gastrointestinal tract results in abnormal peristalsis,
                                                    leading to disordered small-bowel and colonic motility, which can
                                                    result in rapid intestinal transport.  Furthermore, intestinal water
                                                    and electrolyte secretion is increased.  Fecal incontinence is
                                                    particularly common in patients with long-standing diabetes,
                                                    resulting from both a large volume of watery diarrhea and decreased
                                                    anorectal sensation.  Other common gastrointestinal manifestations
                                                    of DAN include gastroparesis and gastroesophageal reflux.</p>
<p class="" id="b7b50fbb-55d4-4097-9db6-690349d0e554">Patients with
                                                    diabetic diarrhea typically have painless, secretory-like diarrhea
                                                    that persists with fasting (eg, nocturnal diarrhea).  Laboratory
                                                    evaluation, including fecal leukocytes and fecal occult blood
                                                    testing, is usually unremarkable.</p>
<p class="" id="0a64952c-d253-40e9-9eae-8c27dad1a60e">(Choice A) 
                                                    Although altered small-bowel motility related to DAN can predispose
                                                    to small intestinal bacterial overgrowth, this occurs due to an
                                                    increase in small bowel bacteria, not a decrease in colonic
                                                    bacterial burden.  It typically causes abdominal bloating,
                                                    discomfort, and gas.  Nocturnal diarrhea is unexpected.</p>
<p class="" id="7b4c6baa-c1b3-4421-b9cc-d72465a720de">(Choice B) 
                                                    Lactase deficiency can cause osmotic diarrhea after lactose
                                                    ingestion, leading to postprandial loose stools and bloating. 
                                                    However, unless patients are eating during the night, nocturnal
                                                    bowel movements would not occur.</p>
<p class="" id="da8ff13b-e1fe-427a-a7ee-da5b84946487">(Choice D) 
                                                    Exocrine pancreatic insufficiency (EPI), which is common in chronic
                                                    pancreatitis or after pancreatic resection, leads to bulky,
                                                    foul-smelling stool (eg, steatorrhea).  Although insulin resistance
                                                    can mildly impact pancreatic secretions, EPI leading to steatorrhea
                                                    is rare in diabetes.</p>
<p class="" id="c8175f98-4d7a-4962-8029-23cec4276619">(Choice E)  Crohn
                                                    disease, which causes transmural gastrointestinal inflammation, can
                                                    cause watery diarrhea.  However, abdominal pain, anemia, abnormal
                                                    stool studies (eg, fecal occult blood, fecal calprotectin), and
                                                    possibly fever are expected.</p>
<p class="" id="3ab5eec4-b4b5-4051-98e7-8c12f156173d">Educational
                                                    objective:</p>
<p class="" id="7954149f-76b6-4fd2-8003-9d913d0fbd04">Prolonged
                                                    hyperglycemia in diabetes mellitus can injure the parasympathetic
                                                    and sympathetic nervous system, resulting in diabetic autonomic
                                                    neuropathy.  This can lead to disordered small-bowel and colonic
                                                    motility and increased intestinal secretions, resulting in
                                                    secretory-like diarrhea (eg, fasting bowel movements).</p>
<p class="" id="4d96d4a0-1795-4e22-b1e1-0f2d2a9309a8">Pathophysiology
                                                </p>
<p class="" id="d19846b0-68ca-4127-a9cb-1b7182496834">Subject</p>
<p class="" id="9c5a4794-c906-418d-9263-1405c92e78f8">Gastrointestinal
                                                    &amp; Nutrition</p>
<p class="" id="7a35a767-1ae4-401b-97f4-2e16de678086">System</p>
<p class="" id="a258e97b-4f7c-4230-b27b-29c7c89b14ac">Diabetic
                                                    neuropathy</p>
<p class="" id="41c1184d-3345-4fee-bc10-10978241c3bd">Topic</p>
<p class="" id="2033ee01-75b4-4b8c-bbc8-3d00015ab357">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="cf6d2651-ea67-442f-b340-e49ac9cf4b19">‚ùåelementFinder:
                                                    //a[@href='javascript:void(0)']</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }


    


    

    /* Adjust table padding to make room for radio button */
    


    /* Clickable Answer Choices */
    table tr.answer-choice {
        cursor: pointer !important;
        transition: all 0.3s ease !important;
    }

    table tr.answer-choice:hover {
        background: #f8f9fa !important;
    }

    table tr.answer-choice td:first-child {
        position: relative !important;
        padding-left: 35px !important;
    }

    table tr.answer-choice td:first-child::before {
        content: '';
        position: absolute;
        left: 8px;
        top: 50%;
        transform: translateY(-50%);
        width: 16px;
        height: 16px;
        border: 2px solid #999;
        border-radius: 50%;
        background: white;
        transition: all 0.2s ease;
        box-sizing: border-box;
    }

    table tr.answer-choice.selected td:first-child::before {
        border-color: #1a73e8;
        border-width: 5px;
    }

    table tr.answer-choice.selected {
        background: #e8f4ff !important;
    }

    table tr.answer-choice.selected td:first-child {
        color: #1a73e8 !important;
        font-weight: 600 !important;
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>





<script>
(function() {
    // Get question ID from summary
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Communicate with parent window (if in iframe)
    function notifyParent(choice) {
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'choiceSelected',
                questionId: getQuestionId(),
                choice: choice
            }, '*');
        }
    }

    // Load saved choice from parent or localStorage
    function loadSavedChoice() {
        const questionId = getQuestionId();

        // Try to get from localStorage first
        const saved = localStorage.getItem('choice_q' + questionId);
        if (saved) {
            selectChoice(saved, false);
        }

        // Ask parent for saved choice (if in iframe)
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'getChoice',
                questionId: questionId
            }, '*');
        }
    }

    // Listen for messages from parent
    window.addEventListener('message', function(event) {
        if (event.data.type === 'setChoice' && event.data.questionId === getQuestionId()) {
            selectChoice(event.data.choice, false);
        }
    });

    // Select a choice
    function selectChoice(choice, notify = true) {
        if (!choice) return;

        const questionId = getQuestionId();

        // Remove previous selection
        document.querySelectorAll('tr.answer-choice').forEach(row => {
            row.classList.remove('selected');
        });

        // Add selection to clicked choice
        const choiceRow = document.querySelector(`tr.answer-choice[data-choice="${choice}"]`);
        if (choiceRow) {
            choiceRow.classList.add('selected');

            // Save to localStorage
            localStorage.setItem('choice_q' + questionId, choice);

            // Notify parent (if in iframe)
            if (notify) {
                notifyParent(choice);
            }
        }
    }

    // Initialize answer choices
    function initializeChoices() {
        // Find all answer choice rows (A, B, C, D, E, F, etc.)
        const choicePattern = /^[A-Z]\.$/;
        const tables = document.querySelectorAll('table.simple-table');

        tables.forEach(table => {
            const rows = table.querySelectorAll('tr');
            rows.forEach(row => {
                const firstCell = row.querySelector('td:first-child');
                if (firstCell && choicePattern.test(firstCell.textContent.trim())) {
                    const choice = firstCell.textContent.trim().replace('.', '');
                    row.classList.add('answer-choice');
                    row.setAttribute('data-choice', choice);
                    row.style.position = 'relative';

                    // Add click handler
                    row.addEventListener('click', function(e) {
                        // Don't trigger if clicking inside a link or button
                        if (e.target.tagName === 'A' || e.target.closest('a')) return;

                        // Toggle selection
                        if (this.classList.contains('selected')) {
                            this.classList.remove('selected');
                            const questionId = getQuestionId();
                            localStorage.removeItem('choice_q' + questionId);
                            notifyParent('');
                        } else {
                            selectChoice(choice);
                        }
                    });
                }
            });
        });

        // Load saved choice after a short delay
        setTimeout(loadSavedChoice, 100);
    }

    // Run when page loads
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeChoices);
    } else {
        initializeChoices();
    }
})();
</script>
