
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>19617</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="242ce759-e80d-4438-9dfc-bcb87ac3c9c4">A 4-hour-old girl is evaluated
                                        in the neonatal intensive care unit.  The patient was born at 30 weeks gestation
                                        via spontaneous vaginal delivery after 3 hours of labor.  Membranes ruptured at
                                        the onset of labor and amniotic fluid appeared clear.  Immediately after birth,
                                        the child was placed on continuous positive airway pressure by nasal prongs due
                                        to signs of breathing difficulty.  Temperature is 36.7 C (98 F), pulse is
                                        158/min, and respirations are 54/min.  Pulse oximetry is 92% on 60% oxygen. 
                                        Examination shows audible grunting and subcostal chest wall retractions. 
                                        Cardiac examination shows no murmurs.  A chest x-ray is obtained:</p>
<figure class="image" id="b2154398-e89d-4443-b6f1-5c509c2297dd"><a href="https://lh7-us.googleusercontent.com/8k8LlWK_uQ4WmSPOJkrXCVMvq6zI13pyV3rjd4ndp2YEOvgYlPBZAGhjAgWSywBXyOVsVCVdCVRRp3C3vRHepwVOyiZ1iEiYwaz0zefi_uC8lCBvqNbHtw1UT5aVQkGl-8hJbUcznEx8dsBv7_9di_E"><img loading="lazy" src="https://lh7-us.googleusercontent.com/8k8LlWK_uQ4WmSPOJkrXCVMvq6zI13pyV3rjd4ndp2YEOvgYlPBZAGhjAgWSywBXyOVsVCVdCVRRp3C3vRHepwVOyiZ1iEiYwaz0zefi_uC8lCBvqNbHtw1UT5aVQkGl-8hJbUcznEx8dsBv7_9di_E" style="width:509px"/></a>
</figure>
<p class="" id="a5debe3c-4543-4a02-9637-0bdbf603629e">The radiographic findings in
                                        this patient most likely represent which of the following?</p>
<table class="simple-table" id="6b04a19a-8089-41ad-9c71-02adc860dfdc">
<tbody>
<tr id="203b5038-3caf-47bd-8d5f-249552bd43e6">
<td class="" id="nnqW">A.</td>
<td class="" id="hXwr">Air leakage into pleural space</td>
<td class="" id="uO]d"></td>
</tr>
<tr id="312362b9-e34f-45dd-9794-b1bad3501bf7">
<td class="" id="nnqW">B.</td>
<td class="" id="hXwr">Alveolar and capillary dysplasia</td>
<td class="" id="uO]d"></td>
</tr>
<tr id="d47a8c7b-bef5-4066-bb87-372e5d7f7d98">
<td class="" id="nnqW">C.</td>
<td class="" id="hXwr">Diffuse atelectasis</td>
<td class="" id="uO]d"></td>
</tr>
<tr id="8a659006-2355-4bb3-b7ed-0e3064bb22ce">
<td class="" id="nnqW">D.</td>
<td class="" id="hXwr">Occlusion of the bronchioles</td>
<td class="" id="uO]d"></td>
</tr>
<tr id="65d71e8f-ec1a-44e1-b903-88f6acef0b8e">
<td class="" id="nnqW">E.</td>
<td class="" id="hXwr">Retained extracellular fluid</td>
<td class="" id="uO]d"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="f7f8386c-f18c-4086-85dd-fc07f1bcc62b">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="23461774-e6a0-4cfc-a1f7-59f3aacd02b9">
<tbody>
<tr id="537901d2-10ef-4482-a4b1-0da6835cbf60">
<td class="" id="xSWJ">A.</td>
<td class="" id="iDod">Air leakage into pleural space (12%)
                                                            </td>
<td class="" id="WgH&gt;"></td>
</tr>
<tr id="f1ad466c-ea1e-49d5-99a1-0966940e79fb">
<td class="" id="xSWJ">B.</td>
<td class="" id="iDod">Alveolar and capillary dysplasia
                                                                (17%)</td>
<td class="" id="WgH&gt;"></td>
</tr>
<tr id="6c3f7edc-be9c-4ae2-bb38-00dc186e65d7">
<td class="" id="xSWJ">C.</td>
<td class="" id="iDod">Diffuse atelectasis (53%)</td>
<td class="" id="WgH&gt;"></td>
</tr>
<tr id="8d57f2fc-f26a-4694-9df1-5be32fca6ec2">
<td class="" id="xSWJ">D.</td>
<td class="" id="iDod">Occlusion of the bronchioles (5%)
                                                            </td>
<td class="" id="WgH&gt;"></td>
</tr>
<tr id="683d6be9-f336-413d-8319-e0c7cb676660">
<td class="" id="xSWJ">E.</td>
<td class="" id="iDod">Retained extracellular fluid (10%)
                                                            </td>
<td class="" id="WgH&gt;"></td>
</tr>
</tbody>
</table>
<p class="" id="975f8dfa-df4f-456b-be53-f171f223a222">Incorrect</p>
<p class="" id="699c6b07-f3da-4ba5-b288-c0b95d8008c3">Correct answer C
                                                </p>
<p class="" id="192468ab-f8ef-48e7-bce9-484da9579f8b">53%Answered
                                                    correctly</p>
<p class="" id="0314fbbb-006d-41f9-9b62-97727bd9c1b5">18 secsTime Spent
                                                </p>
<p class="" id="4d774d66-3e79-475e-b21d-8bbeb36d046d">2024Version</p>
<ul class="bulleted-list" id="2a02cc29-52c0-4557-a72b-dfb9457e5287">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="e3eab91d-bf8e-4d9b-a8db-e678eabbaa9e">
<li style="list-style-type:disc"></li>
</ul>
<figure class="image" id="484a8e6d-dd56-43b0-9b74-6696fd83e029"><a href="https://lh7-us.googleusercontent.com/1AUo6MXMaeU_NJ7FY9uco9CvxYGFAcjIlB0WogzR4QybXiPn7xkyHpQY6CfeZQumP24XMD0U71vLnxY78ouURC30gyGPyIV94Oi0g5_ZVWs7AR0snAvx0aYVCfSbYaIQ9C_DBv02vOjJGI9Rowq7Ho8"><img loading="lazy" src="https://lh7-us.googleusercontent.com/1AUo6MXMaeU_NJ7FY9uco9CvxYGFAcjIlB0WogzR4QybXiPn7xkyHpQY6CfeZQumP24XMD0U71vLnxY78ouURC30gyGPyIV94Oi0g5_ZVWs7AR0snAvx0aYVCfSbYaIQ9C_DBv02vOjJGI9Rowq7Ho8" style="width:602px"/></a>
</figure>
<p class="" id="7a49099c-f7a5-4efb-9236-f3175a14d7a0">This preterm
                                                    infant with increased work of breathing and hypoxia has diffuse
                                                    ground-glass opacities and air bronchograms on imaging.  These
                                                    findings are consistent with neonatal respiratory distress syndrome
                                                    (RDS).  RDS is caused by immaturity of type 2 pneumocytes, which
                                                    normally produce alveolar surfactant.  Lack of surfactant causes
                                                    decreased compliance and increased surface tension of alveoli,
                                                    leading to alveolar collapse at the end of expiration.  This diffuse
                                                    atelectasis results in the characteristic reticular or ground-glass
                                                    opacities on chest x-ray.  Unlike alveoli, larger airways remain
                                                    patent and filled with air due to their cartilaginous walls, making
                                                    them visible (air bronchograms) against the reticular background.
                                                </p>
<p class="" id="baa66459-b083-4915-8853-c592f59347ef">Management of RDS
                                                    is respiratory support (to maintain alveolar pressure and prevent
                                                    collapse) and surfactant (to reduce surface tension).  During the
                                                    first week of life, type 2 pneumocytes begin to release endogenous
                                                    surfactant, and respiratory distress typically begins to improve.
                                                </p>
<p class="" id="c3102c08-4102-4511-8446-179dd3c4dd63">(Choice A) 
                                                    Pneumothorax is characterized by air leakage into the pleural space
                                                    with subsequent respiratory distress.  However, x-ray would show a
                                                    visceral pleural line with absent distal lung markings.</p>
<p class="" id="de3074fc-e2e4-4d6d-ac21-e1d43db79ce7">(Choice B) 
                                                    Bronchopulmonary dysplasia (BPD), which causes tachypnea,
                                                    retractions, and hypoxia, is classically caused by prolonged (&gt;1
                                                    month) mechanical ventilation, leading to lung injury and diffuse
                                                    fibrosis.  Another form of BPD is caused by an arrest of pulmonary
                                                    development, leading to a decreased number and function of alveoli
                                                    and pulmonary capillaries.  Although this infant is at risk for
                                                    developing both forms of BPD due to prematurity, this condition is
                                                    diagnosed at age &gt;1 month, not immediately after birth.</p>
<p class="" id="f962a489-aeb4-4a6c-903a-0ccfc8928829">(Choice D) 
                                                    Occlusion of the bronchioles by meconium causes meconium aspiration
                                                    syndrome.  In contrast to this patient, affected infants have patchy
                                                    bilateral infiltrates and lung hyperexpansion due to air trapping. 
                                                    In addition, this patient's amniotic fluid is clear, making
                                                    this diagnosis unlikely.</p>
<p class="" id="3b38ddb1-9386-4319-8aa3-48cc286dae96">(Choice E) 
                                                    Retained extracellular fluid is seen in transient tachypnea of the
                                                    newborn.  X-ray findings include streaky interstitial fluid
                                                    collections and fluid in the minor fissures, neither of which are
                                                    seen in this patient.</p>
<p class="" id="4bbcf0aa-f27a-4891-8665-b6e3cc300ffa">Educational
                                                    objective:</p>
<p class="" id="d76cadd7-688d-49af-b896-09cacb297a87">Neonatal
                                                    respiratory distress syndrome is characterized by inadequate
                                                    surfactant production, resulting in increased alveolar surface
                                                    tension and decreased alveolar compliance.  Diffuse alveolar
                                                    collapse (atelectasis) is seen on chest x-ray as ground-glass
                                                    opacities with air bronchograms.</p>
<p class="" id="608ec18a-fe22-4464-9e11-10a5b2e6abf5">References</p>
<ul class="bulleted-list" id="6afe112c-c528-45ac-8275-e954d0569028">
<li style="list-style-type:disc"><a href="http://www.ncbi.nlm.nih.gov/pubmed/25274969">Respiratory
                                                            distress in the newborn.</a></li>
</ul>
<p class="" id="c98bd3d2-4237-4058-b2c3-ab68b1572652">Pathophysiology
                                                </p>
<p class="" id="917d6221-4591-453a-8c0f-65619ef15ff1">Subject</p>
<p class="" id="c8699791-27ea-4207-aa4e-ed3a1d22f1e5">Pulmonary &amp;
                                                    Critical Care</p>
<p class="" id="8f066aa1-e24d-4f46-9ea0-b22973a84215">System</p>
<p class="" id="7f3b84d6-7d4a-43e5-8850-50fb24b0f51a">Neonatal
                                                    respiratory distress syndrome</p>
<p class="" id="613e1c9b-7303-4633-a410-067e89d0cf35">Topic</p>
<p class="" id="675c650a-25ec-4ec3-9bca-5f4aeef3d5be">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="464ceac1-1c40-4514-aa63-131c55057dbc">My Notebook</p>
<p class="" id="18ead554-e0bd-4d58-8674-adb5e33a7b1c">0</p>
<p class="" id="407e8747-434f-46ca-ae3c-4dbf1280728b">Flashcards</p>
<p class="" id="ca5d6564-1d39-4471-b1cc-0639ad471c9c">Feedback</p>
<p class="" id="3fa0cffb-715b-4607-8b15-4e5ed74eb71c">Suspend</p>
<p class="" id="efc7d653-eed5-400f-88db-0d2448a772a8">End Block</p>
<p class="" id="48cebbfb-8a24-41c5-8dd7-9ff6fd307a8f">‚ú®Done</p>
<p class="" id="8e5e164f-0d80-4cd2-a088-88d5dba75270">Exhibit Display
                                                </p>
<figure class="image" id="a35f5e16-6c0b-4721-a32f-67bd09fec98e"><a href="https://lh7-us.googleusercontent.com/xIOstcP0eZ92_qcL94BNyutoTb7JoiLyU8N945t3Xp8lnzQjrDWlat5906fo-AAFOiqlwlY3lxbYErqKMfAe2c2gBFC9ksKiC1E8de-4PvBdTALVblAvuPxwG69vc5nFVIIQ6UyWDwI2LH08a-5WWHw"><img loading="lazy" src="https://lh7-us.googleusercontent.com/xIOstcP0eZ92_qcL94BNyutoTb7JoiLyU8N945t3Xp8lnzQjrDWlat5906fo-AAFOiqlwlY3lxbYErqKMfAe2c2gBFC9ksKiC1E8de-4PvBdTALVblAvuPxwG69vc5nFVIIQ6UyWDwI2LH08a-5WWHw" style="width:602px"/></a>
</figure>
<p class="" id="96c337ea-c625-44ac-8f46-9f124345aa65">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="606ea923-ac10-4827-a4a1-6643c1ef2cce">ExistingMy
                                                    Notebook</p>
<p class="" id="fd0dbd91-7fa9-4a5c-8cb5-a91f80b32dd6">Exhibit Display
                                                </p>
<figure class="image" id="a54e7930-fcef-471c-aadb-ef923219b72f"><a href="https://lh7-us.googleusercontent.com/lCH9kLbatqo9tzl0D_a3GncoBUH_qANlP8k7cakbAP2o3k7FzaA5BPcxadzjiNutuZk3WREVxPHnR2na7su3iqaQvreicB5WWtw1g4yoZ12T61NW8ZuzKNGcSf5y3QVRqEkbLxyvZ9fLPTpGUD7Byqo"><img loading="lazy" src="https://lh7-us.googleusercontent.com/lCH9kLbatqo9tzl0D_a3GncoBUH_qANlP8k7cakbAP2o3k7FzaA5BPcxadzjiNutuZk3WREVxPHnR2na7su3iqaQvreicB5WWtw1g4yoZ12T61NW8ZuzKNGcSf5y3QVRqEkbLxyvZ9fLPTpGUD7Byqo" style="width:602px"/></a>
</figure>
<p class="" id="d15dfe47-578b-4b0d-b452-39a3570616b8">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="58c7e6f8-a329-4c9b-9351-90867875aa6f">ExistingMy
                                                    Notebook</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
