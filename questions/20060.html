
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>20060</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="06ed1789-b04b-4698-a24f-7c058c0074d7">A 26-year-old woman is
                                        evaluated for increasing discomfort in the right posterior mandible.  The
                                        patient has no prior medical conditions and takes no medications.  Physical
                                        examination is unremarkable with the exception of a partially erupted right
                                        mandibular third molar tooth.  Radiographs reveal impaction of the molar tooth. 
                                        Surgical tooth extraction under general anesthesia is performed.  During the
                                        surgery, the inferior alveolar nerve that is close to the tooth is inadvertently
                                        injured.  Which of the following is the most likely to be observed on the
                                        injured side?</p>
<table class="simple-table" id="fb27064c-0d69-410d-9ec9-c3f2d368b058">
<tbody>
<tr id="db91a55f-51bd-4acf-b523-309ca93c5aab">
<td class="" id="MAxB">A.</td>
<td class="" id="TXQs">Loss of general sensation in the anterior tongue
                                                </td>
<td class="" id="J}RG"></td>
</tr>
<tr id="98f9bd3b-1280-4a33-aabe-3af9577b8b27">
<td class="" id="MAxB">B.</td>
<td class="" id="TXQs">Loss of general sensation in the posterior tongue
                                                </td>
<td class="" id="J}RG"></td>
</tr>
<tr id="e11c4d3c-f47d-43fc-a40d-a5c67facd40e">
<td class="" id="MAxB">C.</td>
<td class="" id="TXQs">Loss of sensation in the lower lip</td>
<td class="" id="J}RG"></td>
</tr>
<tr id="4d6225a2-d69d-4391-ad12-72b7ff91a0d7">
<td class="" id="MAxB">D.</td>
<td class="" id="TXQs">Loss of taste sensation in anterior tongue</td>
<td class="" id="J}RG"></td>
</tr>
<tr id="5eee22f8-def4-4a3b-a6f7-6036488d0ef9">
<td class="" id="MAxB">E.</td>
<td class="" id="TXQs">Loss of taste sensation in the posterior tongue
                                                </td>
<td class="" id="J}RG"></td>
</tr>
<tr id="f8b46ab0-954f-4318-abac-addc48069eab">
<td class="" id="MAxB">F.</td>
<td class="" id="TXQs">Weakness of the masseter muscle</td>
<td class="" id="J}RG"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="5322a53f-38d5-4ea8-86ad-620196981f59">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="9fc5b4e1-8358-4b16-a6a4-632ba550460b">
<tbody>
<tr id="181f6cde-7b57-40df-96e0-e04cdb410039">
<td class="" id="mScJ">A.</td>
<td class="" id="~&lt;mH">Loss of general sensation in the
                                                                anterior tongue (12%)</td>
<td class="" id="XLeX"></td>
</tr>
<tr id="70daae33-1765-4ca0-bba9-03c802275708">
<td class="" id="mScJ">B.</td>
<td class="" id="~&lt;mH">Loss of general sensation in the
                                                                posterior tongue (8%)</td>
<td class="" id="XLeX"></td>
</tr>
<tr id="e1d3a3c0-1f7c-4ea0-bff8-0cff93c1a1da">
<td class="" id="mScJ">C.</td>
<td class="" id="~&lt;mH">Loss of sensation in the lower lip
                                                                (58%)</td>
<td class="" id="XLeX"></td>
</tr>
<tr id="8fb90e0b-094f-4fce-82b5-76870ebc5b4a">
<td class="" id="mScJ">D.</td>
<td class="" id="~&lt;mH">Loss of taste sensation in
                                                                anterior tongue (6%)</td>
<td class="" id="XLeX"></td>
</tr>
<tr id="388bc4c7-f92e-44c9-b939-ff6700d1dd1c">
<td class="" id="mScJ">E.</td>
<td class="" id="~&lt;mH">Loss of taste sensation in the
                                                                posterior tongue (3%)</td>
<td class="" id="XLeX"></td>
</tr>
<tr id="1dc8af4e-ca28-45d2-bd22-5b3fc2337445">
<td class="" id="mScJ">F.</td>
<td class="" id="~&lt;mH">Weakness of the masseter muscle
                                                                (11%)</td>
<td class="" id="XLeX"></td>
</tr>
</tbody>
</table>
<p class="" id="386810bf-9f0a-425a-bf06-242023d08d91">Correct</p>
<p class="" id="94779f64-3b21-40b6-b254-d153456a55e0">58%Answered
                                                    correctly</p>
<p class="" id="5e726c4e-826d-4dee-8f0f-8202a7e7ab9d">01 min, 06
                                                    secsTime Spent</p>
<p class="" id="7c355ffd-b3b0-499c-b582-c9495059baa7">2024Version</p>
<ul class="bulleted-list" id="ddabae0b-bd4d-4450-a16e-bf6f31009467">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="07df3d02-7a7b-4d03-9b0b-c18e10e81cbd">
<li style="list-style-type:disc"></li>
</ul>
<figure class="image" id="ab74e2f9-6e7e-48a2-a0d6-dcd35ae07df8"><a href="https://lh7-us.googleusercontent.com/pq1jyMgKCrvotv2MGgHP1x9YrUh-sGYqNiPby6DPB5JyAzUFGjClRDW68DDT-s5xLmX3H-8PU-MAF6FjAwADZ06CVXx0gma-K_1MYVtrBFCTj9pTTPamXSIdqJd5oIQd7q9PEnZlyky-kkbuKh4UI6I"><img loading="lazy" src="https://lh7-us.googleusercontent.com/pq1jyMgKCrvotv2MGgHP1x9YrUh-sGYqNiPby6DPB5JyAzUFGjClRDW68DDT-s5xLmX3H-8PU-MAF6FjAwADZ06CVXx0gma-K_1MYVtrBFCTj9pTTPamXSIdqJd5oIQd7q9PEnZlyky-kkbuKh4UI6I" style="width:602px"/></a>
</figure>
<p class="" id="55491897-216b-4cdf-aac2-94757306c5cd">The inferior
                                                    alveolar nerve is a branch of the mandibular nerve (CN V3).  After
                                                    branching from CN V3, it enters the mandibular foramen to travel
                                                    within the mandibular canal, where it can be vulnerable to
                                                    iatrogenic injury during dental procedures.  From inside the
                                                    mandibular canal, it gives off small branches to provide sensory
                                                    innervation to each of the lower teeth.</p>
<p class="" id="7e89d944-7a92-4be6-853d-ccc3690345f3">The inferior
                                                    alveolar nerve also gives off the mental nerve, which exits the
                                                    mandibular canal through the mental foramen.  The mental nerve
                                                    conveys sensory information from the chin and lower lip (both skin
                                                    and mucosal surfaces).  Therefore, iatrogenic injury to the inferior
                                                    alveolar nerve often results in unilateral numbness of the lower
                                                    teeth, chin, and lower lip.</p>
<p class="" id="c943d529-6fce-4290-82e1-3f2480841b1a">Nerve blocks can
                                                    be performed at the mandibular foramen to provide anesthesia for
                                                    dental procedures or at the mental foramen to facilitate laceration
                                                    repair of the chin and lower lip.</p>
<p class="" id="e43f06b3-3139-48f3-9ec1-6c2e5512f645">(Choice A) 
                                                    General sensation in the anterior tongue is carried by the lingual
                                                    nerve.  It is also a branch of CN V3, but it arises proximal to the
                                                    inferior alveolar nerve branch.  It passes between the medial
                                                    pterygoid muscle and the ramus of the mandible (not into it), then
                                                    through the floor of mouth where it crosses (and can be injured in
                                                    procedures involving) the submandibular gland duct.</p>
<p class="" id="dff09216-fb2d-4da9-b76c-03bca922732b">(Choices B and E) 
                                                    Both general and taste sensation in the posterior tongue are carried
                                                    by the glossopharyngeal nerve (CN IX).</p>
<p class="" id="192bda66-3de2-4ddd-86f0-69800aa16c04">(Choice D)  Taste
                                                    sensation in the anterior tongue is mediated by the chorda tympani
                                                    nerve, a branch of the facial nerve (CN VII) that travels with the
                                                    lingual nerve.</p>
<p class="" id="e55a629e-05aa-4ec6-8fd6-c95cb790426f">(Choice F)  The
                                                    masseter muscle is innervated by the masseteric branch of the
                                                    anterior division of the mandibular nerve (CN V3).  This arises from
                                                    CN V3 proximal to the branching of the inferior alveolar nerve.</p>
<p class="" id="bdce2369-b82e-4b11-b949-9b62470ec356">Educational
                                                    objective:</p>
<p class="" id="88cf09fe-29ef-4de4-a6a8-912a4a0b5844">The inferior
                                                    alveolar nerve travels within the mandibular canal to provide
                                                    sensation to the lower teeth and can be injured during dental
                                                    procedures.  It gives off the mental nerve, which exits through the
                                                    mental foramen to provide sensation to the chin and lower lip.</p>
<p class="" id="a8cb4eda-19b2-4f46-aeab-fbaaf158e4cc">Anatomy</p>
<p class="" id="c1c9ad33-353a-4d50-9a38-62f15cfc1130">Subject</p>
<p class="" id="cbe0a8d7-1010-43e7-aa56-59346f07953e">Nervous System</p>
<p class="" id="cdb4ae34-474f-4abb-892a-c688cf47e2cb">System</p>
<p class="" id="85fca0ab-bbfd-49b2-b1be-3f9bad935f6f">Dental injury</p>
<p class="" id="258bca77-59ae-4179-862e-cfdba569d16b">Topic</p>
<p class="" id="445be1a2-384f-4c7e-828d-5d37ca698e93">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="1ce2ca33-2c49-4881-a7cc-09451f4706d1">My Notebook</p>
<p class="" id="14fbf108-9b0f-459a-8d71-f67d8c2bad81">0</p>
<p class="" id="abdbe3e7-ae81-4762-9a92-51280128675a">Flashcards</p>
<p class="" id="967b1f56-08c9-4cd2-8e0e-21cf30ecdb4d">Feedback</p>
<p class="" id="0224f70d-b697-48fc-bac9-bf723fe8170c">Suspend</p>
<p class="" id="d2479340-c975-4aa8-9a68-cf255708f127">End Block</p>
<p class="" id="374ded40-089d-46af-9412-6da15238b36a">Exhibit Display
                                                </p>
<figure class="image" id="6ebcf498-79f1-4b36-aa74-282d3df4df21"><a href="https://lh7-us.googleusercontent.com/SMmVhLKvBVjdD2ExBuvstnHKn4IVYcFCGXKSTC-iODfYG0AcpfHAPb0v8ldk6lsog9MbKRIyMmXzszGskyl234R_X8meWPWKw8DUF-fQj6jF5vd9WUUISb-niKHU0vfh9WNa3Q4U8yKwsOxKHdDBkI8"><img loading="lazy" src="https://lh7-us.googleusercontent.com/SMmVhLKvBVjdD2ExBuvstnHKn4IVYcFCGXKSTC-iODfYG0AcpfHAPb0v8ldk6lsog9MbKRIyMmXzszGskyl234R_X8meWPWKw8DUF-fQj6jF5vd9WUUISb-niKHU0vfh9WNa3Q4U8yKwsOxKHdDBkI8" style="width:602px"/></a>
</figure>
<p class="" id="69e49fca-df55-427a-82b8-16a1444a4f9f">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="986ecce4-c7e9-437d-b192-c999053bd0f3">ExistingMy
                                                    Notebook</p>
<p class="" id="4a7b7f69-e8ba-420f-a6e9-95c0a600dffd">‚ú®Done</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
