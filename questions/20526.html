
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>20526</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="8c94d9b4-f010-4d1a-adae-b16ecee01bfe">A 45-year-old man comes to the
                                        office due to a 6-month history of headache, sweating, and pain in his lower
                                        back, knees, and small joints of his hands.  The pain increases with physical
                                        activity.  He is unable to remove his wedding ring due to swollen fingers.  The
                                        patient has also experienced excessive urination and loss of libido. 
                                        Examination shows a prominent jaw and enlarged supraorbital ridges.  The
                                        patient's hands are notably broad with thickened fingers.  Multiple skin
                                        tags are noted on the nape of the neck.  Laboratory evaluation reveals low serum
                                        testosterone levels.  Which of the following is the most likely underlying cause
                                        of this patient's joint symptoms?</p>
<table class="simple-table" id="377d6078-5d8b-4f1f-87d0-bcbe63684de7">
<tbody>
<tr id="b47fe59a-8098-4d86-b491-9a06319bafb6">
<td class="" id="sUUM">A.</td>
<td class="" id="gACn">Accumulation of iron</td>
<td class="" id="RNtB"></td>
</tr>
<tr id="df2241e8-1058-45cb-98a3-cfdc547b5a83">
<td class="" id="sUUM">B.</td>
<td class="" id="gACn">Deposition of crystals</td>
<td class="" id="RNtB"></td>
</tr>
<tr id="be5622d5-c364-4fed-a0ff-1ec4c009537f">
<td class="" id="sUUM">C.</td>
<td class="" id="gACn">Formation of noncaseating granulomas</td>
<td class="" id="RNtB"></td>
</tr>
<tr id="eff10546-0cbb-4458-accf-06df3dded9b5">
<td class="" id="sUUM">D.</td>
<td class="" id="gACn">Hypertrophy of the articular cartilage</td>
<td class="" id="RNtB"></td>
</tr>
<tr id="87ec0011-4277-4149-a4a5-5ddc507abbb2">
<td class="" id="sUUM">E.</td>
<td class="" id="gACn">Infiltration of macrophages</td>
<td class="" id="RNtB"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="f4b171db-2aab-4382-a379-3be884f8f26a">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="4f83ca24-cdc4-4f3e-9218-9ef0041794a9">
<tbody>
<tr id="2cfbc6c6-f1cd-4e0b-abbe-3888a220a5b1">
<td class="" id="_:`F">A.</td>
<td class="" id="M[zP">Accumulation of iron (8%)</td>
<td class="" id="=oFb"></td>
</tr>
<tr id="a0526dec-d59d-4280-9ad3-e7b766cd0317">
<td class="" id="_:`F">B.</td>
<td class="" id="M[zP">Deposition of crystals (5%)</td>
<td class="" id="=oFb"></td>
</tr>
<tr id="b66b59f1-fe66-44a9-8d9a-050d60d50801">
<td class="" id="_:`F">C.</td>
<td class="" id="M[zP">Formation of noncaseating granulomas
                                                                (4%)</td>
<td class="" id="=oFb"></td>
</tr>
<tr id="2e77e0fc-a0e1-42cb-bd2d-1ad813430868">
<td class="" id="_:`F">D.</td>
<td class="" id="M[zP">Hypertrophy of the articular
                                                                cartilage (74%)</td>
<td class="" id="=oFb"></td>
</tr>
<tr id="011c3e17-fa67-448f-8c29-3e1932d2879f">
<td class="" id="_:`F">E.</td>
<td class="" id="M[zP">Infiltration of macrophages (5%)</td>
<td class="" id="=oFb"></td>
</tr>
</tbody>
</table>
<p class="" id="eac61caa-bf6d-42ba-b529-7361061fcee6">Omitted</p>
<p class="" id="05d8999e-4f68-4a24-b9da-33b5ab5716e8">Correct answer D
                                                </p>
<p class="" id="df7e9e9a-caaf-4bfe-b369-3a98a4bb7dba">74%Answered
                                                    correctly</p>
<p class="" id="5f7abe12-6e67-452d-88c2-0f0731fce16b">0 secsTime Spent
                                                </p>
<p class="" id="71e52fa4-1bc3-438a-958b-190d910b9815">2024Version</p>
<ul class="bulleted-list" id="9fe1d195-c822-4b79-ae9f-d6e669008c9b">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="d8159d8b-c6fc-427e-bb05-e38b2e89a329">
<li style="list-style-type:disc"></li>
</ul>
<figure class="image" id="3154537f-74df-4d53-be76-5b8f6100177d"><a href="https://lh7-us.googleusercontent.com/svB309pQWB92ESF4lrizQzVW9Jn1RBbAOrCQw3304x5s74RGyyGZBZcQXrum1osv2PnXUaiaBztY5TycvjGgKH3GNXbwUnI6zig-aHa3Eat-o1XWHqGI45DfW5UU-8odIZ7xsH5XV0nV6LMhnZcdrLM"><img loading="lazy" src="https://lh7-us.googleusercontent.com/svB309pQWB92ESF4lrizQzVW9Jn1RBbAOrCQw3304x5s74RGyyGZBZcQXrum1osv2PnXUaiaBztY5TycvjGgKH3GNXbwUnI6zig-aHa3Eat-o1XWHqGI45DfW5UU-8odIZ7xsH5XV0nV6LMhnZcdrLM" style="width:602px"/></a>
</figure>
<p class="" id="91ec04b7-6fbe-4d31-8c06-dba267735f19">This patient has
                                                    common features of acromegaly, including coarsening of facial
                                                    features (eg, brow protrusion, prognathism), broadening of the
                                                    hands, and skin involvement (eg, skin tags, hyperhidrosis). 
                                                    Acromegaly is caused by excessive production of growth hormone (GH)
                                                    and is most often due to a pituitary somatotroph adenoma.  Excess GH
                                                    both directly and indirectly (via release of insulin-like growth
                                                    factor-1 from the liver) leads to overgrowth of many tissues,
                                                    including bone, cartilage, and visceral organs.</p>
<p class="" id="98928169-e45c-421d-99d5-2d51c77f21ab">Acromegaly can
                                                    affect the joints in both the axial and the appendicular skeleton. 
                                                    Excessive GH causes hyperplasia of articular chondrocytes and
                                                    synovial hypertrophy, which may appear on x-ray as widening of the
                                                    joint space.  As acromegalic arthropathy continues, there is
                                                    degeneration of articular cartilage and periarticular bone
                                                    resembling osteoarthritis.</p>
<p class="" id="da347185-32cd-4efd-b341-b057865ac86b">Complications of
                                                    the pituitary mass itself include headache, visual field defects
                                                    (compression of optic chiasm), and abnormalities of other pituitary
                                                    hormones.  Hypogonadism can occur secondary to hyperprolactinemia
                                                    (from disrupted negative regulation of prolactin secretion) or
                                                    directly due to compression of pituitary gonadotrophs.</p>
<p class="" id="84e2aaa4-620a-4b9b-9028-5875026ac4cc">(Choice A) 
                                                    Hereditary hemochromatosis (HH) can cause arthritis due to
                                                    accumulation of iron in the articular cartilage and synovium. 
                                                    Although HH can also cause central hypogonadism, this patient's
                                                    skeletal and facial features are more consistent with acromegaly.
                                                </p>
<p class="" id="41a290a0-ad17-49cc-b351-431e8403872b">(Choice B) 
                                                    Crystal deposition arthritis typically presents initially with acute
                                                    inflammatory monarthritis at the first metatarsophalangeal joints
                                                    and knees (gout), or knees, wrists, shoulders, and elbows
                                                    (pseudogout [ie, calcium pyrophosphate deposition arthritis]). 
                                                    These disorders would not cause facial changes or hypogonadism.</p>
<p class="" id="eef7a008-15db-424a-b4d6-44507c0438a0">(Choice C) 
                                                    Sarcoidosis is characterized by the formation of noncaseating
                                                    granulomas in various tissues.  Sarcoid arthropathy often occurs
                                                    acutely in association with erythema nodosum and hilar adenopathy
                                                    (Lofgren syndrome); chronic arthritis is less common and usually
                                                    occurs in patients with significant pulmonary disease.</p>
<p class="" id="c1b6c1c1-c91b-4851-bb23-4532c7603466">(Choice E) 
                                                    Rheumatoid arthritis (RA) involves a complex inflammatory response,
                                                    culminating in an influx of monocytes that differentiate into
                                                    inflammatory macrophages in the synovium.  RA commonly presents with
                                                    chronic swelling of the metacarpophalangeal joints but does not
                                                    cause enlargement of the supraorbital ridges or jaw.</p>
<p class="" id="cc0ca3a0-81bc-4627-bee1-c36fb9b4d184">Educational
                                                    objective:</p>
<p class="" id="6ac6a04a-3886-409b-9a2f-b06dce91789e">Acromegaly can
                                                    affect the joints in both the axial and the appendicular skeleton. 
                                                    Excessive growth hormone and insulin-like growth factor-1 cause
                                                    hyperplasia of articular chondrocytes and synovial hypertrophy,
                                                    leading to later degeneration of articular cartilage and
                                                    periarticular bone.</p>
<p class="" id="569cf6e8-61c5-4c46-b174-9c6db9622230">Pathology</p>
<p class="" id="e93737c6-c765-4014-9984-ca9840e5629a">Subject</p>
<p class="" id="d4b027d7-b410-469b-8beb-d4a4b215fc97">Endocrine,
                                                    Diabetes &amp; Metabolism</p>
<p class="" id="eb884867-e757-4e53-8d3f-4e63aaedf34d">System</p>
<p class="" id="49e5df17-5528-46d5-9ee1-2bea970f6638">Acromegaly</p>
<p class="" id="7e76dc1c-44bb-43b2-b7be-a10486b3f2cc">Topic</p>
<p class="" id="a09e0a6e-730b-4db2-8dd2-349e529d1928">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="f3f32d3c-cbda-41ba-8cfa-d774ef9b3b12">REVIEW</p>
<p class="" id="c4932c4d-8916-4b67-86c2-794ec059af62">‚ú®Done</p>
<p class="" id="8f45f470-39b9-459c-854c-b292b0999e22">Exhibit Display
                                                </p>
<figure class="image" id="ee42a885-4b50-4d21-98ad-1de26032f061"><a href="https://lh7-us.googleusercontent.com/lyIngpYWVSAg1rGc7-EL1FsKIFyo8CDuVVfFhfiVsuNcP0o2G-_JmHwFZ5gm0LRO9z2i0oSg9LCFVOXoSNraFj3dQ6tnE42F-BHfDoXqf6Kq93FHJXb4q9ueR_CYdIaXTEUTMRq9qbJ5NqPaC6jdklE"><img loading="lazy" src="https://lh7-us.googleusercontent.com/lyIngpYWVSAg1rGc7-EL1FsKIFyo8CDuVVfFhfiVsuNcP0o2G-_JmHwFZ5gm0LRO9z2i0oSg9LCFVOXoSNraFj3dQ6tnE42F-BHfDoXqf6Kq93FHJXb4q9ueR_CYdIaXTEUTMRq9qbJ5NqPaC6jdklE" style="width:440px"/></a>
</figure>
<p class="" id="c605cc38-05c8-4318-844e-b72027854c7f">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="07528d84-63a3-405d-a709-3a28bc20c976">ExistingMy
                                                    Notebook</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
