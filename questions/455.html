
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>455</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="0ca10c19-ae02-4484-ab22-17e3f7f904ba">A 67-year-old man comes to the
                                        office due to generalized weakness, easy fatigability, anorexia, and
                                        intermittent nausea for the past several months.  He also says that he is
                                        "itching and scratching a lot."  Physical examination shows bilateral
                                        lower extremity pitting edema and skin excoriations.  Laboratory results show a
                                        serum creatinine level of 3.4 mg/dL and a blood urea nitrogen level of 48
                                        mg/dL.  A renal biopsy is performed.  Light microscopy of the tissue sample
                                        shows widespread narrowing of the renal arterioles with deposition of
                                        homogeneous, glassy material in the vessel walls that stains pink with periodic
                                        acid-Schiff (PAS) stain.  This patient most likely has which of the following
                                        underlying conditions?</p>
<table class="simple-table" id="522a6049-47d8-45d8-9a21-2bae3bd50815">
<tbody>
<tr id="f4250308-6d69-4528-98d0-d374cb2bf093">
<td class="" id="?IpD">A.</td>
<td class="" id="MzgY">Atheroembolic renal disease</td>
<td class="" id="`w[A"></td>
</tr>
<tr id="e7860608-bd6f-4d3c-b10b-b725f5acf096">
<td class="" id="?IpD">B.</td>
<td class="" id="MzgY">Diabetes mellitus</td>
<td class="" id="`w[A"></td>
</tr>
<tr id="fa993969-b9bb-4029-a47e-39bf1c5221d9">
<td class="" id="?IpD">C.</td>
<td class="" id="MzgY">Malignant hypertension</td>
<td class="" id="`w[A"></td>
</tr>
<tr id="f948702a-be9e-4118-88ee-0e3bd0c95ade">
<td class="" id="?IpD">D.</td>
<td class="" id="MzgY">Multiple myeloma</td>
<td class="" id="`w[A"></td>
</tr>
<tr id="2f30d0bc-b288-40e2-9d91-bba005460d0d">
<td class="" id="?IpD">E.</td>
<td class="" id="MzgY">Rapidly progressive glomerulonephritis</td>
<td class="" id="`w[A"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="7efd85c5-ea6d-45c2-91f2-f80dffa9f3aa">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="7bdbf461-d0b2-45f4-ac30-a3f4619d3737">
<tbody>
<tr id="8c4a24de-7e20-4025-ba9d-cbd098536c80">
<td class="" id="aR_O">A.</td>
<td class="" id="Rb_f">Atheroembolic renal disease (9%)</td>
<td class="" id="xsOZ"></td>
</tr>
<tr id="102e44f5-8a5f-43c3-b3da-cd9a9e40775e">
<td class="" id="aR_O">B.</td>
<td class="" id="Rb_f">Diabetes mellitus (37%)</td>
<td class="" id="xsOZ"></td>
</tr>
<tr id="9ab44486-a037-43dc-9a82-34389426977d">
<td class="" id="aR_O">C.</td>
<td class="" id="Rb_f">Malignant hypertension (24%)</td>
<td class="" id="xsOZ"></td>
</tr>
<tr id="05bc1afb-45ee-448e-9c30-7a3a451391ec">
<td class="" id="aR_O">D.</td>
<td class="" id="Rb_f">Multiple myeloma (17%)</td>
<td class="" id="xsOZ"></td>
</tr>
<tr id="b8af7c5a-0537-421e-8961-afb3de58dd4b">
<td class="" id="aR_O">E.</td>
<td class="" id="Rb_f">Rapidly progressive
                                                                glomerulonephritis (10%)</td>
<td class="" id="xsOZ"></td>
</tr>
</tbody>
</table>
<p class="" id="cd7dcf35-da81-4227-951d-85c9fb57f60f">Incorrect</p>
<p class="" id="d560b24d-6f83-4445-b975-da7a4ef6557f">Correct answer B
                                                </p>
<p class="" id="8b90be2c-fc20-4537-80fc-c8996104a4a5">37%Answered
                                                    correctly</p>
<p class="" id="c41b83e6-0c52-4ba3-a490-261d2b3f0b9b">17 secsTime Spent
                                                </p>
<p class="" id="8520b325-460b-4cf3-8996-7fc2b27c6b41">2024Version</p>
<ul class="bulleted-list" id="3080fe1e-abb8-409b-895f-89423011d268">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="50db496f-4ab8-4354-9826-d8b977332164">
<li style="list-style-type:disc"></li>
</ul>
<p class="" id="1e1ab166-2589-40af-b23f-029f918f8d0b">This
                                                    patient's symptoms (eg, fatigue, weakness, itching) are most
                                                    likely due to accumulation of uremia toxins secondary to progressive
                                                    chronic kidney disease.  His renal biopsy shows deposition of
                                                    eosinophilic hyaline material in the intima and media of small
                                                    arteries and arterioles, which is characteristic of hyaline
                                                    arteriolosclerosis.  It is typically seen in patients with untreated
                                                    or poorly controlled hypertension (HTN) or diabetes mellitus. 
                                                    Chronic/repetitive endothelial injury caused by hemodynamic stress
                                                    or hyperglycemia causes leakage of plasma constituents across the
                                                    vascular endothelium and stimulates smooth muscle cell (SMC)
                                                    proliferation and excessive extracellular matrix production.</p>
<p class="" id="f4c25bc8-56ac-4a37-8cc9-f8861c1251c9">(Choice A) 
                                                    Atheroembolic renal disease typically occurs after manipulation of
                                                    the aorta (eg, abdominal aortic aneurysm repair) in adults with
                                                    widespread atherosclerosis.  Atheroemboli with cholesterol clefts
                                                    would be seen within the arterial lumen.</p>
<p class="" id="db39ea6f-e29d-4c93-a9bd-20e496ef9e85">(Choice C) 
                                                    Malignant hypertension (extreme or rapidly developing hypertension)
                                                    causes fibrinoid necrosis and hyperplastic arteriolosclerosis. 
                                                    Fibrinoid necrosis is characterized by localized destruction of the
                                                    vascular wall with a circumferential ring of pink, amorphous
                                                    material surrounding the lumen.  Hyperplastic arteriolosclerosis
                                                    consists of onion-like, concentric thickening of the walls of
                                                    arterioles due to laminated layers of SMCs with intervening basement
                                                    membrane reduplication (onion skinning).  This patient's lack
                                                    of concentric SMC thickening and absence of vascular necrosis are
                                                    more suggestive of hyaline arteriolosclerosis.</p>
<p class="" id="9b8a1f9e-091d-4746-9915-c88986a95f3a">(Choice D) 
                                                    Nephropathy in multiple myeloma is most often due to excess
                                                    excretion of free light chains (Bence Jones proteins) that
                                                    precipitate with Tamm-Horsfall protein to form obstructing tubular
                                                    casts (cast nephropathy).  These casts are seen as amorphous hyaline
                                                    material in the tubular lumen.</p>
<p class="" id="4ba65a71-3700-4542-a712-59142367b5cf">(Choice E) 
                                                    Rapidly progressive glomerulonephritis (RPGN) is characterized by
                                                    the formation of glomerular crescents composed of proliferating
                                                    parietal cells, lymphocytes, macrophages, and fibrin.  RPGN may
                                                    occur in the absence of a systemic vasculitic syndrome; therefore,
                                                    renal arteriolar lesions are not a defining feature.</p>
<p class="" id="a035e817-3b58-4a9e-b2bf-fd268d6588d9">Educational
                                                    objective:</p>
<p class="" id="7de61667-ac48-430c-8a8c-43c631c0e0b9">Homogeneous
                                                    deposition of eosinophilic hyaline material in the intima and media
                                                    of small arteries and arterioles characterizes hyaline
                                                    arteriolosclerosis.  This is typically produced by untreated or
                                                    poorly controlled hypertension and/or diabetes.</p>
<p class="" id="c379285d-2fc0-4b24-b1f1-6bc0bae8d874">Pathology</p>
<p class="" id="65c32e23-6ca3-4ab0-adb4-af6e8f6d5ce3">Subject</p>
<p class="" id="aad00b02-74d6-4e82-9f4c-fc00c10f974b">Renal, Urinary
                                                    Systems &amp; Electrolytes</p>
<p class="" id="6f1bb716-c560-4f92-a346-dbc4181f2a31">System</p>
<p class="" id="261a8103-be64-4d2d-9257-a8407ffefe2a">Hypertensive
                                                    nephropathy</p>
<p class="" id="4dc82a00-fd50-453d-86d6-a3ee37776877">Topic</p>
<p class="" id="86a9e0e6-d42a-4839-b581-c2419b44e02a">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="04e75244-1db5-44e8-83d1-21deed9bd671">My Notebook</p>
<p class="" id="cbcd2a3f-db3f-4b0e-a91b-ff7d7794220a">0</p>
<p class="" id="fc85e600-1125-47da-a8bd-01bbd9def034">Flashcards</p>
<p class="" id="edd40823-0ef9-4486-bcc4-1e1ef281eeb2">Feedback</p>
<p class="" id="26448ab6-bcef-4f04-9ef1-372628043e3e">Suspend</p>
<p class="" id="97544bc8-9e79-4a28-aba3-e6ba43e25693">End Block</p>
<p class="" id="bc6341cc-e637-448f-abd0-866fe6e56ea9">‚ú®Done</p>
<p class="" id="251447bf-5d1b-4b75-b3d1-c4f3c48bb23a">Exhibit Display
                                                </p>
<figure class="image" id="a2676b71-683f-417b-946f-e65a6470e718"><a href="https://lh7-us.googleusercontent.com/QUTPF_iFIaa2k8Ia1X94qidwTkhviv3UIbCgRzNYURto2RGRnpKW1QPKXa3FLm_mW6Nm1TYwQPZEHFbUKpLpUeZ6Q707ccBR8at3QnR2tG3vPNN4FQOgindtGjMx1Ayfuu5OIqP_sXeeX_90aP_Kq6I"><img loading="lazy" src="https://lh7-us.googleusercontent.com/QUTPF_iFIaa2k8Ia1X94qidwTkhviv3UIbCgRzNYURto2RGRnpKW1QPKXa3FLm_mW6Nm1TYwQPZEHFbUKpLpUeZ6Q707ccBR8at3QnR2tG3vPNN4FQOgindtGjMx1Ayfuu5OIqP_sXeeX_90aP_Kq6I" style="width:602px"/></a>
</figure>
<p class="" id="458af4a4-c74a-425a-9ac1-6611ab02ad42">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="23a2e760-b46e-4ee1-b74d-5574e314b84c">ExistingMy
                                                    Notebook</p>
<p class="" id="eec9ec01-5eb5-4181-bcf7-cd54886a4a8e">Exhibit Display
                                                </p>
<figure class="image" id="5190854d-8c49-4383-9bcb-c983647a1bf9"><a href="https://lh7-us.googleusercontent.com/j50Fz2ljeNqGBVWjy5Zb0W4QJtZ-b8ecBn79hwO-dwli-2VruwAsF-hDPaQDR3VpVzYSbwxGMBNLzvxX7Mzouo7XknlxpJjeQcq8xzHZOh9b-okDoPJhoe0YxeW6iwrmKuU0w_42jwXGtrj4bU8j6Vs"><img loading="lazy" src="https://lh7-us.googleusercontent.com/j50Fz2ljeNqGBVWjy5Zb0W4QJtZ-b8ecBn79hwO-dwli-2VruwAsF-hDPaQDR3VpVzYSbwxGMBNLzvxX7Mzouo7XknlxpJjeQcq8xzHZOh9b-okDoPJhoe0YxeW6iwrmKuU0w_42jwXGtrj4bU8j6Vs" style="width:602px"/></a>
</figure>
<p class="" id="a18d3acd-0d10-4b90-b899-44f359493650">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="1c43cc27-430f-4e51-b7ac-136574fd431d">ExistingMy
                                                    Notebook</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
