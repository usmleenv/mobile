
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>729</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="32b35c1a-3383-44e0-a31c-71981d2c5c2d">A 23-year-old woman comes to
                                        the hospital due to fever, chills, dyspnea, and cough for the past several
                                        days.  She also has sharp right-sided chest pain exacerbated by breathing.  Her
                                        temperature is 39 C (102 F), blood pressure is 115/70 mm Hg, and pulse is
                                        108/min.  On examination, the patient has several needle track marks on both
                                        arms.  There is a 3/6 holosystolic murmur heard best at the lower sternal border
                                        that increases on inspiration.  Chest imaging reveals scattered bilateral
                                        peripheral lung opacities.  HIV testing is negative.  This patient's blood
                                        cultures are most likely to grow which of the following organisms?</p>
<table class="simple-table" id="16eb30bb-70e9-4abd-bf4b-8feb359167bb">
<tbody>
<tr id="5b3b04fe-2a53-4c35-a389-c8ec10afd8f0">
<td class="" id="htOL">A.</td>
<td class="" id="QeFj"><em>Candida albicans</em></td>
<td class="" id="]X]{"></td>
</tr>
<tr id="09bd9b75-140f-48e2-a533-7d0a3b1ce370">
<td class="" id="htOL">B.</td>
<td class="" id="QeFj"><em>Eikenella corrodens</em></td>
<td class="" id="]X]{"></td>
</tr>
<tr id="33a7755f-ca71-48c9-9072-e536794c5a4d">
<td class="" id="htOL">C.</td>
<td class="" id="QeFj"><em>Klebsiella pneumoniae</em></td>
<td class="" id="]X]{"></td>
</tr>
<tr id="e5c5a2b0-7127-4dea-8463-854229f0ea9a">
<td class="" id="htOL">D.</td>
<td class="" id="QeFj"><em>Nocardia asteroides</em></td>
<td class="" id="]X]{"></td>
</tr>
<tr id="35ef456b-0912-4221-9371-a91b4a512613">
<td class="" id="htOL">E.</td>
<td class="" id="QeFj"><em>Peptostreptococcus</em></td>
<td class="" id="]X]{"></td>
</tr>
<tr id="61eef122-abb4-4eb9-ab75-f9f26bbb9a47">
<td class="" id="htOL">F.</td>
<td class="" id="QeFj"><em>Staphylococcus aureus</em></td>
<td class="" id="]X]{"></td>
</tr>
<tr id="86c86f73-6ba7-49ea-8c3a-19077e2980ea">
<td class="" id="htOL">G.</td>
<td class="" id="QeFj"><em>Streptococcus gallolyticus</em> (formerly
                                                    <em>S bovis</em>)</td>
<td class="" id="]X]{"></td>
</tr>
<tr id="c41d75d5-8ee3-4f64-9102-6a8172c5cb0d">
<td class="" id="htOL">H.</td>
<td class="" id="QeFj"><em>Streptococcus pneumoniae</em></td>
<td class="" id="]X]{"></td>
</tr>
<tr id="63935a49-9c00-471b-baa9-1aa4d59ed9e5">
<td class="" id="htOL">I.</td>
<td class="" id="QeFj"><em>Viridans group streptococcus</em></td>
<td class="" id="]X]{"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="d2fbecf7-5682-42ce-93da-5ee43628cf4c">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="6be107c1-e4fc-4155-9be4-1e546554def2">
<tbody>
<tr id="b2f64bb5-73ab-43ef-8589-8e7715203a92">
<td class="" id="fMIB">A.</td>
<td class="" id="~Udt"><em>Candida albicans</em> (1%)</td>
<td class="" id="kRgI"></td>
</tr>
<tr id="b343ca87-dbf6-4e3d-b255-b7736227c34d">
<td class="" id="fMIB">B.</td>
<td class="" id="~Udt"><em>Eikenella corrodens</em> (0%)
                                                            </td>
<td class="" id="kRgI"></td>
</tr>
<tr id="f34ab957-a6c4-4975-9f26-0309f463a0d6">
<td class="" id="fMIB">C.</td>
<td class="" id="~Udt"><em>Klebsiella pneumoniae</em> (1%)
                                                            </td>
<td class="" id="kRgI"></td>
</tr>
<tr id="e80f52b8-8097-4e7b-bf7e-38c4e52603e6">
<td class="" id="fMIB">D.</td>
<td class="" id="~Udt"><em>Nocardia asteroides</em> (0%)
                                                            </td>
<td class="" id="kRgI"></td>
</tr>
<tr id="600d7928-d8c1-4cfa-bcc0-e2763bb2fd91">
<td class="" id="fMIB">E.</td>
<td class="" id="~Udt"><em>Peptostreptococcus</em> (0%)</td>
<td class="" id="kRgI"></td>
</tr>
<tr id="377f2c27-21e8-434e-9aae-fea432453284">
<td class="" id="fMIB">F.</td>
<td class="" id="~Udt"><em>Staphylococcus aureus</em> (86%)
                                                            </td>
<td class="" id="kRgI"></td>
</tr>
<tr id="f0d32fc0-b5a8-421d-afb9-967e73bb0214">
<td class="" id="fMIB">G.</td>
<td class="" id="~Udt"><em>Streptococcus gallolyticus</em>
                                                                (formerly <em>S bovis</em>) (1%)</td>
<td class="" id="kRgI"></td>
</tr>
<tr id="f9c4ee9e-b274-45f3-b17f-0ecaedd49330">
<td class="" id="fMIB">H.</td>
<td class="" id="~Udt"><em>Streptococcus pneumoniae</em>
                                                                (2%)</td>
<td class="" id="kRgI"></td>
</tr>
<tr id="d58b4bc8-e4e6-4468-9038-6242e84ee878">
<td class="" id="fMIB">I.</td>
<td class="" id="~Udt"><em>Viridans group streptococcus</em>
                                                                (5%)</td>
<td class="" id="kRgI"></td>
</tr>
</tbody>
</table>
<p class="" id="b1c09f84-3b4a-4e1d-9bf3-2283cc759a5c">Incorrect</p>
<p class="" id="387cbb9f-149a-48fe-896f-c1e8fbc1dc50">Correct answer F
                                                </p>
<p class="" id="a278231e-f39b-4bec-8b20-9dcc876a9e1a">86%Answered
                                                    correctly</p>
<p class="" id="fdd726e1-f56b-4c19-b5cb-53b4804f3e9e">16 secsTime Spent
                                                </p>
<p class="" id="a7524984-4464-402a-97e0-ed7590790abe">2024Version</p>
<ul class="bulleted-list" id="21fbfca5-1c0c-4497-951f-a775627fc426">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="b948ac51-5a5f-4afb-a519-16da1c2df3cc">
<li style="list-style-type:disc"></li>
</ul>
<p class="" id="55fdd4bb-09c3-4b14-b1d7-209855e2119c">
<em>Staphylococcus</em> aureus can cause right-sided endocarditis in
                                                    intravenous drug users (IVDUs).  In patients other than IVDUs, <em>S
                                                        aureus</em> disseminates from a primary disease process (eg,
                                                    abscess, infected central line) and moves by hematogenous spread to
                                                    the endocardium.  <em>S aureus</em> settles on the valve leaflets
                                                    due to blood flow turbulence at these sites.  <em>S aureus</em> can
                                                    cause perforations in the heart valves, rupture the chordae
                                                    tendineae, and send septic emboli to the lung (with right heart
                                                    endocarditis) or to the brain and systemic circulation (with left
                                                    heart endocarditis).  This patient with fever is an IVDU with a
                                                    holosystolic murmur that increases with inspiration (likely
                                                    tricuspid regurgitation) and multiple lung opacities (likely septic
                                                    emboli).  She likely has <em>S aureus</em> endocarditis.</p>
<p class="" id="885ae965-84aa-4c26-84be-a68017739428">(Choice A) 
                                                    <em>Candida</em> endocarditis (rare) is typically a severe
                                                    manifestation of candidemia, with septic emboli to the brain,
                                                    extremities, and gastrointestinal tract.  Patients who are IVDUs,
                                                    have prosthetic heart valves, or have indwelling lines are at
                                                    increased risk of infection.</p>
<p class="" id="a9544da8-58b6-4b5a-bfc2-edeebcbd33b3">(Choice B) 
                                                    Culture-negative endocarditis - due to <em>Bartonella, Coxiella,
                                                        Mycoplasma, Histoplasma, Chlamydia</em>, or the HACEK organisms
                                                    (<em>Haemophilus, Actinobacillus, Cardiobacterium, Eikenella</em>,
                                                    and <em>Kingella</em>), among others - would be much less likely
                                                    than <em>S aureus</em> endocarditis.</p>
<p class="" id="7889dda2-aa5d-444b-9e30-34214036a8c7">(Choices C, D, E,
                                                    and H)  <em>Streptococcus pneumoniae</em> and <em>Klebsiella
                                                        pneumoniae</em> typically cause pneumonia; <em>Klebsiella</em>
                                                    can also lead to urinary tract infections.  Nocardiosis typically
                                                    affects the lungs (cavitary lesions), brain (brain abscess), or skin
                                                    and is seen mostly in immunocompromised patients. 
                                                    <em>Peptostreptococcus</em> causes anaerobic infections (dental,
                                                    cutaneous, intraabdominal).</p>
<p class="" id="30e0a1a2-905e-415a-98d8-8aadeb219a8b">(Choice G) 
                                                    <em>Streptococcus gallolyticus</em> (formerly <em>S bovis</em>) is a
                                                    part of the normal flora of the colon, and bacteremia or
                                                    endocarditis caused by <em>S bovis</em> is associated with colon
                                                    cancer (~25% of cases).</p>
<p class="" id="7369977b-c250-44e2-8612-a1c790d47888">(Choice I) 
                                                    <em>Streptococcus viridans</em> is the most common etiologic agent
                                                    in subacute bacterial endocarditis (SBE) following dental work.  SBE
                                                    occurs most frequently in patients with a preexisting valvular
                                                    abnormality (eg, rheumatic heart disease, congenital heart
                                                    malformations).  The presentation is typically subacute (over weeks
                                                    rather than days).</p>
<p class="" id="b8089726-b49b-4da5-86da-68148273bf41">Educational
                                                    objective:</p>
<p class="" id="e673948d-a60f-4cb9-ab72-b5bb7b3f696b"><em>Staphylococcus
                                                        aureus</em> causes acute bacterial endocarditis with rapid onset
                                                    of symptoms, including shaking chills (rigors), high fever, dyspnea
                                                    on exertion, and malaise.  In intravenous drug users, it can cause
                                                    right-sided endocarditis with septic embolization into the lungs.
                                                </p>
<p class="" id="177ce71e-710e-44f7-9d7b-852ef6a7e32f">Microbiology</p>
<p class="" id="876594cc-593b-41d7-b992-1dd87c9d8e5e">Subject</p>
<p class="" id="d59bf162-594a-44aa-b809-9cb3611b6c31">Infectious
                                                    Diseases</p>
<p class="" id="16ec9680-f3ee-4440-840d-e185c240e939">System</p>
<p class="" id="2b22aa25-096d-461c-a1fb-5ebece35331d">Endocarditis</p>
<p class="" id="98aec311-0c45-42b3-8078-f1c08506d643">Topic</p>
<p class="" id="cae490a6-d8a7-4402-9b64-e319ecf4e13b">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="c6e31bc7-e2da-4ba5-b701-e0701d446220">‚ùåelementFinder:
                                                    //a[@href='javascript:void(0)']</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
