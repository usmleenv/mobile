
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>731</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="298e6392-b67c-4e04-84ec-7c942a3c1ae5">A 46-year-old man comes to the
                                        office due to 3 days of fever, shortness of breath, pleuritic chest pain, and
                                        cough with purulent sputum.  The patient has no prior medical conditions and
                                        takes no medications.  He has smoked a pack of cigarettes daily for 20 years. 
                                        Temperature is 38 C (100.4 F).  On examination, there are crackles at the base
                                        of the left lung.  Chest x-ray reveals consolidation in the left lower lobe. 
                                        Microscopic analysis of a sputum sample shows gram-positive, lancet-shaped cocci
                                        in pairs.  Which of the following additional characteristics are these bacteria
                                        most likely to demonstrate?</p>
<table class="simple-table" id="2ac8c8c9-9e8c-4d50-8b89-7bb953169119">
<tbody>
<tr id="07a17dc0-4e78-4254-b0d9-a32e32098883">
<td class="" id="cA[}">A.</td>
<td class="" id="dYP|">Ability to hydrolyze with pyrrolidonyl
                                                    arylamidase</td>
<td class="" id="EPeL"></td>
</tr>
<tr id="545739e2-fea5-4d05-9795-cbf2e0cd8cdd">
<td class="" id="cA[}">B.</td>
<td class="" id="dYP|">Complete hemolysis on blood agar</td>
<td class="" id="EPeL"></td>
</tr>
<tr id="4b04d253-8af2-44c1-8f81-aed776d110ea">
<td class="" id="cA[}">C.</td>
<td class="" id="dYP|">Growth in hypertonic saline</td>
<td class="" id="EPeL"></td>
</tr>
<tr id="0be97557-e5ed-4f64-9355-246ecd5febb3">
<td class="" id="cA[}">D.</td>
<td class="" id="dYP|">Lysis in the presence of bile salts</td>
<td class="" id="EPeL"></td>
</tr>
<tr id="8a0a4634-0fde-4788-b6da-589270b1be79">
<td class="" id="cA[}">E.</td>
<td class="" id="dYP|">Production of the catalase enzyme</td>
<td class="" id="EPeL"></td>
</tr>
<tr id="9e1c176d-bed9-4605-a0d6-c5f9dd25f07d">
<td class="" id="cA[}">F.</td>
<td class="" id="dYP|">Resistance to optochin</td>
<td class="" id="EPeL"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="70dea00c-83be-4fb7-8454-b504273b3b75">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="2d8542bd-b393-42e6-9eb2-c671d96117b9">
<tbody>
<tr id="03309931-6aad-49f9-b201-2b1b6c0325ce">
<td class="" id="Jl[[">A.</td>
<td class="" id="DV&gt;}">Ability to hydrolyze with
                                                                pyrrolidonyl arylamidase (8%)</td>
<td class="" id="ITxW"></td>
</tr>
<tr id="2485d694-c46f-461d-abe2-cb947d04a321">
<td class="" id="Jl[[">B.</td>
<td class="" id="DV&gt;}">Complete hemolysis on blood agar
                                                                (13%)</td>
<td class="" id="ITxW"></td>
</tr>
<tr id="b184819c-6b8f-491e-b64c-acbdb39d4586">
<td class="" id="Jl[[">C.</td>
<td class="" id="DV&gt;}">Growth in hypertonic saline (2%)
                                                            </td>
<td class="" id="ITxW"></td>
</tr>
<tr id="7a5e9e9e-76c0-4aac-b13e-95e682555205">
<td class="" id="Jl[[">D.</td>
<td class="" id="DV&gt;}">Lysis in the presence of bile
                                                                salts (49%)</td>
<td class="" id="ITxW"></td>
</tr>
<tr id="0b5c2180-a004-4c6f-bc73-38b14b6449e9">
<td class="" id="Jl[[">E.</td>
<td class="" id="DV&gt;}">Production of the catalase enzyme
                                                                (8%)</td>
<td class="" id="ITxW"></td>
</tr>
<tr id="9c279076-b150-4d8b-911e-39b4e3616b70">
<td class="" id="Jl[[">F.</td>
<td class="" id="DV&gt;}">Resistance to optochin (18%)</td>
<td class="" id="ITxW"></td>
</tr>
</tbody>
</table>
<p class="" id="bd9a4c9d-6baf-4ebf-9cb9-3a5bceb9d3e4">Incorrect</p>
<p class="" id="47e183a3-678f-454e-81e7-678ced3840b5">Correct answer D
                                                </p>
<p class="" id="ee54a072-2114-4c31-bafa-b1ac4af3574d">49%Answered
                                                    correctly</p>
<p class="" id="786c4845-7f4e-460c-ba8e-7f71ffb0fa34">12 secsTime Spent
                                                </p>
<p class="" id="d46e7821-e5b8-453f-97eb-4fa1841e8cc5">2024Version</p>
<ul class="bulleted-list" id="c974017a-9c8d-4359-8804-948f770cdfe2">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="db253236-205c-40d2-9042-9cea615a229c">
<li style="list-style-type:disc"></li>
</ul>
<figure class="image" id="b0706319-8ccf-4b5d-a03e-06b41970a5ab"><a href="https://lh7-us.googleusercontent.com/ClIOnfJXifGFgcnxDDs9u3BcaAylV4rinLKgTyWhhzkURj1wygqaUVbS9PL4w41zK2zx3BpA_phoWyljlzWUmhdrjxuzopDYKRQnapXROJ0w9KvN1wlwxbKi-DhE5PjTB4AoIXclbd8Kk9IeNspccvs"><img loading="lazy" src="https://lh7-us.googleusercontent.com/ClIOnfJXifGFgcnxDDs9u3BcaAylV4rinLKgTyWhhzkURj1wygqaUVbS9PL4w41zK2zx3BpA_phoWyljlzWUmhdrjxuzopDYKRQnapXROJ0w9KvN1wlwxbKi-DhE5PjTB4AoIXclbd8Kk9IeNspccvs" style="width:602px"/></a>
</figure>
<p class="" id="61ceb65b-9cf5-4bf9-a874-d152a85a5757">The presence of
                                                    lancet-shaped, gram-positive diplococci in the sputum sample of a
                                                    patient with fever and cough is suggestive of community-acquired
                                                    pneumonia due to <em>Streptococcus pneumoniae</em>.  This pathogen
                                                    is typically identified in the laboratory based on the following:
                                                </p>
<ul class="bulleted-list" id="37127cd9-d0cd-4008-821d-4d9d4424ee5d">
<li style="list-style-type:disc">Catalase testing adds hydrogen
                                                        peroxide to a bacterial sample to determine whether oxygen
                                                        bubbles form (catalase positive) or no reaction occurs (catalase
                                                        negative). Streptococci are catalase negative, which
                                                        distinguishes them from staphylococci (catalase positive)
                                                        (Choice E).</li>
</ul>
<ul class="bulleted-list" id="9978c612-fbeb-4dce-9217-0589b9ec127d">
<li style="list-style-type:disc">Hemolysis pattern, the degree of
                                                        hemolysis on blood agar, broadly classifies streptococcal
                                                        species:<ul class="bulleted-list" id="ffa68061-6586-466b-bede-12b6bb7163cd">
<li style="list-style-type:circle">Alpha-hemolytic
                                                                streptococci (eg, <em>S pneumoniae,</em> viridans
                                                                streptococci) cause partial hemolysis on blood agar and
                                                                turn the agar green due to hemoglobin oxidation.</li>
</ul>
<ul class="bulleted-list" id="d1b59343-c874-41a1-8e8e-22446fc1ce21">
<li style="list-style-type:circle">Beta-hemolytic
                                                                streptococci (eg, <em>Streptococcus agalactiae</em>,
                                                                <em>Streptococcus pyogenes</em>) cause complete
                                                                hemolysis on blood agar, resulting in a clear halo of
                                                                lysed red blood cells around the colonies (Choice B).
                                                            </li>
</ul>
<ul class="bulleted-list" id="a00501d1-52bd-43f1-9090-4a35605e241d">
<li style="list-style-type:circle">Gamma-hemolytic
                                                                streptococci (eg, <em>Streptococcus gallolyticus</em>
                                                                [formerly <em>S bovis</em>]) do not cause hemolysis.
                                                            </li>
</ul>
</li>
</ul>
<ul class="bulleted-list" id="13da1431-4b6e-4edb-971d-55b4f51fe129">
<li style="list-style-type:disc">Optochin and bile-solubility tests
                                                        differentiate alpha-hemolytic species:<ul class="bulleted-list" id="e6a3491a-ccf6-470b-8e25-b1932ac73352">
<li style="list-style-type:circle">The antibiotic optochin
                                                                inhibits the growth of <em>S pneumoniae</em> but not
                                                                viridans streptococci (Choice F)</li>
</ul>
<ul class="bulleted-list" id="b8e177b9-9f1e-4650-be06-46058cebe732">
<li style="list-style-type:circle">The addition of bile
                                                                salts to a solution of <em>S pneumoniae</em> activates
                                                                pneumolysin (autolytic enzyme) and results in cell lysis
                                                                (clearing of the sample), whereas viridans streptococci
                                                                are unaffected.</li>
</ul>
</li>
</ul>
<p class="" id="edcb5eb1-e8b4-4dc9-88ed-20b0b967404d">(Choice A) 
                                                    Pyrrolidonyl arylamidase (PYR) enzyme testing is used to
                                                    differentiate beta- and gamma-hemolytic streptococci.  <em>S
                                                        pyogenes</em> and enterococci are PYR positive (ie, can
                                                    hydrolyze with PYR), whereas <em>S agalactiae</em> and <em>S
                                                        gallolyticus</em> are PYR negative (ie, do not produce PYR).</p>
<p class="" id="1e94ac34-f12a-4fc9-889e-4872e02c894b">(Choice C) 
                                                    Enterococci and some streptococcal species (eg, <em>S
                                                        gallolyticus</em>) are gamma-hemolytic (no hemolysis),
                                                    catalase-negative organisms.  Enterococci can grow in hypertonic
                                                    saline (6.5% NaCl) and bile, whereas <em>S gallolyticus</em> can
                                                    grow in the presence of bile but not 6.5% NaCl.  <em>S
                                                        gallolyticus</em> bacteremia is associated with colon cancer.
                                                </p>
<p class="" id="2eb241b1-39e7-442a-bab9-f9cd60c33d87">Educational
                                                    objective:</p>
<p class="" id="a4b1fb56-1889-43fb-ad16-6bdcc9e60c8c"><em>Streptococcus
                                                        pneumoniae</em> is a gram-positive, lancet-shaped diplococcus
                                                    that is catalase negative, alpha-hemolytic, optochin sensitive, and
                                                    bile soluble.  Viridans group streptococci are also alpha-hemolytic,
                                                    but they are optochin resistant and bile insoluble. 
                                                    <em>Streptococcus pyogenes</em> (a type of group A streptococcus) is
                                                    beta-hemolytic and PYR positive and appears as gram-positive cocci
                                                    in chains.</p>
<p class="" id="926ed0bf-e2de-4ff7-9cdb-4efd1957d6eb">Microbiology</p>
<p class="" id="94c1ba26-043e-4a3b-b2be-3811edd1cdaf">Subject</p>
<p class="" id="aed23741-6d25-430a-85a4-048f8fe4aaa4">Pulmonary &amp;
                                                    Critical Care</p>
<p class="" id="9f923493-8ec0-4dbe-ad4d-ad2b0cb737d6">System</p>
<p class="" id="b46eff71-f189-469d-9389-ae0eeaac31b9">Community acquired
                                                    pneumonia</p>
<p class="" id="080e6885-4223-4534-bb89-0cd85f053b0d">Topic</p>
<p class="" id="9d5f8d13-017e-4880-a2f4-33a33188b369">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="f5d8fe5b-0c4e-4d52-9b1e-ec0d7d04cf5a">‚ú®Done</p>
<p class="" id="08df2f7c-9f36-4829-ac85-81f3212cfbe9">Exhibit Display
                                                </p>
<figure class="image" id="3ac816cf-9775-4194-a57a-0dbeba8aa477"><a href="https://lh7-us.googleusercontent.com/M6neg0NDmsPbsCH3qINxEknxKJzQm33vQEPYMaWizMrnMazqkRKMgg4TuFGCjyz5G--8qeFz8CMDjmlnSw5rZXL_LIY_UoaZ8VjKRUci6o3QUOCyu-X3sta3juQ4Qe2lLpIkRVcMVJWXebW8J9Ypa9E"><img loading="lazy" src="https://lh7-us.googleusercontent.com/M6neg0NDmsPbsCH3qINxEknxKJzQm33vQEPYMaWizMrnMazqkRKMgg4TuFGCjyz5G--8qeFz8CMDjmlnSw5rZXL_LIY_UoaZ8VjKRUci6o3QUOCyu-X3sta3juQ4Qe2lLpIkRVcMVJWXebW8J9Ypa9E" style="width:602px"/></a>
</figure>
<p class="" id="8ed61be6-348a-45e0-8272-c4dbc7ec1cfb">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="511d9125-e605-45c3-b78d-4f78e94101b9">ExistingMy
                                                    Notebook</p>
<p class="" id="0ff98bf6-c70d-4be2-8e14-3f0e69cccad1">Exhibit Display
                                                </p>
<figure class="image" id="5d0a9e27-101d-4e36-9bdf-a5fd722091fe"><a href="https://lh7-us.googleusercontent.com/_F94TEvyJaHrC92bv3441TkdJYZBOROFaGklsxIM93_KAjnKz6ot8Aj-huMDxIcfcBaGF9kxL8KfiXzwSV71YmA8ynjvpplKTbeUyMnz9-UC2Rq-_llhSs4BiOtPu88yd9xw2i2HLImkRRnKktYYrrM"><img loading="lazy" src="https://lh7-us.googleusercontent.com/_F94TEvyJaHrC92bv3441TkdJYZBOROFaGklsxIM93_KAjnKz6ot8Aj-huMDxIcfcBaGF9kxL8KfiXzwSV71YmA8ynjvpplKTbeUyMnz9-UC2Rq-_llhSs4BiOtPu88yd9xw2i2HLImkRRnKktYYrrM" style="width:602px"/></a>
</figure>
<p class="" id="c87dbf98-697b-478d-8daf-4e5f44251637">Zoom InZoom Out 
                                                    ResetNew</p>
<p class="" id="815261ae-0848-4942-ac67-424c19f3bbd3">ExistingMy
                                                    Notebook</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }


    


    

    /* Adjust table padding to make room for radio button */
    


    /* Clickable Answer Choices */
    table tr.answer-choice {
        cursor: pointer !important;
        transition: all 0.3s ease !important;
    }

    table tr.answer-choice:hover {
        background: #f8f9fa !important;
    }

    table tr.answer-choice td:first-child {
        position: relative !important;
        padding-left: 35px !important;
    }

    table tr.answer-choice td:first-child::before {
        content: '';
        position: absolute;
        left: 8px;
        top: 50%;
        transform: translateY(-50%);
        width: 16px;
        height: 16px;
        border: 2px solid #999;
        border-radius: 50%;
        background: white;
        transition: all 0.2s ease;
        box-sizing: border-box;
    }

    table tr.answer-choice.selected td:first-child::before {
        border-color: #1a73e8;
        border-width: 5px;
    }

    table tr.answer-choice.selected {
        background: #e8f4ff !important;
    }

    table tr.answer-choice.selected td:first-child {
        color: #1a73e8 !important;
        font-weight: 600 !important;
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>





<script>
(function() {
    // Get question ID from summary
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Communicate with parent window (if in iframe)
    function notifyParent(choice) {
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'choiceSelected',
                questionId: getQuestionId(),
                choice: choice
            }, '*');
        }
    }

    // Load saved choice from parent or localStorage
    function loadSavedChoice() {
        const questionId = getQuestionId();

        // Try to get from localStorage first
        const saved = localStorage.getItem('choice_q' + questionId);
        if (saved) {
            selectChoice(saved, false);
        }

        // Ask parent for saved choice (if in iframe)
        if (window.parent && window.parent !== window) {
            window.parent.postMessage({
                type: 'getChoice',
                questionId: questionId
            }, '*');
        }
    }

    // Listen for messages from parent
    window.addEventListener('message', function(event) {
        if (event.data.type === 'setChoice' && event.data.questionId === getQuestionId()) {
            selectChoice(event.data.choice, false);
        }
    });

    // Select a choice
    function selectChoice(choice, notify = true) {
        if (!choice) return;

        const questionId = getQuestionId();

        // Remove previous selection
        document.querySelectorAll('tr.answer-choice').forEach(row => {
            row.classList.remove('selected');
        });

        // Add selection to clicked choice
        const choiceRow = document.querySelector(`tr.answer-choice[data-choice="${choice}"]`);
        if (choiceRow) {
            choiceRow.classList.add('selected');

            // Save to localStorage
            localStorage.setItem('choice_q' + questionId, choice);

            // Notify parent (if in iframe)
            if (notify) {
                notifyParent(choice);
            }
        }
    }

    // Initialize answer choices
    function initializeChoices() {
        // Find all answer choice rows (A, B, C, D, E, F, etc.)
        const choicePattern = /^[A-Z]\.$/;
        const tables = document.querySelectorAll('table.simple-table');

        tables.forEach(table => {
            const rows = table.querySelectorAll('tr');
            rows.forEach(row => {
                const firstCell = row.querySelector('td:first-child');
                if (firstCell && choicePattern.test(firstCell.textContent.trim())) {
                    const choice = firstCell.textContent.trim().replace('.', '');
                    row.classList.add('answer-choice');
                    row.setAttribute('data-choice', choice);
                    row.style.position = 'relative';

                    // Add click handler
                    row.addEventListener('click', function(e) {
                        // Don't trigger if clicking inside a link or button
                        if (e.target.tagName === 'A' || e.target.closest('a')) return;

                        // Toggle selection
                        if (this.classList.contains('selected')) {
                            this.classList.remove('selected');
                            const questionId = getQuestionId();
                            localStorage.removeItem('choice_q' + questionId);
                            notifyParent('');
                        } else {
                            selectChoice(choice);
                        }
                    });
                }
            });
        });

        // Load saved choice after a short delay
        setTimeout(loadSavedChoice, 100);
    }

    // Run when page loads
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeChoices);
    } else {
        initializeChoices();
    }
})();
</script>
