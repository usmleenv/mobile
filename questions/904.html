
<style>
    * {
        box-sizing: border-box !important;
    }

    body {
        font-family: 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        line-height: 1.9 !important;
        color: #1f1f1f !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 8px 16px 16px 16px !important;
        background: #ffffff !important;
        font-size: 16.5px !important;
    }

    p {
        margin-bottom: 20px !important;
        font-size: 16.5px !important;
        line-height: 1.95 !important;
        color: #1f1f1f !important;
        font-weight: 400 !important;
    }

    strong, b {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        background: rgba(26, 115, 232, 0.08) !important;
        padding: 2px 6px !important;
        border-radius: 8px !important;
    }

    /* Details/Summary (collapsible sections) */
    details {
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
        border-radius: 8px !important;
        padding: 24px 28px !important;
        margin: 24px 0 !important;
        border: none;
        box-shadow: none !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    details:hover {
        border-color: #1a73e8 !important;
        box-shadow: none !important;
        transform: translateY(-2px) !important;
    }

    details[open] {
        background: #ffffff !important;
        border-color: #1a73e8 !important;
        box-shadow: none !important;
    }

    summary {
        cursor: pointer !important;
        font-weight: 800 !important;
        color: #ffffff !important;
        font-size: 20px !important;
        padding: 16px 24px !important;
        border-radius: 8px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        display: flex !important;
        align-items: center !important;
        user-select: none !important;
        box-shadow: none !important;
        letter-spacing: 0.5px !important;
    }

    summary:hover {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        transform: translateX(6px) scale(1.02) !important;
        box-shadow: none !important;
    }

    summary:active {
        transform: translateX(4px) scale(0.99) !important;
    }

    summary::marker {
        color: rgba(255, 255, 255, 0.9) !important;
        font-size: 1.3em !important;
    }

    summary strong {
        background: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
        padding: 4px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        font-size: 19px !important;
        letter-spacing: 1px !important;
    }

    /* Tables - Premium Design */
    table {
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        margin: 28px 0 !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: none !important;
        border: none !important;
        background: #ffffff !important;
    }

    table.simple-table {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    }

    table tr {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
    }

    table tr:nth-child(odd) {
        background: rgba(248, 249, 250, 0.5) !important;
    }

    table tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.8) !important;
    }

    table tr:hover {
        background: linear-gradient(90deg, #e8f0fe 0%, #f1f8ff 100%) !important;
        transform: translateX(4px) scale(1.01) !important;
        box-shadow: none !important;
        z-index: 1 !important;
    }

    table td {
        padding: 18px 24px !important;
        border-bottom: 1px solid rgba(232, 234, 237, 0.6) !important;
        font-size: 16.5px !important;
        line-height: 1.7 !important;
        color: #1f1f1f !important;
        vertical-align: middle !important;
    }

    table tr:last-child td {
        border-bottom: none !important;
    }

    /* First column (A, B, C, D, E) */
    table td:first-child {
        font-weight: 800 !important;
        color: #ffffff !important;
        width: 52px !important;
        text-align: center !important;
        font-size: 18px !important;
        background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%) !important;
        border-right: 3px solid #1557b0 !important;
        position: relative !important;
        letter-spacing: 0.5px !important;
    }

    table tr:hover td:first-child {
        background: linear-gradient(135deg, #1557b0 0%, #0d47a1 100%) !important;
        box-shadow: none !important;
    }

    /* Second column (content) */
    table td:nth-child(2) {
        font-weight: 500 !important;
        padding-left: 28px !important;
    }

    /* Third column (empty - hide it) */
    table td:last-child:empty {
        display: none !important;
    }

    /* Lists */
    ul, ol {
        margin: 16px 0 !important;
        padding-left: 32px !important;
    }

    li {
        margin: 10px 0 !important;
        line-height: 1.8 !important;
        color: #1f1f1f !important;
    }

    ul.bulleted-list li {
        position: relative !important;
        padding-left: 8px !important;
    }

    ul.toggle {
        list-style: none !important;
        padding-left: 0 !important;
    }

    /* Links */
    a {
        color: #1a73e8 !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        border-bottom: 2px solid transparent !important;
        transition: all 0.2s !important;
    }

    a:hover {
        border-bottom-color: #1a73e8 !important;
        background: rgba(26,115,232,0.08) !important;
        padding: 2px 4px !important;
        border-radius: 8px !important;
    }

    /* Images & Media */
    img, video {
        max-width: none !important;
        height: auto !important;
        border-radius: 8px !important;
        box-shadow: none !important;
        margin: 24px 0 !important;
        display: block !important;
        border: none !important;
    }

    img:hover, video:hover {
        box-shadow: none !important;
        border-color: #1a73e8 !important;
    }

    /* Code blocks (if any) */
    code {
        background: #f1f3f4 !important;
        padding: 2px 8px !important;
        border-radius: 8px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 14px !important;
        color: #d93025 !important;
    }

    pre {
        background: #f8f9fa !important;
        padding: 8px 16px 16px 16px !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        border-left: 4px solid #1a73e8 !important;
    }

    /* Headings */
    h1, h2, h3, h4, h5, h6 {
        color: #1a73e8 !important;
        font-weight: 700 !important;
        margin-top: 24px !important;
        margin-bottom: 16px !important;
        line-height: 1.4 !important;
    }

    h1 { font-size: 32px !important; }
    h2 { font-size: 26px !important; }
    h3 { font-size: 22px !important; }
    h4 { font-size: 19px !important; }

    /* Blockquotes */
    blockquote {
        border-left: 4px solid #1a73e8 !important;
        padding-left: 20px !important;
        margin: 20px 0 !important;
        font-style: italic !important;
        color: #5f6368 !important;
        background: #f8f9fa !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
    }

    /* Horizontal Rule */
    hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(to right, transparent, #1a73e8, transparent) !important;
        margin: 32px 0 !important;
    }

    /* Selection */
    ::selection {
        background: #e8f0fe !important;
        color: #1a73e8 !important;
    }

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>




<details open>
<summary><strong>904</strong><button class="bionic-reading-btn" onclick="toggleBionicReading(event)" title="Toggle Bionic Reading (Ctrl+B)"><span id="bionicIcon">üëÅÔ∏è</span></button><button class="highlighter-btn" onclick="toggleHighlighter(event)" title="Toggle Highlighter (Ctrl+H)"><span id="highlighterIcon">üñäÔ∏è</span></button></summary>
<p class="" id="b8c7e24f-1389-48c4-9747-1cbff62ffd4f">A 60-year-old man comes to the
                                        office due to dark, rusty-colored urine for the last 2 weeks.  He reports no
                                        pain, urinary frequency, or urgency.  The patient has no chronic medical
                                        conditions and takes no medications.  He smoked a half pack of cigarettes daily
                                        for 10 years but quit 30 years ago.  His father had hypertension and his mother
                                        has Alzheimer dementia.  Urinalysis shows a large number of red blood cells. 
                                        Renal ultrasound reveals a mass in the right kidney.  Cytologic evaluation of
                                        the mass shows malignant cells with a chromosome 3p deletion.  The deletion most
                                        likely involves which of the following genes?</p>
<table class="simple-table" id="35e2cdc9-ae72-4c18-8c13-1ec297ee5e6a">
<tbody>
<tr id="cb01a932-c776-4b16-a7d5-b00e67798a53">
<td class="" id="wcj[">A.</td>
<td class="" id="PgRt"><em>c-MYC</em></td>
<td class="" id="tZ\{"></td>
</tr>
<tr id="2417fccc-6cc2-4697-87b1-9f75b4ca610f">
<td class="" id="wcj[">B.</td>
<td class="" id="PgRt"><em>NF-1</em></td>
<td class="" id="tZ\{"></td>
</tr>
<tr id="16739126-87ac-41ab-b171-beb12843a6f1">
<td class="" id="wcj[">C.</td>
<td class="" id="PgRt"><em>RB</em></td>
<td class="" id="tZ\{"></td>
</tr>
<tr id="e6e5ae2c-526c-4b83-a1cd-4ac7c8152845">
<td class="" id="wcj[">D.</td>
<td class="" id="PgRt"><em>VHL</em></td>
<td class="" id="tZ\{"></td>
</tr>
<tr id="1414fe46-f7ff-42fd-97e4-40ab45751b5a">
<td class="" id="wcj[">E.</td>
<td class="" id="PgRt"><em>WT-1</em></td>
<td class="" id="tZ\{"></td>
</tr>
</tbody>
</table>
<ul class="toggle" id="3f91d31d-2d12-493b-a557-9f1dc59a4419">
<li>
<details>
<summary>Submit</summary>
<table class="simple-table" id="5b1fd706-b243-4922-a920-6adeff75a66e">
<tbody>
<tr id="b6011a31-79aa-4ed7-8468-97ff60d036af">
<td class="" id="^uG_">A.</td>
<td class="" id="YpzD"><em>c-MYC</em> (9%)</td>
<td class="" id="QGmz"></td>
</tr>
<tr id="190fea12-0f56-4b55-8570-f8e3c8ab9e96">
<td class="" id="^uG_">B.</td>
<td class="" id="YpzD"><em>NF-1</em> (3%)</td>
<td class="" id="QGmz"></td>
</tr>
<tr id="362d5c15-0f6b-424a-b302-91f817751cf7">
<td class="" id="^uG_">C.</td>
<td class="" id="YpzD"><em>RB</em> (6%)</td>
<td class="" id="QGmz"></td>
</tr>
<tr id="dc3b8e82-2c95-4074-98c8-0f9ad67b60b3">
<td class="" id="^uG_">D.</td>
<td class="" id="YpzD"><em>VHL</em> (72%)</td>
<td class="" id="QGmz"></td>
</tr>
<tr id="d39d31c6-0b8e-42dd-90dc-25f1dedcb6e3">
<td class="" id="^uG_">E.</td>
<td class="" id="YpzD"><em>WT-1</em> (9%)</td>
<td class="" id="QGmz"></td>
</tr>
</tbody>
</table>
<p class="" id="2a4c9281-19c4-4c2e-ac48-7c89910ee04b">Incorrect</p>
<p class="" id="13a1f12a-8e93-4004-975a-0bdfdf8bd791">Correct answer D
                                                </p>
<p class="" id="34c46d69-aa19-41da-889e-0d9242f3cd47">72%Answered
                                                    correctly</p>
<p class="" id="0a35c500-0587-4e14-acde-4ba9573419fa">57 secsTime Spent
                                                </p>
<p class="" id="7a7cd328-6cd8-4a6b-ae50-4416e64f0057">2024Version</p>
<ul class="bulleted-list" id="2cfd76bc-15e3-4ee3-b180-695af3898424">
<li style="list-style-type:disc">Explanation</li>
</ul>
<ul class="bulleted-list" id="ebbb5279-8b5e-4888-aa5b-8ab27e82d0a1">
<li style="list-style-type:disc"></li>
</ul>
<table class="simple-table" id="fd6ee9f4-c0cf-4cc6-b159-9552ce5b2f1c">
<tbody>
<tr id="99a66ded-0814-4603-9500-1b7b9b404a2f">
<td class="" id="vDn{">Common hereditary cancer syndromes
                                                            </td>
<td class="" id="QLrQ"></td>
<td class="" id="z:J="></td>
<td class="" id="SAl["></td>
</tr>
<tr id="8d41c54a-4f5c-40c9-9f59-f4695c9de418">
<td class="" id="vDn{">Syndrome</td>
<td class="" id="QLrQ">Gene</td>
<td class="" id="z:J=">Associated neoplasms</td>
<td class="" id="SAl[">Pathogenesis</td>
</tr>
<tr id="13f931ae-75cb-4108-897b-eb4eb316c007">
<td class="" id="vDn{">Lynch syndrome</td>
<td class="" id="QLrQ"><em>MSH2</em>, <em>MLH1, MSH6,
                                                                    PMS2</em></td>
<td class="" id="z:J=">‚Ä¢ Colorectal cancer<br/>‚Ä¢
                                                                Endometrial cancer<br/>‚Ä¢ Ovarian cancer<br/></td>
<td class="" id="SAl["><br/>‚Ä¢ Autosomal dominant<br/>‚Ä¢
                                                                Inactivating mutation in corresponding tumor suppressor
                                                                gene<br/>‚Ä¢ Deletion of remaining normal allele (second
                                                                hit) leads to loss of heterozygosity &amp; malignant
                                                                transformation<br/></td>
</tr>
<tr id="5b561d8b-8e8b-4ee1-bc58-0e65425d1158">
<td class="" id="vDn{">Familial adenomatous polyposis</td>
<td class="" id="QLrQ"><em>APC</em></td>
<td class="" id="z:J=">‚Ä¢ Colorectal cancer<br/>‚Ä¢ Desmoids
                                                                &amp; osteomas<br/>‚Ä¢ Brain tumors<br/></td>
<td class="" id="SAl["></td>
</tr>
<tr id="5b926470-4e5b-4d60-82b4-b01c033cf4aa">
<td class="" id="vDn{">von Hippel-Lindau syndrome</td>
<td class="" id="QLrQ"><em>VHL</em></td>
<td class="" id="z:J=">‚Ä¢ Hemangioblastomas <br/>‚Ä¢ Clear
                                                                cell renal carcinoma<br/>‚Ä¢ Pheochromocytoma<br/></td>
<td class="" id="SAl["></td>
</tr>
<tr id="4eb19695-c664-4e7e-8f29-951dc0af48f3">
<td class="" id="vDn{">Li-Fraumeni syndrome</td>
<td class="" id="QLrQ"><em>TP53</em></td>
<td class="" id="z:J=">‚Ä¢ Sarcomas<br/>‚Ä¢ Breast
                                                                cancer<br/>‚Ä¢ Brain tumors<br/>‚Ä¢ Adrenocortical
                                                                carcinoma<br/>‚Ä¢ Leukemia<br/></td>
<td class="" id="SAl["></td>
</tr>
<tr id="dee38c2a-f80a-4128-bfe2-5f2247181f0a">
<td class="" id="vDn{">Multiple endocrine neoplasia type 1
                                                            </td>
<td class="" id="QLrQ"><em>MEN1</em></td>
<td class="" id="z:J=">‚Ä¢ Parathyroid adenomas<br/>‚Ä¢
                                                                Pituitary adenomas<br/>‚Ä¢ Pancreatic adenomas<br/></td>
<td class="" id="SAl["></td>
</tr>
<tr id="0e894cd7-c500-478d-9f86-cd914854ec02">
<td class="" id="vDn{">Multiple endocrine neoplasia type 2
                                                            </td>
<td class="" id="QLrQ"><em>RET</em></td>
<td class="" id="z:J=">‚Ä¢ Medullary thyroid cancer<br/>‚Ä¢
                                                                Pheochromocytoma<br/>‚Ä¢ Parathyroid hyperplasia
                                                                (<br/><em>MEN2A</em>)</td>
<td class="" id="SAl[">‚Ä¢ Autosomal dominant<br/>‚Ä¢
                                                                Activating (gain-of-function) mutation in
                                                                proto-oncogene<br/>‚Ä¢ Continuous stimulation of cell
                                                                division predisposes to tumor growth<br/></td>
</tr>
</tbody>
</table>
<p class="" id="36c51956-8254-4e7c-8c67-b6ce367f0738">This patient with
                                                    hematuria and a malignant renal mass most likely has renal cell
                                                    carcinoma (RCC).  RCC, particularly the clear cell subtype, is
                                                    strongly associated with deletion, nonsense, and frameshift
                                                    mutations involving the von Hippel-Lindau (<em>VHL</em>) gene at
                                                    chromosome 3p.<em>  </em>The majority of RCCs are sporadic and
                                                    develop as single tumors; these are typically associated with
                                                    somatic mutations in the <em>VHL</em> gene.  Germline <em>VHL</em>
                                                    mutations also occur and are responsible for von Hippel-Lindau
                                                    syndrome, a rare, autosomal dominant disorder characterized by clear
                                                    cell renal carcinomas (often multifocal and bilateral), cerebellar
                                                    hemangioblastoma, and pheochromocytoma.</p>
<p class="" id="46f4c919-6d36-4026-838b-b961099eac0e"><em>VHL</em>
                                                    encodes a protein that normally inhibits hypoxia-inducible factors;
                                                    <em>VHL</em> mutations lead to constitutive activation of these
                                                    proteins, resulting in overexpression of multiple angiogenic growth
                                                    factors (eg, VEG-F, PDG-F) that stimulate tumor proliferation.  As a
                                                    result, tumors harboring VHL mutations are highly sensitive to
                                                    angiogenesis inhibitors.</p>
<p class="" id="19996b35-baba-4b81-8ce2-131e555f737a">(Choice A) 
                                                    <em>c-MYC</em> is an oncogene located on chromosome 8.  Mutations
                                                    are associated with Burkitt lymphoma and diffuse large B-cell
                                                    lymphoma.</p>
<p class="" id="b85f8cd8-fb55-4fe4-ae5c-c0863d2b1174">(Choice B) 
                                                    <em>NF-1</em> is a tumor suppressor gene located on chromosome 17. 
                                                    Mutations of this gene cause neurofibromatosis type 1.</p>
<p class="" id="19ef1139-c114-4b51-8471-c6acb9d7e580">(Choice C)  The
                                                    <em>RB</em> tumor suppressor gene (antioncogene) is located on
                                                    chromosome 13.  Mutations of this gene lead to the development of
                                                    retinoblastoma and osteosarcoma.</p>
<p class="" id="6bf04b77-b465-4432-ab24-3e50b837c3e4">(Choice E) 
                                                    Mutations of the <em>WT-1</em> tumor suppressor gene are associated
                                                    with the development of Wilms tumor.  This gene is located on
                                                    chromosome 11.</p>
<p class="" id="c16b6776-5ec5-474d-a0bd-8e65f29822f1">Educational
                                                    objective:</p>
<p class="" id="0c01fd22-0043-4db4-b4d1-daa9c3196d21">Sporadic and
                                                    hereditary (associated with von Hippel-Lindau disease) renal cell
                                                    carcinomas are associated with mutations involving the <em>VHL</em>
                                                    gene on chromosome 3p.  The <em>VHL</em> gene is a tumor suppressor
                                                    that inhibits hypoxia-inducible factors; mutations lead to
                                                    constitutive activation of these proteins, resulting in the
                                                    activation of multiple angiogenic and tumorigenic growth factors
                                                    (eg, VEG-F, PDG-F).</p>
<p class="" id="45ab1ddc-7080-42e3-a003-d449fe644b8a">References</p>
<ul class="bulleted-list" id="7f94f2a7-0eff-48de-9fe3-2e5000b4e7a8">
<li style="list-style-type:disc"><a href="http://www.ncbi.nlm.nih.gov/pubmed/29562667">VHL and
                                                            hypoxia signaling: beyond HIF in cancer.</a></li>
</ul>
<p class="" id="e3370616-18ef-4f3e-8b3e-4a207bcc96f2">Genetics</p>
<p class="" id="320f6089-f40b-47c1-ada6-9fd2aadee174">Subject</p>
<p class="" id="786a3005-f40e-40e7-bb07-eb0d00c73d71">Renal, Urinary
                                                    Systems &amp; Electrolytes</p>
<p class="" id="b97709a4-825d-4008-9f4f-c53548059fa2">System</p>
<p class="" id="08242674-2663-4bb7-87d5-65e234bdc5d3">Renal cell
                                                    carcinoma</p>
<p class="" id="109c5e45-d42d-431a-b39c-8d5f0cd511e7">Topic</p>
<p class="" id="08ae9bb4-998b-4ef0-8603-0e955f836f02">Copyright ¬©
                                                    UWorld. All rights reserved.</p>
<p class="" id="29722f81-7174-4081-bac9-3b5461fe5753">‚ùåelementFinder:
                                                    //a[@href='javascript:void(0)']</p>
</details>
</li>
</ul>
</details>


















<style>
.bionic-reading-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    margin-left: auto;
    flex-shrink: 0;
}

.bionic-reading-btn:hover {
    background: rgba(255, 255, 255, 0.35);
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.bionic-reading-btn.active {
    background: rgba(52, 168, 83, 0.4);
    border-color: rgba(52, 168, 83, 0.6);
}

.bionic-reading-btn.active:hover {
    background: rgba(52, 168, 83, 0.5);
}

summary {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

    /* Highlighter styles */
    .highlighted {
        background-color: #ffeb3b !important;
        transition: background-color 0.2s ease !important;
    }

    .highlighter-btn {
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        font-size: 20px !important;
        padding: 0 8px !important;
        margin-left: 8px !important;
        transition: transform 0.2s ease !important;
        vertical-align: middle !important;
    }

    .highlighter-btn:hover {
        transform: scale(1.2) !important;
    }

    .highlighter-btn.active {
        transform: scale(1.1) !important;
        filter: brightness(1.2) !important;
    }

    .highlighter-mode-active {
        cursor: text !important;
    }


    /* Right padding to avoid overlap with sidebar buttons */
    body {
        padding-right: 50px !important;
    }

    @media (max-width: 768px) {
        body {
            padding-right: 16px !important;
        }
    }

</style>



<script>
let bionicEnabled = false;
const originalContent = {};

function toggleBionicReading(event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    bionicEnabled = !bionicEnabled;
    const btn = document.querySelector('.bionic-reading-btn');
    const icon = document.getElementById('bionicIcon');

    if (bionicEnabled) {
        btn.classList.add('active');
        icon.textContent = '‚úÖ';
        applyBionicReading();
    } else {
        btn.classList.remove('active');
        icon.textContent = 'üëÅÔ∏è';
        restoreOriginalText();
    }
}

function applyBionicReading() {
    // Seleciona todos os elementos de texto, EXCETO summary e buttons
    const textElements = document.querySelectorAll('p:not(summary p):not(button p), td:not(summary td):not(button td), li:not(summary li):not(button li)');

    textElements.forEach((element, index) => {
        // Ignora elementos que cont√™m outros elementos complexos
        if (element.querySelector('p, td, li, h1, h2, h3, h4, h5, h6, button, summary')) {
            return;
        }

        // Ignora se o elemento est√° dentro de um summary ou button
        if (element.closest('summary') || element.closest('button') || element.closest('.bionic-reading-btn')) {
            return;
        }

        // Salva o conte√∫do original
        if (!originalContent[index]) {
            originalContent[index] = {
                element: element,
                html: element.innerHTML
            };
        }

        // Aplica Bionic Reading
        const bionicText = convertToBionic(element.textContent);
        element.innerHTML = bionicText;
    });
}

function restoreOriginalText() {
    // Restaura o conte√∫do original
    Object.values(originalContent).forEach(item => {
        item.element.innerHTML = item.html;
    });
}

function convertToBionic(text) {
    // Divide o texto em palavras, mantendo pontua√ß√£o
    const words = text.split(/(\s+|[.,;:!?()""''\-‚Äì‚Äî])/);

    const bionicWords = words.map(word => {
        // Ignora espa√ßos e pontua√ß√£o
        if (word.match(/^\s+$/) || word.match(/^[.,;:!?()""''\-‚Äì‚Äî]+$/)) {
            return word;
        }

        // Ignora palavras muito curtas (1-2 letras)
        if (word.length <= 2) {
            return word;
        }

        // Determina quantas letras deixar em negrito (metade da palavra, arredondado para cima)
        const boldLength = Math.ceil(word.length / 2);

        // Separa a parte em negrito da parte normal
        const boldPart = word.substring(0, boldLength);
        const normalPart = word.substring(boldLength);

        // Retorna com a primeira parte em negrito
        return `<strong style="font-weight: 700 !important; color: inherit !important; background: none !important; padding: 0 !important;">${boldPart}</strong>${normalPart}`;
    });

    return bionicWords.join('');
}

// Adiciona atalho de teclado (Ctrl+B ou Cmd+B)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        toggleBionicReading();
    }
});
</script>

<script>
    let highlighterActive = false;
    let questionHighlights = {};

    // Get question ID from the first summary strong tag
    function getQuestionId() {
        const firstSummary = document.querySelector('summary strong');
        return firstSummary ? firstSummary.textContent.trim() : '1';
    }

    // Load highlights from localStorage
    function loadHighlights() {
        const questionId = getQuestionId();
        const stored = localStorage.getItem('highlights_' + questionId);
        if (stored) {
            questionHighlights = JSON.parse(stored);
            applyStoredHighlights();
        }
    }

    // Save highlights to localStorage
    function saveHighlights() {
        const questionId = getQuestionId();
        localStorage.setItem('highlights_' + questionId, JSON.stringify(questionHighlights));
    }

    // Apply stored highlights
    function applyStoredHighlights() {
        Object.keys(questionHighlights).forEach(key => {
            const element = document.querySelector(`[data-highlight-id="${key}"]`);
            if (element && questionHighlights[key]) {
                element.classList.add('highlighted');
            }
        });
    }

    // Toggle highlighter mode
    function toggleHighlighter(event) {
        event.stopPropagation();
        highlighterActive = !highlighterActive;

        const btn = event.target.closest('.highlighter-btn');
        const icon = btn.querySelector('#highlighterIcon');

        if (highlighterActive) {
            btn.classList.add('active');
            icon.textContent = 'üñçÔ∏è';
            document.body.classList.add('highlighter-mode-active');
        } else {
            btn.classList.remove('active');
            icon.textContent = 'üñäÔ∏è';
            document.body.classList.remove('highlighter-mode-active');
        }
    }

    // Clear all highlights for this question
    function clearHighlights() {
        const questionId = getQuestionId();
        questionHighlights = {};
        localStorage.removeItem('highlights_' + questionId);
        document.querySelectorAll('.highlighted').forEach(el => {
            el.classList.remove('highlighted');
        });
    }

    // Handle text selection and highlighting
    document.addEventListener('mouseup', function(e) {
        if (!highlighterActive) return;

        const selection = window.getSelection();
        if (!selection.toString().trim()) return;

        const range = selection.getRangeAt(0);
        const container = range.commonAncestorContainer;

        // Only highlight text in paragraphs, not in buttons or other elements
        const paragraph = container.nodeType === 3 ? container.parentElement : container;
        if (paragraph.tagName !== 'P' && paragraph.tagName !== 'LI' && paragraph.tagName !== 'TD') {
            return;
        }

        // Create highlight span
        const span = document.createElement('span');
        span.classList.add('highlighted');

        // Generate unique ID for this highlight
        const highlightId = 'hl-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        span.setAttribute('data-highlight-id', highlightId);

        try {
            range.surroundContents(span);
            questionHighlights[highlightId] = true;
            saveHighlights();
        } catch (e) {
            console.log('Could not highlight selection');
        }

        selection.removeAllRanges();
    });

    // Load highlights when page loads
    window.addEventListener('load', loadHighlights);

    // Keyboard shortcut: Ctrl+H to toggle highlighter
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'h') {
            e.preventDefault();
            const btn = document.querySelector('.highlighter-btn');
            if (btn) {
                toggleHighlighter({target: btn, stopPropagation: () => {}});
            }
        }
        // Ctrl+Shift+H to clear all highlights
        if (e.ctrlKey && e.shiftKey && e.key === 'H') {
            e.preventDefault();
            if (confirm('Clear all highlights for this question?')) {
                clearHighlights();
            }
        }
    });
</script>
